<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlueSync: src/local_time.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BlueSync
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">local_time.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;zephyr/kernel.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdio.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for local_time.c:</div>
<div class="dyncontent">
<div class="center"><img src="local__time_8c__incl.png" border="0" usemap="#asrc_2local__time_8c" alt=""/></div>
<map name="asrc_2local__time_8c" id="asrc_2local__time_8c">
<area shape="rect" title=" " alt="" coords="171,5,295,31"/>
<area shape="rect" title=" " alt="" coords="5,79,128,104"/>
<area shape="poly" title=" " alt="" coords="208,33,107,76,105,71,206,28"/>
<area shape="rect" title=" " alt="" coords="153,79,221,104"/>
<area shape="poly" title=" " alt="" coords="228,32,204,69,200,66,223,30"/>
<area shape="rect" title=" " alt="" coords="245,79,315,104"/>
<area shape="poly" title=" " alt="" coords="243,30,267,66,263,69,239,32"/>
<area shape="rect" title=" " alt="" coords="340,79,407,104"/>
<area shape="poly" title=" " alt="" coords="257,28,340,70,337,75,255,33"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structlocal__time.html">local_time</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a924b422d34a036440ff7e9c06da3f5ad" id="r_a924b422d34a036440ff7e9c06da3f5ad"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a924b422d34a036440ff7e9c06da3f5ad">BLUESYNC_TICK_RATE_HZ</a>&#160;&#160;&#160;32768</td></tr>
<tr class="separator:a924b422d34a036440ff7e9c06da3f5ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94f4c79dd9c3abcda2dc54bbe91dc99d" id="r_a94f4c79dd9c3abcda2dc54bbe91dc99d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a94f4c79dd9c3abcda2dc54bbe91dc99d">us_to_ticks</a>(us)&#160;&#160;&#160;((uint64_t)(((double)(us)) * 32768.0 / 1e6 + 0.5))</td></tr>
<tr class="separator:a94f4c79dd9c3abcda2dc54bbe91dc99d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2d01a129ee41f0c1114b32b95b5647b" id="r_aa2d01a129ee41f0c1114b32b95b5647b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#aa2d01a129ee41f0c1114b32b95b5647b">ticks_to_us</a>(ticks)&#160;&#160;&#160;((uint64_t)(((double)(ticks)) * 1e6 / 32768.0))</td></tr>
<tr class="separator:aa2d01a129ee41f0c1114b32b95b5647b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5cdcd1a9117b68535f93c946d9be22" id="r_a1e5cdcd1a9117b68535f93c946d9be22"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a1e5cdcd1a9117b68535f93c946d9be22">LOCAL_FREQ_HZ</a>&#160;&#160;&#160;<a class="el" href="local__time_8c.html#a924b422d34a036440ff7e9c06da3f5ad">BLUESYNC_TICK_RATE_HZ</a></td></tr>
<tr class="separator:a1e5cdcd1a9117b68535f93c946d9be22"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3de0db4d23103b2a5c83f9b27b39cf85" id="r_a3de0db4d23103b2a5c83f9b27b39cf85"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a3de0db4d23103b2a5c83f9b27b39cf85">get_logical_time_ticks_</a> (int64_t uptime_ticks)</td></tr>
<tr class="separator:a3de0db4d23103b2a5c83f9b27b39cf85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb1fb550fe95bc532bdfdc4d168b12a5" id="r_adb1fb550fe95bc532bdfdc4d168b12a5"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#adb1fb550fe95bc532bdfdc4d168b12a5">convert_uptime_ticks_to_est_master_ticks</a> (int64_t uptime_ticks)</td></tr>
<tr class="separator:adb1fb550fe95bc532bdfdc4d168b12a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a861e026d9803cb168d2a764f73ed9801" id="r_a861e026d9803cb168d2a764f73ed9801"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a861e026d9803cb168d2a764f73ed9801">get_logical_time_us</a> (void)</td></tr>
<tr class="memdesc:a861e026d9803cb168d2a764f73ed9801"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the logical time us value. This is the corrected us value after synchronisation. This represents the unix epoch timestamp in us of the overall mesh network. Basically, it converts logical ticks into us.  <br /></td></tr>
<tr class="separator:a861e026d9803cb168d2a764f73ed9801"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7531b3c0b2ca2aa533b2ebd223cb7a0" id="r_ae7531b3c0b2ca2aa533b2ebd223cb7a0"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0">get_logical_time_ticks</a> ()</td></tr>
<tr class="memdesc:ae7531b3c0b2ca2aa533b2ebd223cb7a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the logical time ticks value. This is the corrected ticks value after synchronisation. This represents the unix epoch timestamp in ticks of the overall mesh network.  <br /></td></tr>
<tr class="separator:ae7531b3c0b2ca2aa533b2ebd223cb7a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f75d52c54a0eb4db7c92090a7f7eefd" id="r_a1f75d52c54a0eb4db7c92090a7f7eefd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a1f75d52c54a0eb4db7c92090a7f7eefd">apply_timer_sync</a> (double new_slope, double new_offset)</td></tr>
<tr class="memdesc:a1f75d52c54a0eb4db7c92090a7f7eefd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Apply the synchronisation parameters. Once the LR is made, The result of it gives a drift value (slope) and the difference between itself and the reference (offset). This method permits to set these parameters in order to have the proper correction when getting timestamps values.  <br /></td></tr>
<tr class="separator:a1f75d52c54a0eb4db7c92090a7f7eefd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129e568095d5d38c8bff447987d28132" id="r_a129e568095d5d38c8bff447987d28132"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a129e568095d5d38c8bff447987d28132">set_new_epoch_unix_ref</a> (uint64_t epoch_ref_us)</td></tr>
<tr class="memdesc:a129e568095d5d38c8bff447987d28132"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the new epoch unix ref value. Before the authority node starts a new network synchronisation, it should update the epoch reference.  <br /></td></tr>
<tr class="separator:a129e568095d5d38c8bff447987d28132"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7710aa86c6ea2d5bd9fd438e9f318fe" id="r_af7710aa86c6ea2d5bd9fd438e9f318fe"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#af7710aa86c6ea2d5bd9fd438e9f318fe">ticks_to_us_unix_time</a> (uint64_t logical_tick)</td></tr>
<tr class="separator:af7710aa86c6ea2d5bd9fd438e9f318fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120ece7e147c0a90b3b973645f49af53" id="r_a120ece7e147c0a90b3b973645f49af53"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a120ece7e147c0a90b3b973645f49af53">get_current_unix_time_us</a> (void)</td></tr>
<tr class="memdesc:a120ece7e147c0a90b3b973645f49af53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current time which is based on the UNIX reference.  <br /></td></tr>
<tr class="separator:a120ece7e147c0a90b3b973645f49af53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ff48ea951750b142b77d3290b1fefa0" id="r_a4ff48ea951750b142b77d3290b1fefa0"><td class="memItemLeft" align="right" valign="top">int64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a4ff48ea951750b142b77d3290b1fefa0">get_uptime_ticks_with_epoch</a> ()</td></tr>
<tr class="memdesc:a4ff48ea951750b142b77d3290b1fefa0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the uptime ticks with epoch value. This method concerns only the authority Role. This method will return the unix epoch timestamp based on the elapsed time (uptime - ref) and add the overall reference.  <br /></td></tr>
<tr class="separator:a4ff48ea951750b142b77d3290b1fefa0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afdf341f92b5683216748687f6e66eb2a" id="r_afdf341f92b5683216748687f6e66eb2a"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#afdf341f92b5683216748687f6e66eb2a">get_current_slope_ticks</a> ()</td></tr>
<tr class="memdesc:afdf341f92b5683216748687f6e66eb2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current slope ticks value.  <br /></td></tr>
<tr class="separator:afdf341f92b5683216748687f6e66eb2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5007fd4852274558e1ca59084e09a24e" id="r_a5007fd4852274558e1ca59084e09a24e"><td class="memItemLeft" align="right" valign="top">double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a5007fd4852274558e1ca59084e09a24e">get_current_offset_ticks</a> ()</td></tr>
<tr class="memdesc:a5007fd4852274558e1ca59084e09a24e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current offset ticks value.  <br /></td></tr>
<tr class="separator:a5007fd4852274558e1ca59084e09a24e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e5e7f4f074a146369ffa41864b51293" id="r_a1e5e7f4f074a146369ffa41864b51293"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="local__time_8c.html#a1e5e7f4f074a146369ffa41864b51293">uncompress_time</a> (uint32_t compress_32bit_timestamp)</td></tr>
<tr class="memdesc:a1e5e7f4f074a146369ffa41864b51293"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a uint32_t timestamps into a uint64_t values. This should be used in the sink node. In the Mesh network, pakcet payload is limited. Therefore only uint32_t timestamp can be used. When the sink received this kind of value, it can reconstruct the correct timestamps value.  <br /></td></tr>
<tr class="separator:a1e5e7f4f074a146369ffa41864b51293"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a924b422d34a036440ff7e9c06da3f5ad" name="a924b422d34a036440ff7e9c06da3f5ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a924b422d34a036440ff7e9c06da3f5ad">&#9670;&#160;</a></span>BLUESYNC_TICK_RATE_HZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLUESYNC_TICK_RATE_HZ&#160;&#160;&#160;32768</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1e5cdcd1a9117b68535f93c946d9be22" name="a1e5cdcd1a9117b68535f93c946d9be22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e5cdcd1a9117b68535f93c946d9be22">&#9670;&#160;</a></span>LOCAL_FREQ_HZ</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOCAL_FREQ_HZ&#160;&#160;&#160;<a class="el" href="local__time_8c.html#a924b422d34a036440ff7e9c06da3f5ad">BLUESYNC_TICK_RATE_HZ</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aa2d01a129ee41f0c1114b32b95b5647b" name="aa2d01a129ee41f0c1114b32b95b5647b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2d01a129ee41f0c1114b32b95b5647b">&#9670;&#160;</a></span>ticks_to_us</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ticks_to_us</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">ticks</td><td>)</td>
          <td>&#160;&#160;&#160;((uint64_t)(((double)(ticks)) * 1e6 / 32768.0))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a94f4c79dd9c3abcda2dc54bbe91dc99d" name="a94f4c79dd9c3abcda2dc54bbe91dc99d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94f4c79dd9c3abcda2dc54bbe91dc99d">&#9670;&#160;</a></span>us_to_ticks</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define us_to_ticks</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">us</td><td>)</td>
          <td>&#160;&#160;&#160;((uint64_t)(((double)(us)) * 32768.0 / 1e6 + 0.5))</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a1f75d52c54a0eb4db7c92090a7f7eefd" name="a1f75d52c54a0eb4db7c92090a7f7eefd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f75d52c54a0eb4db7c92090a7f7eefd">&#9670;&#160;</a></span>apply_timer_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apply_timer_sync </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>slope_timer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>offset_timer_us</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Apply the synchronisation parameters. Once the LR is made, The result of it gives a drift value (slope) and the difference between itself and the reference (offset). This method permits to set these parameters in order to have the proper correction when getting timestamps values. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slope_timer</td><td></td></tr>
    <tr><td class="paramname">offset_timer_us</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adb1fb550fe95bc532bdfdc4d168b12a5" name="adb1fb550fe95bc532bdfdc4d168b12a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb1fb550fe95bc532bdfdc4d168b12a5">&#9670;&#160;</a></span>convert_uptime_ticks_to_est_master_ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t convert_uptime_ticks_to_est_master_ticks </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>uptime_ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a5007fd4852274558e1ca59084e09a24e" name="a5007fd4852274558e1ca59084e09a24e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5007fd4852274558e1ca59084e09a24e">&#9670;&#160;</a></span>get_current_offset_ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double get_current_offset_ticks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current offset ticks value. </p>
<dl class="section return"><dt>Returns</dt><dd>double </dd></dl>

</div>
</div>
<a id="afdf341f92b5683216748687f6e66eb2a" name="afdf341f92b5683216748687f6e66eb2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afdf341f92b5683216748687f6e66eb2a">&#9670;&#160;</a></span>get_current_slope_ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double get_current_slope_ticks </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current slope ticks value. </p>
<dl class="section return"><dt>Returns</dt><dd>double </dd></dl>

</div>
</div>
<a id="a120ece7e147c0a90b3b973645f49af53" name="a120ece7e147c0a90b3b973645f49af53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a120ece7e147c0a90b3b973645f49af53">&#9670;&#160;</a></span>get_current_unix_time_us()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_current_unix_time_us </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current time which is based on the UNIX reference. </p>
<dl class="section return"><dt>Returns</dt><dd>return unix timestamp in microsecond in uint64_t </dd></dl>

</div>
</div>
<a id="ae7531b3c0b2ca2aa533b2ebd223cb7a0" name="ae7531b3c0b2ca2aa533b2ebd223cb7a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7531b3c0b2ca2aa533b2ebd223cb7a0">&#9670;&#160;</a></span>get_logical_time_ticks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_logical_time_ticks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the logical time ticks value. This is the corrected ticks value after synchronisation. This represents the unix epoch timestamp in ticks of the overall mesh network. </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t </dd></dl>

</div>
</div>
<a id="a3de0db4d23103b2a5c83f9b27b39cf85" name="a3de0db4d23103b2a5c83f9b27b39cf85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3de0db4d23103b2a5c83f9b27b39cf85">&#9670;&#160;</a></span>get_logical_time_ticks_()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_logical_time_ticks_ </td>
          <td>(</td>
          <td class="paramtype">int64_t&#160;</td>
          <td class="paramname"><em>uptime_ticks</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a861e026d9803cb168d2a764f73ed9801" name="a861e026d9803cb168d2a764f73ed9801"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a861e026d9803cb168d2a764f73ed9801">&#9670;&#160;</a></span>get_logical_time_us()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_logical_time_us </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the logical time us value. This is the corrected us value after synchronisation. This represents the unix epoch timestamp in us of the overall mesh network. Basically, it converts logical ticks into us. </p>
<dl class="section return"><dt>Returns</dt><dd>uint64_t </dd></dl>

</div>
</div>
<a id="a4ff48ea951750b142b77d3290b1fefa0" name="a4ff48ea951750b142b77d3290b1fefa0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ff48ea951750b142b77d3290b1fefa0">&#9670;&#160;</a></span>get_uptime_ticks_with_epoch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int64_t get_uptime_ticks_with_epoch </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the uptime ticks with epoch value. This method concerns only the authority Role. This method will return the unix epoch timestamp based on the elapsed time (uptime - ref) and add the overall reference. </p>
<dl class="section return"><dt>Returns</dt><dd>int64_t </dd></dl>

</div>
</div>
<a id="a129e568095d5d38c8bff447987d28132" name="a129e568095d5d38c8bff447987d28132"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a129e568095d5d38c8bff447987d28132">&#9670;&#160;</a></span>set_new_epoch_unix_ref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void set_new_epoch_unix_ref </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>epoch_ref_us</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the new epoch unix ref value. Before the authority node starts a new network synchronisation, it should update the epoch reference. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">epoch_ref_ms</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af7710aa86c6ea2d5bd9fd438e9f318fe" name="af7710aa86c6ea2d5bd9fd438e9f318fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7710aa86c6ea2d5bd9fd438e9f318fe">&#9670;&#160;</a></span>ticks_to_us_unix_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t ticks_to_us_unix_time </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>logical_tick</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1e5e7f4f074a146369ffa41864b51293" name="a1e5e7f4f074a146369ffa41864b51293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e5e7f4f074a146369ffa41864b51293">&#9670;&#160;</a></span>uncompress_time()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t uncompress_time </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>compress_32bit_timestamp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a uint32_t timestamps into a uint64_t values. This should be used in the sink node. In the Mesh network, pakcet payload is limited. Therefore only uint32_t timestamp can be used. When the sink received this kind of value, it can reconstruct the correct timestamps value. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">compress_32bit_timestamp</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>uint64_t </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
