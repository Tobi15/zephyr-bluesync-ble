<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BlueSync: include/bluesync/bluesync.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">BlueSync
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_f66431b314d9c7e0a76d19a1ca7b69d5.html">bluesync</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">bluesync.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;zephyr/kernel.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bluesync.h:</div>
<div class="dyncontent">
<div class="center"><img src="include_2bluesync_2bluesync_8h__incl.png" border="0" usemap="#ainclude_2bluesync_2bluesync_8h" alt=""/></div>
<map name="ainclude_2bluesync_2bluesync_8h" id="ainclude_2bluesync_2bluesync_8h">
<area shape="rect" title=" " alt="" coords="5,5,211,31"/>
<area shape="rect" title=" " alt="" coords="47,79,169,104"/>
<area shape="poly" title=" " alt="" coords="111,31,111,65,105,65,105,31"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="include_2bluesync_2bluesync_8h__dep__incl.png" border="0" usemap="#ainclude_2bluesync_2bluesync_8hdep" alt=""/></div>
<map name="ainclude_2bluesync_2bluesync_8hdep" id="ainclude_2bluesync_2bluesync_8hdep">
<area shape="rect" title=" " alt="" coords="129,5,335,31"/>
<area shape="rect" href="bluesync_8c.html" title=" " alt="" coords="5,86,120,111"/>
<area shape="poly" title=" " alt="" coords="196,39,88,88,86,84,194,34"/>
<area shape="rect" href="bs__state__machine_8c.html" title=" " alt="" coords="145,86,319,111"/>
<area shape="poly" title=" " alt="" coords="235,44,235,86,229,86,229,44"/>
<area shape="rect" href="synced__time__logger_8c.html" title=" " alt="" coords="344,79,491,119"/>
<area shape="poly" title=" " alt="" coords="272,33,374,76,372,81,270,38"/>
</map>
</div>
</div>
<p><a href="include_2bluesync_2bluesync_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ab90d76e2e617bc596e11fe05aa0b310b" id="r_ab90d76e2e617bc596e11fe05aa0b310b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310b">bluesync_role_t</a> { <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310ba91d7888de37627e71c6a743f1a8ba021">BLUESYNC_NONE_ROLE</a> = 0
, <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a> = 1
, <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310ba70989cd36253d204270feb42c8fdaa09">BLUESYNC_CLIENT_ROLE</a> = 2
 }</td></tr>
<tr class="separator:ab90d76e2e617bc596e11fe05aa0b310b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a722991b2960886eaf99895ba3395176f" id="r_a722991b2960886eaf99895ba3395176f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2bluesync_2bluesync_8h.html#a722991b2960886eaf99895ba3395176f">bluesync_init</a> ()</td></tr>
<tr class="memdesc:a722991b2960886eaf99895ba3395176f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the BlueSync time synchronization module.  <br /></td></tr>
<tr class="separator:a722991b2960886eaf99895ba3395176f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd22af69afb2d05130825f473adda13" id="r_a0fd22af69afb2d05130825f473adda13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2bluesync_2bluesync_8h.html#a0fd22af69afb2d05130825f473adda13">bluesync_set_role</a> (<a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310b">bluesync_role_t</a> role)</td></tr>
<tr class="memdesc:a0fd22af69afb2d05130825f473adda13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the operational role of the BlueSync node.  <br /></td></tr>
<tr class="separator:a0fd22af69afb2d05130825f473adda13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4690b69707910bec50799ce1911f4af2" id="r_a4690b69707910bec50799ce1911f4af2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2bluesync_2bluesync_8h.html#a4690b69707910bec50799ce1911f4af2">bluesync_start_net_sync</a> ()</td></tr>
<tr class="memdesc:a4690b69707910bec50799ce1911f4af2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiates a new BlueSync synchronization round as the time authority.  <br /></td></tr>
<tr class="separator:a4690b69707910bec50799ce1911f4af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523e1397bf700b1ab25182c0db4017c6" id="r_a523e1397bf700b1ab25182c0db4017c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2bluesync_2bluesync_8h.html#a523e1397bf700b1ab25182c0db4017c6">bluesync_start_net_sync_with_unix_epoch_us</a> (uint64_t unix_epoch_us)</td></tr>
<tr class="memdesc:a523e1397bf700b1ab25182c0db4017c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiates a new BlueSync synchronization round as the time authority.  <br /></td></tr>
<tr class="separator:a523e1397bf700b1ab25182c0db4017c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a120ece7e147c0a90b3b973645f49af53" id="r_a120ece7e147c0a90b3b973645f49af53"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2bluesync_2bluesync_8h.html#a120ece7e147c0a90b3b973645f49af53">get_current_unix_time_us</a> (void)</td></tr>
<tr class="memdesc:a120ece7e147c0a90b3b973645f49af53"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current time which is based on the UNIX reference.  <br /></td></tr>
<tr class="separator:a120ece7e147c0a90b3b973645f49af53"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ab90d76e2e617bc596e11fe05aa0b310b" name="ab90d76e2e617bc596e11fe05aa0b310b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab90d76e2e617bc596e11fe05aa0b310b">&#9670;&#160;</a></span>bluesync_role_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310b">bluesync_role_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab90d76e2e617bc596e11fe05aa0b310ba91d7888de37627e71c6a743f1a8ba021" name="ab90d76e2e617bc596e11fe05aa0b310ba91d7888de37627e71c6a743f1a8ba021"></a>BLUESYNC_NONE_ROLE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a" name="ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a"></a>BLUESYNC_AUTHORITY_ROLE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="ab90d76e2e617bc596e11fe05aa0b310ba70989cd36253d204270feb42c8fdaa09" name="ab90d76e2e617bc596e11fe05aa0b310ba70989cd36253d204270feb42c8fdaa09"></a>BLUESYNC_CLIENT_ROLE&#160;</td><td class="fielddoc"></td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a722991b2960886eaf99895ba3395176f" name="a722991b2960886eaf99895ba3395176f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a722991b2960886eaf99895ba3395176f">&#9670;&#160;</a></span>bluesync_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluesync_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the BlueSync time synchronization module. </p>
<p>This function sets up internal data structures, mutexes, and state variables required for BlueSync to operate. It should be called once at startup before any synchronization or logical time queries are made. </p>

</div>
</div>
<a id="a0fd22af69afb2d05130825f473adda13" name="a0fd22af69afb2d05130825f473adda13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fd22af69afb2d05130825f473adda13">&#9670;&#160;</a></span>bluesync_set_role()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluesync_set_role </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310b">bluesync_role_t</a>&#160;</td>
          <td class="paramname"><em>role</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the operational role of the BlueSync node. </p>
<p>This function configures the role of the device within the BlueSync synchronization system. Roles define whether the device acts as a time authority or as a time client within the network.</p>
<p>A <b>time authority</b> is the unique source of reference time and distributes it throughout the network. A <b>time client</b> receives synchronization from the authority or other clients and can forward the synchronized time further once it is synchronized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">role</td><td>The role to assign to the device. Must be one of the values defined in the <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310b">bluesync_role_t</a> enumeration:<ul>
<li>BLUESYNC_AUTHORITY_ROLE</li>
<li>BLUESYNC_CLIENT_ROLE </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a4690b69707910bec50799ce1911f4af2" name="a4690b69707910bec50799ce1911f4af2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4690b69707910bec50799ce1911f4af2">&#9670;&#160;</a></span>bluesync_start_net_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluesync_start_net_sync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiates a new BlueSync synchronization round as the time authority. </p>
<p>This function is called by the node acting as the time authority to start a network-wide synchronization round. It broadcasts timing information to all clients, allowing them to synchronize their local clocks based on the authority's reference time.</p>
<p>This function should only be called by devices assigned the <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a>. </p>

</div>
</div>
<a id="a523e1397bf700b1ab25182c0db4017c6" name="a523e1397bf700b1ab25182c0db4017c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a523e1397bf700b1ab25182c0db4017c6">&#9670;&#160;</a></span>bluesync_start_net_sync_with_unix_epoch_us()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluesync_start_net_sync_with_unix_epoch_us </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>unix_epoch_us</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiates a new BlueSync synchronization round as the time authority. </p>
<p>This function is called by the node acting as the time authority to start a network-wide synchronization round. It broadcasts timing information to all clients, allowing them to synchronize their local clocks based on the authority's reference time.</p>
<p>This function should only be called by devices assigned the <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unix_epoch_ms</td><td>: unix epoch reference in us </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a120ece7e147c0a90b3b973645f49af53" name="a120ece7e147c0a90b3b973645f49af53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a120ece7e147c0a90b3b973645f49af53">&#9670;&#160;</a></span>get_current_unix_time_us()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t get_current_unix_time_us </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current time which is based on the UNIX reference. </p>
<dl class="section return"><dt>Returns</dt><dd>return unix timestamp in microsecond in uint64_t </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
