<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bluesync in BLE Mesh: src/bluesync.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Bluesync in BLE Mesh<span id="projectnumber">&#160;1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">bluesync.c File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;zephyr/kernel.h&gt;</code><br />
<code>#include &lt;zephyr/bluetooth/bluetooth.h&gt;</code><br />
<code>#include &lt;zephyr/bluetooth/hci.h&gt;</code><br />
<code>#include &lt;zephyr/bluetooth/mesh.h&gt;</code><br />
<code>#include &lt;zephyr/sys/byteorder.h&gt;</code><br />
<code>#include &lt;zephyr/sys/util.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &lt;<a class="el" href="include_2bluesync_2bluesync_8h_source.html">bluesync/bluesync.h</a>&gt;</code><br />
<code>#include &quot;<a class="el" href="src_2bluesync_8h_source.html">bluesync.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="bs__state__machine_8h_source.html">bs_state_machine.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="bluesync__bitfields_8h_source.html">bluesync_bitfields.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="local__time_8h_source.html">local_time.h</a>&quot;</code><br />
<code>#include &lt;zephyr/logging/log.h&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bluesync.c:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c__incl.png" border="0" usemap="#asrc_2bluesync_8c" alt=""/></div>
<map name="asrc_2bluesync_8c" id="asrc_2bluesync_8c">
<area shape="rect" title=" " alt="" coords="722,5,827,31"/>
<area shape="rect" title=" " alt="" coords="42,226,149,252"/>
<area shape="poly" title=" " alt="" coords="722,24,559,29,349,41,159,58,92,69,54,81,29,101,13,124,8,149,17,177,34,199,56,216,53,220,30,203,12,180,3,149,8,122,25,98,52,77,91,64,158,52,349,35,559,24,721,18"/>
<area shape="rect" title=" " alt="" coords="990,226,1172,252"/>
<area shape="poly" title=" " alt="" coords="827,16,919,18,1028,26,1080,34,1127,45,1164,59,1190,77,1200,96,1201,116,1195,136,1183,155,1150,191,1113,220,1110,216,1146,187,1179,152,1190,134,1196,115,1195,98,1186,81,1162,63,1125,50,1079,39,1027,32,919,24,827,22"/>
<area shape="rect" title=" " alt="" coords="77,79,224,105"/>
<area shape="poly" title=" " alt="" coords="722,27,239,81,239,76,722,22"/>
<area shape="rect" title=" " alt="" coords="247,79,408,105"/>
<area shape="poly" title=" " alt="" coords="722,30,419,79,418,73,721,25"/>
<area shape="rect" title=" " alt="" coords="433,79,582,105"/>
<area shape="poly" title=" " alt="" coords="730,34,568,77,567,72,728,29"/>
<area shape="rect" title=" " alt="" coords="607,79,720,105"/>
<area shape="poly" title=" " alt="" coords="757,34,697,73,694,68,754,29"/>
<area shape="rect" title=" " alt="" coords="744,79,805,105"/>
<area shape="poly" title=" " alt="" coords="777,31,777,63,772,63,772,31"/>
<area shape="rect" href="include_2bluesync_2bluesync_8h.html" title=" " alt="" coords="27,153,164,178"/>
<area shape="poly" title=" " alt="" coords="722,23,560,26,352,35,251,42,165,52,100,65,79,73,67,81,61,94,62,108,78,139,73,142,57,110,56,93,63,77,77,68,99,60,164,47,251,37,351,29,560,20,722,17"/>
<area shape="rect" href="src_2bluesync_8h.html" title=" " alt="" coords="908,153,990,178"/>
<area shape="poly" title=" " alt="" coords="788,30,869,103,921,142,918,146,866,107,785,33"/>
<area shape="rect" href="bs__state__machine_8h.html" title=" " alt="" coords="880,79,1018,105"/>
<area shape="poly" title=" " alt="" coords="805,29,906,70,904,75,803,34"/>
<area shape="rect" href="bluesync__bitfields_8h.html" title=" " alt="" coords="1042,79,1176,105"/>
<area shape="poly" title=" " alt="" coords="828,28,1038,73,1037,78,826,33"/>
<area shape="rect" href="local__time_8h.html" title=" " alt="" coords="1251,79,1341,105"/>
<area shape="poly" title=" " alt="" coords="827,23,1007,45,1232,76,1235,77,1235,82,1231,82,1006,50,827,28"/>
<area shape="rect" title=" " alt="" coords="1365,79,1499,105"/>
<area shape="poly" title=" " alt="" coords="827,22,1050,43,1349,76,1349,81,1050,48,827,27"/>
<area shape="poly" title=" " alt="" coords="98,179,98,211,93,211,93,179"/>
<area shape="poly" title=" " alt="" coords="908,173,165,235,164,229,907,168"/>
<area shape="poly" title=" " alt="" coords="973,177,1047,216,1044,221,970,181"/>
<area shape="poly" title=" " alt="" coords="952,105,952,137,946,137,946,105"/>
<area shape="poly" title=" " alt="" coords="1083,108,991,148,989,144,1081,103"/>
<area shape="rect" title=" " alt="" coords="1264,153,1327,178"/>
<area shape="poly" title=" " alt="" coords="1298,105,1298,137,1293,137,1293,105"/>
</map>
</div>
</div>
<p><a href="bluesync_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a20bf64c160d13cfc7f8369160b1d9cb9" id="r_a20bf64c160d13cfc7f8369160b1d9cb9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a20bf64c160d13cfc7f8369160b1d9cb9">BT_UNIT_MS_TO_TICKS</a>(_ms)</td></tr>
<tr class="separator:a20bf64c160d13cfc7f8369160b1d9cb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb5db2b1e5041d3e2a4230f135adee9a" id="r_abb5db2b1e5041d3e2a4230f135adee9a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb5db2b1e5041d3e2a4230f135adee9a">BLUESYNC_BT_MIN_ADV_INT</a>&#160;&#160;&#160;<a class="el" href="#a20bf64c160d13cfc7f8369160b1d9cb9">BT_UNIT_MS_TO_TICKS</a>(30)</td></tr>
<tr class="separator:abb5db2b1e5041d3e2a4230f135adee9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a797f51b447dac77a029c78b573aab6c0" id="r_a797f51b447dac77a029c78b573aab6c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a797f51b447dac77a029c78b573aab6c0">BLUESYNC_BT_MAX_ADV_INT</a>&#160;&#160;&#160;<a class="el" href="#a20bf64c160d13cfc7f8369160b1d9cb9">BT_UNIT_MS_TO_TICKS</a>(60)</td></tr>
<tr class="separator:a797f51b447dac77a029c78b573aab6c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c05005983ef020bd49ba6b86ffa981" id="r_ad9c05005983ef020bd49ba6b86ffa981"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad9c05005983ef020bd49ba6b86ffa981">BLUESYNC_BT_SCAN_INT</a>&#160;&#160;&#160;<a class="el" href="#a20bf64c160d13cfc7f8369160b1d9cb9">BT_UNIT_MS_TO_TICKS</a>(60)</td></tr>
<tr class="separator:ad9c05005983ef020bd49ba6b86ffa981"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebf0e9557f0e953d60cac646e4b1db9b" id="r_aebf0e9557f0e953d60cac646e4b1db9b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aebf0e9557f0e953d60cac646e4b1db9b">BLUESYNC_BT_SCAN_WIND_SIZE</a>&#160;&#160;&#160;<a class="el" href="#a20bf64c160d13cfc7f8369160b1d9cb9">BT_UNIT_MS_TO_TICKS</a>(60)</td></tr>
<tr class="separator:aebf0e9557f0e953d60cac646e4b1db9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2cdc2466a71e0c7126ac38b467b85d18" id="r_a2cdc2466a71e0c7126ac38b467b85d18"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2cdc2466a71e0c7126ac38b467b85d18">LOG_MODULE_REGISTER</a> (bluesync, CONFIG_BLUESYNC_LOG_LEVEL)</td></tr>
<tr class="separator:a2cdc2466a71e0c7126ac38b467b85d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75a7f8463e02e9b45729599dae15f320" id="r_a75a7f8463e02e9b45729599dae15f320"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a75a7f8463e02e9b45729599dae15f320">K_THREAD_STACK_DEFINE</a> (bluesync_thread_stack, CONFIG_BLUESYNC_THREAD_STACK_SIZE)</td></tr>
<tr class="separator:a75a7f8463e02e9b45729599dae15f320"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68e61b6f9356823f75643be78057964c" id="r_a68e61b6f9356823f75643be78057964c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a68e61b6f9356823f75643be78057964c">K_MSGQ_DEFINE</a> (bluesync_rx_msgq, sizeof(struct <a class="el" href="structbluesync__msg__client.html">bluesync_msg_client</a>), 17, 1)</td></tr>
<tr class="separator:a68e61b6f9356823f75643be78057964c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c483581b9845b50f3901e6f118c241" id="r_ab5c483581b9845b50f3901e6f118c241"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab5c483581b9845b50f3901e6f118c241">K_SEM_DEFINE</a> (bluesync_end_sync_sem, 0, 1)</td></tr>
<tr class="separator:ab5c483581b9845b50f3901e6f118c241"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d8fb6636feddae8965860b110598f8b" id="r_a1d8fb6636feddae8965860b110598f8b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1d8fb6636feddae8965860b110598f8b">K_SEM_DEFINE</a> (bluesync_start_new_sync_sem, 0, 1)</td></tr>
<tr class="separator:a1d8fb6636feddae8965860b110598f8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaba8afc3ef3b28bf23cdc71d40e0eb21" id="r_aaba8afc3ef3b28bf23cdc71d40e0eb21"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aaba8afc3ef3b28bf23cdc71d40e0eb21">K_SEM_DEFINE</a> (bluesync_role_assign_sem, 0, 1)</td></tr>
<tr class="separator:aaba8afc3ef3b28bf23cdc71d40e0eb21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab62b52cc2c05b0b6f1d1fd6816b4f43c" id="r_ab62b52cc2c05b0b6f1d1fd6816b4f43c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab62b52cc2c05b0b6f1d1fd6816b4f43c">reset_bluesync_timestamps</a> (<a class="el" href="structbluesync__timestamps__t.html">bluesync_timestamps_t</a> *elem)</td></tr>
<tr class="separator:ab62b52cc2c05b0b6f1d1fd6816b4f43c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73d14c438328054c5c14b084b3befe54" id="r_a73d14c438328054c5c14b084b3befe54"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a73d14c438328054c5c14b084b3befe54">add_bluesync_timestamps</a> (<a class="el" href="structbluesync__timestamps__t.html">bluesync_timestamps_t</a> *elem, uint8_t pos, int64_t ticks,)</td></tr>
<tr class="separator:a73d14c438328054c5c14b084b3befe54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac645e5a0d11afc2847855b7697f55c63" id="r_ac645e5a0d11afc2847855b7697f55c63"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac645e5a0d11afc2847855b7697f55c63">bluesync_reset_param</a> ()</td></tr>
<tr class="separator:ac645e5a0d11afc2847855b7697f55c63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d68b33b4d68345d2730953869464796" id="r_a7d68b33b4d68345d2730953869464796"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6">bluesync_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d68b33b4d68345d2730953869464796">calculate_lr_from_history</a> (double *slope, double *offset, size_t min_nb_timestamp)</td></tr>
<tr class="separator:a7d68b33b4d68345d2730953869464796"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1f14e07918b159fe1dc8277a7d2c14e" id="r_ac1f14e07918b159fe1dc8277a7d2c14e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac1f14e07918b159fe1dc8277a7d2c14e">bluesync_decode_msg</a> (struct <a class="el" href="structbluesync__msg__client.html">bluesync_msg_client</a> *msg, struct net_buf_simple *buf)</td></tr>
<tr class="separator:ac1f14e07918b159fe1dc8277a7d2c14e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2889f789563da54af324b537c472ce07" id="r_a2889f789563da54af324b537c472ce07"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2889f789563da54af324b537c472ce07">bluesync_store_current_burst</a> ()</td></tr>
<tr class="separator:a2889f789563da54af324b537c472ce07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeca8c130ac37b793356125ef9ceebc22" id="r_aeca8c130ac37b793356125ef9ceebc22"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6">bluesync_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aeca8c130ac37b793356125ef9ceebc22">end_sync_timeslot_process</a> ()</td></tr>
<tr class="separator:aeca8c130ac37b793356125ef9ceebc22"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bede3fdaf14c6f6462fe25bca0df18b" id="r_a1bede3fdaf14c6f6462fe25bca0df18b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1bede3fdaf14c6f6462fe25bca0df18b">drift_estimation_handler</a> (struct k_timer *timer_id)</td></tr>
<tr class="separator:a1bede3fdaf14c6f6462fe25bca0df18b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa16c1884bb8d3e76f7e0b221988d8906" id="r_aa16c1884bb8d3e76f7e0b221988d8906"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa16c1884bb8d3e76f7e0b221988d8906">bluesync_scan_packet_process</a> ()</td></tr>
<tr class="separator:aa16c1884bb8d3e76f7e0b221988d8906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fcdc17b3a214717b39e519ce5ca4dd8" id="r_a1fcdc17b3a214717b39e519ce5ca4dd8"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6">bluesync_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1fcdc17b3a214717b39e519ce5ca4dd8">bluesync_encode_msg</a> (struct bt_data *bt_pkt, uint8_t current_round_id, uint8_t current_timeslot_idx, int64_t time_ticks)</td></tr>
<tr class="separator:a1fcdc17b3a214717b39e519ce5ca4dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1701ea77f09d4dc607b1b5e92b474cf8" id="r_a1701ea77f09d4dc607b1b5e92b474cf8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1701ea77f09d4dc607b1b5e92b474cf8">bluesync_send_adv</a> ()</td></tr>
<tr class="separator:a1701ea77f09d4dc607b1b5e92b474cf8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5786970c5cd6649e57c988641e21c92b" id="r_a5786970c5cd6649e57c988641e21c92b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5786970c5cd6649e57c988641e21c92b">scan_cb</a> (const bt_addr_le_t *addr, int8_t rssi, struct net_buf_simple *buf)</td></tr>
<tr class="separator:a5786970c5cd6649e57c988641e21c92b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:accff9034edc5962a24e70e68901a3ca8" id="r_accff9034edc5962a24e70e68901a3ca8"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#accff9034edc5962a24e70e68901a3ca8">bt_scan_cb</a> (const bt_addr_le_t *addr, int8_t rssi, uint8_t adv_type, struct net_buf_simple *buf)</td></tr>
<tr class="separator:accff9034edc5962a24e70e68901a3ca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3281e1132ea7be337932f349e4dd0103" id="r_a3281e1132ea7be337932f349e4dd0103"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a3281e1132ea7be337932f349e4dd0103">bluesync_scan_start</a> ()</td></tr>
<tr class="separator:a3281e1132ea7be337932f349e4dd0103"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eed4afd2b78259f02fa0fca3db0f4fa" id="r_a9eed4afd2b78259f02fa0fca3db0f4fa"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9eed4afd2b78259f02fa0fca3db0f4fa">bluesync_scan_stop</a> ()</td></tr>
<tr class="separator:a9eed4afd2b78259f02fa0fca3db0f4fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f8da33a076ee25b6c18d4085dd2d35e" id="r_a9f8da33a076ee25b6c18d4085dd2d35e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a9f8da33a076ee25b6c18d4085dd2d35e">bluesync_adv_process</a> ()</td></tr>
<tr class="separator:a9f8da33a076ee25b6c18d4085dd2d35e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53cf47753502eeef3bd5a7e9753dc877" id="r_a53cf47753502eeef3bd5a7e9753dc877"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a53cf47753502eeef3bd5a7e9753dc877">adv_sent_cb</a> (struct bt_le_ext_adv *adv, struct bt_le_ext_adv_sent_info *info)</td></tr>
<tr class="separator:a53cf47753502eeef3bd5a7e9753dc877"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae50107a7d06bfb4985ecbe2800d21bfe" id="r_ae50107a7d06bfb4985ecbe2800d21bfe"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae50107a7d06bfb4985ecbe2800d21bfe">bluesync_init_adv</a> ()</td></tr>
<tr class="separator:ae50107a7d06bfb4985ecbe2800d21bfe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0899d4461371eab18cec52ab2673600a" id="r_a0899d4461371eab18cec52ab2673600a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0899d4461371eab18cec52ab2673600a">bs_scan_wait_for_sync_handler</a> (void)</td></tr>
<tr class="separator:a0899d4461371eab18cec52ab2673600a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad71b25f3b8904dfbb3ca4b51c556b1c" id="r_aad71b25f3b8904dfbb3ca4b51c556b1c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aad71b25f3b8904dfbb3ca4b51c556b1c">bs_sync_handler</a> ()</td></tr>
<tr class="separator:aad71b25f3b8904dfbb3ca4b51c556b1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e07e4c09110ee0eb81c51b0551a3101" id="r_a5e07e4c09110ee0eb81c51b0551a3101"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a5e07e4c09110ee0eb81c51b0551a3101">bs_update_handler</a> (void)</td></tr>
<tr class="separator:a5e07e4c09110ee0eb81c51b0551a3101"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa93dc27074f8b822db6118b39d80207c" id="r_aa93dc27074f8b822db6118b39d80207c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa93dc27074f8b822db6118b39d80207c">bs_adv_handler</a> (void)</td></tr>
<tr class="separator:aa93dc27074f8b822db6118b39d80207c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36f79ba7fa7845415e9a15c49cf671f0" id="r_a36f79ba7fa7845415e9a15c49cf671f0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a36f79ba7fa7845415e9a15c49cf671f0">bs_stop_handler</a> (void)</td></tr>
<tr class="separator:a36f79ba7fa7845415e9a15c49cf671f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21bfb7737b28b272a313aac9db321aaf" id="r_a21bfb7737b28b272a313aac9db321aaf"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21bfb7737b28b272a313aac9db321aaf">bluesync_thread_fnt</a> (void *arg1, void *arg2, void *arg3)</td></tr>
<tr class="separator:a21bfb7737b28b272a313aac9db321aaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a722991b2960886eaf99895ba3395176f" id="r_a722991b2960886eaf99895ba3395176f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a722991b2960886eaf99895ba3395176f">bluesync_init</a> ()</td></tr>
<tr class="memdesc:a722991b2960886eaf99895ba3395176f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the BlueSync time synchronization module.  <br /></td></tr>
<tr class="separator:a722991b2960886eaf99895ba3395176f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0fd22af69afb2d05130825f473adda13" id="r_a0fd22af69afb2d05130825f473adda13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a0fd22af69afb2d05130825f473adda13">bluesync_set_role</a> (<a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310b">bluesync_role_t</a> role)</td></tr>
<tr class="memdesc:a0fd22af69afb2d05130825f473adda13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the operational role of the BlueSync node.  <br /></td></tr>
<tr class="separator:a0fd22af69afb2d05130825f473adda13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4690b69707910bec50799ce1911f4af2" id="r_a4690b69707910bec50799ce1911f4af2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4690b69707910bec50799ce1911f4af2">bluesync_start_net_sync</a> ()</td></tr>
<tr class="memdesc:a4690b69707910bec50799ce1911f4af2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiates a new BlueSync synchronization round as the time authority.  <br /></td></tr>
<tr class="separator:a4690b69707910bec50799ce1911f4af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a523e1397bf700b1ab25182c0db4017c6" id="r_a523e1397bf700b1ab25182c0db4017c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a523e1397bf700b1ab25182c0db4017c6">bluesync_start_net_sync_with_unix_epoch_us</a> (uint64_t unix_epoch_us)</td></tr>
<tr class="memdesc:a523e1397bf700b1ab25182c0db4017c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiates a new BlueSync synchronization round as the time authority.  <br /></td></tr>
<tr class="separator:a523e1397bf700b1ab25182c0db4017c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:aef8cb9436cbb84d87beadf7b0d862d4b" id="r_aef8cb9436cbb84d87beadf7b0d862d4b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="structbluesync__param.html">bluesync_param</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a></td></tr>
<tr class="separator:aef8cb9436cbb84d87beadf7b0d862d4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d915d6457a8c114b381f3b2856d154d" id="r_a7d915d6457a8c114b381f3b2856d154d"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a> [sizeof(uint16_t)+sizeof(struct <a class="el" href="structbluesync__msg.html">bluesync_msg</a>)] = {0}</td></tr>
<tr class="separator:a7d915d6457a8c114b381f3b2856d154d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed90acb647f5b18c244652d9bc8fc883" id="r_aed90acb647f5b18c244652d9bc8fc883"><td class="memItemLeft" align="right" valign="top">static struct bt_le_ext_adv_cb&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aed90acb647f5b18c244652d9bc8fc883">bt_callbacks</a></td></tr>
<tr class="separator:aed90acb647f5b18c244652d9bc8fc883"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a765d9ede025f5941a2bc0bf8e385f5f5" id="r_a765d9ede025f5941a2bc0bf8e385f5f5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structbs__sm__handlers.html">bs_sm_handlers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a765d9ede025f5941a2bc0bf8e385f5f5">handlers</a></td></tr>
<tr class="separator:a765d9ede025f5941a2bc0bf8e385f5f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a797f51b447dac77a029c78b573aab6c0" name="a797f51b447dac77a029c78b573aab6c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a797f51b447dac77a029c78b573aab6c0">&#9670;&#160;</a></span>BLUESYNC_BT_MAX_ADV_INT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLUESYNC_BT_MAX_ADV_INT&#160;&#160;&#160;<a class="el" href="#a20bf64c160d13cfc7f8369160b1d9cb9">BT_UNIT_MS_TO_TICKS</a>(60)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00044">44</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>

</div>
</div>
<a id="abb5db2b1e5041d3e2a4230f135adee9a" name="abb5db2b1e5041d3e2a4230f135adee9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb5db2b1e5041d3e2a4230f135adee9a">&#9670;&#160;</a></span>BLUESYNC_BT_MIN_ADV_INT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLUESYNC_BT_MIN_ADV_INT&#160;&#160;&#160;<a class="el" href="#a20bf64c160d13cfc7f8369160b1d9cb9">BT_UNIT_MS_TO_TICKS</a>(30)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00043">43</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>

</div>
</div>
<a id="ad9c05005983ef020bd49ba6b86ffa981" name="ad9c05005983ef020bd49ba6b86ffa981"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c05005983ef020bd49ba6b86ffa981">&#9670;&#160;</a></span>BLUESYNC_BT_SCAN_INT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLUESYNC_BT_SCAN_INT&#160;&#160;&#160;<a class="el" href="#a20bf64c160d13cfc7f8369160b1d9cb9">BT_UNIT_MS_TO_TICKS</a>(60)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00045">45</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>

</div>
</div>
<a id="aebf0e9557f0e953d60cac646e4b1db9b" name="aebf0e9557f0e953d60cac646e4b1db9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebf0e9557f0e953d60cac646e4b1db9b">&#9670;&#160;</a></span>BLUESYNC_BT_SCAN_WIND_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BLUESYNC_BT_SCAN_WIND_SIZE&#160;&#160;&#160;<a class="el" href="#a20bf64c160d13cfc7f8369160b1d9cb9">BT_UNIT_MS_TO_TICKS</a>(60)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00046">46</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>

</div>
</div>
<a id="a20bf64c160d13cfc7f8369160b1d9cb9" name="a20bf64c160d13cfc7f8369160b1d9cb9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20bf64c160d13cfc7f8369160b1d9cb9">&#9670;&#160;</a></span>BT_UNIT_MS_TO_TICKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BT_UNIT_MS_TO_TICKS</td>
          <td>(</td>
          <td class="paramtype"></td>          <td class="paramname"><span class="paramname"><em>_ms</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">((_ms) * 8 / 5)</div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00042">42</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a73d14c438328054c5c14b084b3befe54" name="a73d14c438328054c5c14b084b3befe54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73d14c438328054c5c14b084b3befe54">&#9670;&#160;</a></span>add_bluesync_timestamps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void add_bluesync_timestamps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbluesync__timestamps__t.html">bluesync_timestamps_t</a> *</td>          <td class="paramname"><span class="paramname"><em>elem</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>pos</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>ticks</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00114">114</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  121</span>{</div>
<div class="line"><span class="lineno">  122</span>    elem-&gt;<a class="code hl_variable" href="structbluesync__timestamps__t.html#a70965a4da9ecd868bff788b9624fccd6">timer_ticks</a>[pos] = ticks;</div>
<div class="line"><span class="lineno">  123</span><span class="preprocessor">#if defined(CONFIG_BLUESYNC_TEST_BABBLESIM_SUPPORT)</span></div>
<div class="line"><span class="lineno">  124</span>    elem-&gt;remote_est_ticks[pos] = est_ticks;</div>
<div class="line"><span class="lineno">  125</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  126</span>    <a class="code hl_function" href="bluesync__bitfields_8c.html#a835ad1bade618a08ef4ca2a30d8fc470">set_bit</a>(&amp;elem-&gt;<a class="code hl_variable" href="structbluesync__timestamps__t.html#aee8cbd4e2c654ca51e72be2c72a09eec">bitfield</a>[0], (<span class="keywordtype">size_t</span>)pos);</div>
<div class="line"><span class="lineno">  127</span>}</div>
<div class="ttc" id="abluesync__bitfields_8c_html_a835ad1bade618a08ef4ca2a30d8fc470"><div class="ttname"><a href="bluesync__bitfields_8c.html#a835ad1bade618a08ef4ca2a30d8fc470">set_bit</a></div><div class="ttdeci">void set_bit(uint8_t *bitfield, size_t bit_index)</div><div class="ttdoc">Set a specific bit in the bitfield.</div><div class="ttdef"><b>Definition</b> <a href="bluesync__bitfields_8c_source.html#l00037">bluesync_bitfields.c:37</a></div></div>
<div class="ttc" id="astructbluesync__timestamps__t_html_a70965a4da9ecd868bff788b9624fccd6"><div class="ttname"><a href="structbluesync__timestamps__t.html#a70965a4da9ecd868bff788b9624fccd6">bluesync_timestamps_t::timer_ticks</a></div><div class="ttdeci">uint64_t timer_ticks[SLOT_NUMBER]</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00052">bluesync.h:52</a></div></div>
<div class="ttc" id="astructbluesync__timestamps__t_html_aee8cbd4e2c654ca51e72be2c72a09eec"><div class="ttname"><a href="structbluesync__timestamps__t.html#aee8cbd4e2c654ca51e72be2c72a09eec">bluesync_timestamps_t::bitfield</a></div><div class="ttdeci">uint8_t bitfield[NB_BYTES_BITFIELD]</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00051">bluesync.h:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structbluesync__timestamps__t.html#aee8cbd4e2c654ca51e72be2c72a09eec">bluesync_timestamps_t::bitfield</a>, <a class="el" href="bluesync__bitfields_8c.html#a835ad1bade618a08ef4ca2a30d8fc470">set_bit()</a>, and <a class="el" href="structbluesync__timestamps__t.html#a70965a4da9ecd868bff788b9624fccd6">bluesync_timestamps_t::timer_ticks</a>.</p>

<p class="reference">Referenced by <a class="el" href="#aa16c1884bb8d3e76f7e0b221988d8906">bluesync_scan_packet_process()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a73d14c438328054c5c14b084b3befe54_cgraph.png" border="0" usemap="#abluesync_8c_a73d14c438328054c5c14b084b3befe54_cgraph" alt=""/></div>
<map name="abluesync_8c_a73d14c438328054c5c14b084b3befe54_cgraph" id="abluesync_8c_a73d14c438328054c5c14b084b3befe54_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,181,31"/>
<area shape="rect" href="bluesync__bitfields_8c.html#a835ad1bade618a08ef4ca2a30d8fc470" title="Set a specific bit in the bitfield." alt="" coords="229,5,289,31"/>
<area shape="poly" title=" " alt="" coords="181,16,213,16,213,21,181,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a73d14c438328054c5c14b084b3befe54_icgraph.png" border="0" usemap="#abluesync_8c_a73d14c438328054c5c14b084b3befe54_icgraph" alt=""/></div>
<map name="abluesync_8c_a73d14c438328054c5c14b084b3befe54_icgraph" id="abluesync_8c_a73d14c438328054c5c14b084b3befe54_icgraph">
<area shape="rect" title=" " alt="" coords="536,13,712,38"/>
<area shape="rect" href="bluesync_8c.html#aa16c1884bb8d3e76f7e0b221988d8906" title=" " alt="" coords="335,5,488,46"/>
<area shape="poly" title=" " alt="" coords="521,28,489,28,489,23,521,23"/>
<area shape="rect" href="bluesync_8c.html#a21bfb7737b28b272a313aac9db321aaf" title=" " alt="" coords="150,13,287,38"/>
<area shape="poly" title=" " alt="" coords="319,28,287,28,287,23,319,23"/>
<area shape="rect" href="bluesync_8c.html#a722991b2960886eaf99895ba3395176f" title="Initializes the BlueSync time synchronization module." alt="" coords="5,13,102,38"/>
<area shape="poly" title=" " alt="" coords="134,28,102,28,102,23,134,23"/>
</map>
</div>

</div>
</div>
<a id="a53cf47753502eeef3bd5a7e9753dc877" name="a53cf47753502eeef3bd5a7e9753dc877"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53cf47753502eeef3bd5a7e9753dc877">&#9670;&#160;</a></span>adv_sent_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void adv_sent_cb </td>
          <td>(</td>
          <td class="paramtype">struct bt_le_ext_adv *</td>          <td class="paramname"><span class="paramname"><em>adv</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct bt_le_ext_adv_sent_info *</td>          <td class="paramname"><span class="paramname"><em>info</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00506">506</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  507</span>{</div>
<div class="line"><span class="lineno">  508</span>    k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  509</span>    {</div>
<div class="line"><span class="lineno">  510</span>        <span class="keywordflow">if</span> (info-&gt;num_sent &gt;= 1) {</div>
<div class="line"><span class="lineno">  511</span>            <span class="keywordflow">if</span>( <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.timeslot_index &lt; <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>){</div>
<div class="line"><span class="lineno">  512</span>                <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local.timer_ticks[<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.timeslot_index] = <a class="code hl_function" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0">get_logical_time_ticks</a>();</div>
<div class="line"><span class="lineno">  513</span>            }</div>
<div class="line"><span class="lineno">  514</span>            <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.timeslot_index++;</div>
<div class="line"><span class="lineno">  515</span>        }</div>
<div class="line"><span class="lineno">  516</span>    }</div>
<div class="line"><span class="lineno">  517</span>    k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex);</div>
<div class="line"><span class="lineno">  518</span><span class="preprocessor">#if defined(CONFIG_BLUESYNC_USED_IN_MESH)</span></div>
<div class="line"><span class="lineno">  519</span>    bt_mesh_scan_enable();</div>
<div class="line"><span class="lineno">  520</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  521</span>    </div>
<div class="line"><span class="lineno">  522</span>}</div>
<div class="ttc" id="abluesync_8c_html_aef8cb9436cbb84d87beadf7b0d862d4b"><div class="ttname"><a href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a></div><div class="ttdeci">static struct bluesync_param param</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00050">bluesync.c:50</a></div></div>
<div class="ttc" id="alocal__time_8c_html_ae7531b3c0b2ca2aa533b2ebd223cb7a0"><div class="ttname"><a href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0">get_logical_time_ticks</a></div><div class="ttdeci">uint64_t get_logical_time_ticks()</div><div class="ttdoc">Get the logical time ticks value. This is the corrected ticks value after synchronisation....</div><div class="ttdef"><b>Definition</b> <a href="local__time_8c_source.html#l00097">local_time.c:97</a></div></div>
<div class="ttc" id="asrc_2bluesync_8h_html_a9dc67a78122f8ec8ac0888bb33a7b066"><div class="ttname"><a href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a></div><div class="ttdeci">#define SLOT_NUMBER</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00030">bluesync.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0">get_logical_time_ticks()</a>, <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>, and <a class="el" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a53cf47753502eeef3bd5a7e9753dc877_cgraph.png" border="0" usemap="#abluesync_8c_a53cf47753502eeef3bd5a7e9753dc877_cgraph" alt=""/></div>
<map name="abluesync_8c_a53cf47753502eeef3bd5a7e9753dc877_cgraph" id="abluesync_8c_a53cf47753502eeef3bd5a7e9753dc877_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,101,31"/>
<area shape="rect" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0" title="Get the logical time ticks value. This is the corrected ticks value after synchronisation...." alt="" coords="149,5,299,31"/>
<area shape="poly" title=" " alt="" coords="101,16,133,16,133,21,101,21"/>
<area shape="rect" href="local__time_8c.html#a3de0db4d23103b2a5c83f9b27b39cf85" title=" " alt="" coords="347,5,504,31"/>
<area shape="poly" title=" " alt="" coords="299,16,331,16,331,21,299,21"/>
</map>
</div>

</div>
</div>
<a id="a9f8da33a076ee25b6c18d4085dd2d35e" name="a9f8da33a076ee25b6c18d4085dd2d35e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9f8da33a076ee25b6c18d4085dd2d35e">&#9670;&#160;</a></span>bluesync_adv_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bluesync_adv_process </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00499">499</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  499</span>                                   {</div>
<div class="line"><span class="lineno">  500</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt;= <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>; i++){</div>
<div class="line"><span class="lineno">  501</span>        <a class="code hl_function" href="#a1701ea77f09d4dc607b1b5e92b474cf8">bluesync_send_adv</a>();</div>
<div class="line"><span class="lineno">  502</span>        k_sleep(K_MSEC(CONFIG_BLUESYNC_ADV_INT_MS));</div>
<div class="line"><span class="lineno">  503</span>    }</div>
<div class="line"><span class="lineno">  504</span>}</div>
<div class="ttc" id="abluesync_8c_html_a1701ea77f09d4dc607b1b5e92b474cf8"><div class="ttname"><a href="#a1701ea77f09d4dc607b1b5e92b474cf8">bluesync_send_adv</a></div><div class="ttdeci">static void bluesync_send_adv()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00382">bluesync.c:382</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#a1701ea77f09d4dc607b1b5e92b474cf8">bluesync_send_adv()</a>, and <a class="el" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>.</p>

<p class="reference">Referenced by <a class="el" href="#aa93dc27074f8b822db6118b39d80207c">bs_adv_handler()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a9f8da33a076ee25b6c18d4085dd2d35e_cgraph.png" border="0" usemap="#abluesync_8c_a9f8da33a076ee25b6c18d4085dd2d35e_cgraph" alt=""/></div>
<map name="abluesync_8c_a9f8da33a076ee25b6c18d4085dd2d35e_cgraph" id="abluesync_8c_a9f8da33a076ee25b6c18d4085dd2d35e_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,159,31"/>
<area shape="rect" href="bluesync_8c.html#a1701ea77f09d4dc607b1b5e92b474cf8" title=" " alt="" coords="207,5,342,31"/>
<area shape="poly" title=" " alt="" coords="159,16,191,16,191,21,159,21"/>
<area shape="rect" href="bluesync_8c.html#a1fcdc17b3a214717b39e519ce5ca4dd8" title=" " alt="" coords="390,5,543,31"/>
<area shape="poly" title=" " alt="" coords="343,16,374,16,374,21,343,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a9f8da33a076ee25b6c18d4085dd2d35e_icgraph.png" border="0" usemap="#abluesync_8c_a9f8da33a076ee25b6c18d4085dd2d35e_icgraph" alt=""/></div>
<map name="abluesync_8c_a9f8da33a076ee25b6c18d4085dd2d35e_icgraph" id="abluesync_8c_a9f8da33a076ee25b6c18d4085dd2d35e_icgraph">
<area shape="rect" title=" " alt="" coords="166,5,319,31"/>
<area shape="rect" href="bluesync_8c.html#aa93dc27074f8b822db6118b39d80207c" title=" " alt="" coords="5,5,118,31"/>
<area shape="poly" title=" " alt="" coords="150,21,118,21,118,16,150,16"/>
</map>
</div>

</div>
</div>
<a id="ac1f14e07918b159fe1dc8277a7d2c14e" name="ac1f14e07918b159fe1dc8277a7d2c14e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac1f14e07918b159fe1dc8277a7d2c14e">&#9670;&#160;</a></span>bluesync_decode_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bluesync_decode_msg </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structbluesync__msg__client.html">bluesync_msg_client</a> *</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct net_buf_simple *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00213">213</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  213</span>                                                                                            {</div>
<div class="line"><span class="lineno">  214</span>    msg-&gt;<a class="code hl_variable" href="structbluesync__msg__client.html#a101e364425ab333ca8fe0a03714f220b">client_timer_ticks</a> = k_uptime_ticks();</div>
<div class="line"><span class="lineno">  215</span>    msg-&gt;<a class="code hl_variable" href="structbluesync__msg__client.html#a6d3cd38da9a928c0bfea7553fd417ee9">rcv</a>.<a class="code hl_variable" href="structbluesync__msg.html#ab27d26c7911a5fb09b87da921824b8b7">round_id</a> = net_buf_simple_pull_u8(buf);</div>
<div class="line"><span class="lineno">  216</span>    msg-&gt;<a class="code hl_variable" href="structbluesync__msg__client.html#a6d3cd38da9a928c0bfea7553fd417ee9">rcv</a>.<a class="code hl_variable" href="structbluesync__msg.html#abceb6bdb952b4e13fb42a1293ba05a2b">index_timeslot</a> = net_buf_simple_pull_u8(buf);</div>
<div class="line"><span class="lineno">  217</span>    msg-&gt;<a class="code hl_variable" href="structbluesync__msg__client.html#a6d3cd38da9a928c0bfea7553fd417ee9">rcv</a>.<a class="code hl_variable" href="structbluesync__msg.html#ad06cb6bac92823fe946dd6f0b601cfb3">master_timer_ticks</a> = net_buf_simple_pull_le64(buf);</div>
<div class="line"><span class="lineno">  218</span>    msg-&gt;master_estimation_ticks = <a class="code hl_function" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0">get_logical_time_ticks</a>();</div>
<div class="line"><span class="lineno">  219</span>}</div>
<div class="ttc" id="astructbluesync__msg__client_html_a101e364425ab333ca8fe0a03714f220b"><div class="ttname"><a href="structbluesync__msg__client.html#a101e364425ab333ca8fe0a03714f220b">bluesync_msg_client::client_timer_ticks</a></div><div class="ttdeci">uint64_t client_timer_ticks</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00126">bluesync.h:126</a></div></div>
<div class="ttc" id="astructbluesync__msg__client_html_a6d3cd38da9a928c0bfea7553fd417ee9"><div class="ttname"><a href="structbluesync__msg__client.html#a6d3cd38da9a928c0bfea7553fd417ee9">bluesync_msg_client::rcv</a></div><div class="ttdeci">struct bluesync_msg rcv</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00125">bluesync.h:125</a></div></div>
<div class="ttc" id="astructbluesync__msg_html_ab27d26c7911a5fb09b87da921824b8b7"><div class="ttname"><a href="structbluesync__msg.html#ab27d26c7911a5fb09b87da921824b8b7">bluesync_msg::round_id</a></div><div class="ttdeci">uint8_t round_id</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00111">bluesync.h:111</a></div></div>
<div class="ttc" id="astructbluesync__msg_html_abceb6bdb952b4e13fb42a1293ba05a2b"><div class="ttname"><a href="structbluesync__msg.html#abceb6bdb952b4e13fb42a1293ba05a2b">bluesync_msg::index_timeslot</a></div><div class="ttdeci">uint8_t index_timeslot</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00112">bluesync.h:112</a></div></div>
<div class="ttc" id="astructbluesync__msg_html_ad06cb6bac92823fe946dd6f0b601cfb3"><div class="ttname"><a href="structbluesync__msg.html#ad06cb6bac92823fe946dd6f0b601cfb3">bluesync_msg::master_timer_ticks</a></div><div class="ttdeci">uint64_t master_timer_ticks</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00113">bluesync.h:113</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structbluesync__msg__client.html#a101e364425ab333ca8fe0a03714f220b">bluesync_msg_client::client_timer_ticks</a>, <a class="el" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0">get_logical_time_ticks()</a>, <a class="el" href="structbluesync__msg.html#abceb6bdb952b4e13fb42a1293ba05a2b">bluesync_msg::index_timeslot</a>, <a class="el" href="structbluesync__msg.html#ad06cb6bac92823fe946dd6f0b601cfb3">bluesync_msg::master_timer_ticks</a>, <a class="el" href="structbluesync__msg__client.html#a6d3cd38da9a928c0bfea7553fd417ee9">bluesync_msg_client::rcv</a>, and <a class="el" href="structbluesync__msg.html#ab27d26c7911a5fb09b87da921824b8b7">bluesync_msg::round_id</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a5786970c5cd6649e57c988641e21c92b">scan_cb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_ac1f14e07918b159fe1dc8277a7d2c14e_cgraph.png" border="0" usemap="#abluesync_8c_ac1f14e07918b159fe1dc8277a7d2c14e_cgraph" alt=""/></div>
<map name="abluesync_8c_ac1f14e07918b159fe1dc8277a7d2c14e_cgraph" id="abluesync_8c_ac1f14e07918b159fe1dc8277a7d2c14e_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,159,31"/>
<area shape="rect" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0" title="Get the logical time ticks value. This is the corrected ticks value after synchronisation...." alt="" coords="207,5,357,31"/>
<area shape="poly" title=" " alt="" coords="159,16,191,16,191,21,159,21"/>
<area shape="rect" href="local__time_8c.html#a3de0db4d23103b2a5c83f9b27b39cf85" title=" " alt="" coords="405,5,562,31"/>
<area shape="poly" title=" " alt="" coords="357,16,389,16,389,21,357,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_ac1f14e07918b159fe1dc8277a7d2c14e_icgraph.png" border="0" usemap="#abluesync_8c_ac1f14e07918b159fe1dc8277a7d2c14e_icgraph" alt=""/></div>
<map name="abluesync_8c_ac1f14e07918b159fe1dc8277a7d2c14e_icgraph" id="abluesync_8c_ac1f14e07918b159fe1dc8277a7d2c14e_icgraph">
<area shape="rect" title=" " alt="" coords="654,13,807,38"/>
<area shape="rect" href="bluesync_8c.html#a5786970c5cd6649e57c988641e21c92b" title=" " alt="" coords="535,13,606,38"/>
<area shape="poly" title=" " alt="" coords="638,28,606,28,606,23,638,23"/>
<area shape="rect" href="bluesync_8c.html#a3281e1132ea7be337932f349e4dd0103" title=" " alt="" coords="211,13,351,38"/>
<area shape="poly" title=" " alt="" coords="520,28,351,28,351,23,520,23"/>
<area shape="rect" href="bluesync_8c.html#accff9034edc5962a24e70e68901a3ca8" title=" " alt="" coords="399,38,487,64"/>
<area shape="poly" title=" " alt="" coords="521,38,488,45,487,40,520,33"/>
<area shape="rect" href="bluesync_8c.html#a0899d4461371eab18cec52ab2673600a" title=" " alt="" coords="5,5,163,46"/>
<area shape="poly" title=" " alt="" coords="195,28,163,28,163,23,195,23"/>
<area shape="poly" title=" " alt="" coords="383,44,351,39,352,34,384,39"/>
</map>
</div>

</div>
</div>
<a id="a1fcdc17b3a214717b39e519ce5ca4dd8" name="a1fcdc17b3a214717b39e519ce5ca4dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fcdc17b3a214717b39e519ce5ca4dd8">&#9670;&#160;</a></span>bluesync_encode_msg()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6">bluesync_status_t</a> bluesync_encode_msg </td>
          <td>(</td>
          <td class="paramtype">struct bt_data *</td>          <td class="paramname"><span class="paramname"><em>bt_pkt</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>current_round_id</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>current_timeslot_idx</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int64_t</td>          <td class="paramname"><span class="paramname"><em>time_ticks</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00350">350</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  352</span>                       {</div>
<div class="line"><span class="lineno">  353</span> </div>
<div class="line"><span class="lineno">  354</span>    memset(<a class="code hl_variable" href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a>, 0, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a>));</div>
<div class="line"><span class="lineno">  355</span> </div>
<div class="line"><span class="lineno">  356</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structbluesync__msg.html">bluesync_msg</a> msg = {</div>
<div class="line"><span class="lineno">  357</span>        .round_id = current_round_id,</div>
<div class="line"><span class="lineno">  358</span>        .index_timeslot = current_timeslot_idx,</div>
<div class="line"><span class="lineno">  359</span>        .master_timer_ticks = time_ticks</div>
<div class="line"><span class="lineno">  360</span>    };</div>
<div class="line"><span class="lineno">  361</span> </div>
<div class="line"><span class="lineno">  362</span>    uint16_t manufacturer_id = <a class="code hl_define" href="src_2bluesync_8h.html#a4073402ce1a4e73a703d289e6f00b93e">MY_MANUFACTURER_ID</a>;</div>
<div class="line"><span class="lineno">  363</span>    </div>
<div class="line"><span class="lineno">  364</span>    <span class="comment">// Copy Manufacturer ID (Little Endian format)</span></div>
<div class="line"><span class="lineno">  365</span>    <a class="code hl_variable" href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a>[0] = manufacturer_id &amp; 0xFF;</div>
<div class="line"><span class="lineno">  366</span>    <a class="code hl_variable" href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a>[1] = (manufacturer_id &gt;&gt; 8) &amp; 0xFF;</div>
<div class="line"><span class="lineno">  367</span>    </div>
<div class="line"><span class="lineno">  368</span>    <span class="comment">// Copy the struct data into the buffer</span></div>
<div class="line"><span class="lineno">  369</span>    memcpy(&amp;<a class="code hl_variable" href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a>[2], &amp;msg, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structbluesync__msg.html">bluesync_msg</a>));</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>    bt_pkt[0].type = BT_DATA_FLAGS;</div>
<div class="line"><span class="lineno">  372</span>    bt_pkt[0].data_len = 1;</div>
<div class="line"><span class="lineno">  373</span>    bt_pkt[0].data = (uint8_t []) { BT_LE_AD_GENERAL | BT_LE_AD_NO_BREDR };</div>
<div class="line"><span class="lineno">  374</span> </div>
<div class="line"><span class="lineno">  375</span>    bt_pkt[1].type = BT_DATA_MANUFACTURER_DATA;</div>
<div class="line"><span class="lineno">  376</span>    bt_pkt[1].data_len = <span class="keyword">sizeof</span>(<a class="code hl_variable" href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a>);</div>
<div class="line"><span class="lineno">  377</span>    bt_pkt[1].data = <a class="code hl_variable" href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a>;</div>
<div class="line"><span class="lineno">  378</span> </div>
<div class="line"><span class="lineno">  379</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a>;</div>
<div class="line"><span class="lineno">  380</span>}</div>
<div class="ttc" id="abluesync_8c_html_a7d915d6457a8c114b381f3b2856d154d"><div class="ttname"><a href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a></div><div class="ttdeci">static uint8_t bt_packet_buf[sizeof(uint16_t)+sizeof(struct bluesync_msg)]</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00348">bluesync.c:348</a></div></div>
<div class="ttc" id="asrc_2bluesync_8h_html_a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7"><div class="ttname"><a href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a></div><div class="ttdeci">@ BLUESYNC_SUCCESS_STATUS</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00039">bluesync.h:39</a></div></div>
<div class="ttc" id="asrc_2bluesync_8h_html_a4073402ce1a4e73a703d289e6f00b93e"><div class="ttname"><a href="src_2bluesync_8h.html#a4073402ce1a4e73a703d289e6f00b93e">MY_MANUFACTURER_ID</a></div><div class="ttdeci">#define MY_MANUFACTURER_ID</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00036">bluesync.h:36</a></div></div>
<div class="ttc" id="astructbluesync__msg_html"><div class="ttname"><a href="structbluesync__msg.html">bluesync_msg</a></div><div class="ttdoc">Message structure used in BlueSync time synchronization exchanges.</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00110">bluesync.h:110</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a>, <a class="el" href="#a7d915d6457a8c114b381f3b2856d154d">bt_packet_buf</a>, and <a class="el" href="src_2bluesync_8h.html#a4073402ce1a4e73a703d289e6f00b93e">MY_MANUFACTURER_ID</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a1701ea77f09d4dc607b1b5e92b474cf8">bluesync_send_adv()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a1fcdc17b3a214717b39e519ce5ca4dd8_icgraph.png" border="0" usemap="#abluesync_8c_a1fcdc17b3a214717b39e519ce5ca4dd8_icgraph" alt=""/></div>
<map name="abluesync_8c_a1fcdc17b3a214717b39e519ce5ca4dd8_icgraph" id="abluesync_8c_a1fcdc17b3a214717b39e519ce5ca4dd8_icgraph">
<area shape="rect" title=" " alt="" coords="550,5,704,31"/>
<area shape="rect" href="bluesync_8c.html#a1701ea77f09d4dc607b1b5e92b474cf8" title=" " alt="" coords="367,5,502,31"/>
<area shape="poly" title=" " alt="" coords="535,21,503,21,503,16,535,16"/>
<area shape="rect" href="bluesync_8c.html#a9f8da33a076ee25b6c18d4085dd2d35e" title=" " alt="" coords="166,5,319,31"/>
<area shape="poly" title=" " alt="" coords="351,21,320,21,320,16,351,16"/>
<area shape="rect" href="bluesync_8c.html#aa93dc27074f8b822db6118b39d80207c" title=" " alt="" coords="5,5,118,31"/>
<area shape="poly" title=" " alt="" coords="150,21,118,21,118,16,150,16"/>
</map>
</div>

</div>
</div>
<a id="a722991b2960886eaf99895ba3395176f" name="a722991b2960886eaf99895ba3395176f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a722991b2960886eaf99895ba3395176f">&#9670;&#160;</a></span>bluesync_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluesync_init </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the BlueSync time synchronization module. </p>
<p>This function sets up internal data structures, mutexes, and state variables required for BlueSync to operate. It should be called once at startup before any synchronization or logical time queries are made. </p>

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00634">634</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  634</span>                    {</div>
<div class="line"><span class="lineno">  635</span>    LOG_DBG(<span class="stringliteral">&quot;bluesync init&quot;</span>);</div>
<div class="line"><span class="lineno">  636</span> </div>
<div class="line"><span class="lineno">  637</span>    k_tid_t thread_id = k_thread_create(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.bluesync_thread, bluesync_thread_stack,</div>
<div class="line"><span class="lineno">  638</span>                                      K_THREAD_STACK_SIZEOF(bluesync_thread_stack),</div>
<div class="line"><span class="lineno">  639</span>                                      <a class="code hl_function" href="#a21bfb7737b28b272a313aac9db321aaf">bluesync_thread_fnt</a>, &amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>, NULL, NULL,</div>
<div class="line"><span class="lineno">  640</span>                                      CONFIG_BLUESYNC_THREAD_PRIORITY, 0, K_NO_WAIT);</div>
<div class="line"><span class="lineno">  641</span>    k_thread_name_set(thread_id, <span class="stringliteral">&quot;bluesync_thread&quot;</span>);</div>
<div class="line"><span class="lineno">  642</span>}</div>
<div class="ttc" id="abluesync_8c_html_a21bfb7737b28b272a313aac9db321aaf"><div class="ttname"><a href="#a21bfb7737b28b272a313aac9db321aaf">bluesync_thread_fnt</a></div><div class="ttdeci">void bluesync_thread_fnt(void *arg1, void *arg2, void *arg3)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00585">bluesync.c:585</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#a21bfb7737b28b272a313aac9db321aaf">bluesync_thread_fnt()</a>, and <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a722991b2960886eaf99895ba3395176f_cgraph.png" border="0" usemap="#abluesync_8c_a722991b2960886eaf99895ba3395176f_cgraph" alt=""/></div>
<map name="abluesync_8c_a722991b2960886eaf99895ba3395176f_cgraph" id="abluesync_8c_a722991b2960886eaf99895ba3395176f_cgraph">
<area shape="rect" title="Initializes the BlueSync time synchronization module." alt="" coords="5,120,102,146"/>
<area shape="rect" href="bluesync_8c.html#a21bfb7737b28b272a313aac9db321aaf" title=" " alt="" coords="150,120,287,146"/>
<area shape="poly" title=" " alt="" coords="102,130,134,130,134,136,102,136"/>
<area shape="rect" href="bluesync_8c.html#ae50107a7d06bfb4985ecbe2800d21bfe" title=" " alt="" coords="352,5,477,31"/>
<area shape="poly" title=" " alt="" coords="232,117,275,80,334,41,348,35,350,39,336,46,278,84,235,122"/>
<area shape="rect" href="bluesync_8c.html#aa16c1884bb8d3e76f7e0b221988d8906" title=" " alt="" coords="338,55,491,96"/>
<area shape="poly" title=" " alt="" coords="264,117,328,98,329,103,266,122"/>
<area shape="rect" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751" title="Annonce an event to the state machine." alt="" coords="554,120,706,146"/>
<area shape="poly" title=" " alt="" coords="288,130,538,130,538,136,288,136"/>
<area shape="rect" href="bs__state__machine_8c.html#a53d51bafaea759128ff2e086cd372e6c" title="Init the state machine by passing the list of callbacks." alt="" coords="339,171,490,196"/>
<area shape="poly" title=" " alt="" coords="272,144,348,164,347,169,270,149"/>
<area shape="rect" href="bluesync_8c.html#a1bede3fdaf14c6f6462fe25bca0df18b" title=" " alt="" coords="335,220,494,246"/>
<area shape="poly" title=" " alt="" coords="238,144,281,175,336,206,349,212,347,217,334,211,278,179,235,148"/>
<area shape="rect" href="bluesync_8c.html#a73d14c438328054c5c14b084b3befe54" title=" " alt="" coords="542,5,718,31"/>
<area shape="poly" title=" " alt="" coords="491,53,563,33,565,38,492,58"/>
<area shape="rect" href="bs__state__machine_8c.html#a4c0f6002608b7ff932018f3570981ee8" title="Get the current state." alt="" coords="554,55,706,96"/>
<area shape="poly" title=" " alt="" coords="492,73,538,73,538,78,492,78"/>
<area shape="poly" title=" " alt="" coords="492,93,565,113,563,118,491,98"/>
<area shape="rect" href="bluesync__bitfields_8c.html#a835ad1bade618a08ef4ca2a30d8fc470" title="Set a specific bit in the bitfield." alt="" coords="773,5,833,31"/>
<area shape="poly" title=" " alt="" coords="718,16,757,16,757,21,718,21"/>
<area shape="rect" href="bs__state__machine_8c.html#a11a8e1f6a177592af3f6958c481bcf79" title=" " alt="" coords="766,120,840,146"/>
<area shape="poly" title=" " alt="" coords="706,130,750,130,750,136,706,136"/>
</map>
</div>

</div>
</div>
<a id="ae50107a7d06bfb4985ecbe2800d21bfe" name="ae50107a7d06bfb4985ecbe2800d21bfe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae50107a7d06bfb4985ecbe2800d21bfe">&#9670;&#160;</a></span>bluesync_init_adv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bluesync_init_adv </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00528">528</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  528</span>                               {</div>
<div class="line"><span class="lineno">  529</span>    <span class="keywordtype">int</span> err = bt_le_ext_adv_create(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.adv_param, &amp;<a class="code hl_variable" href="#aed90acb647f5b18c244652d9bc8fc883">bt_callbacks</a>, &amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.adv);</div>
<div class="line"><span class="lineno">  530</span>    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  531</span>        LOG_ERR(<span class="stringliteral">&quot;Failed to create extended advertising set (err %d)&quot;</span>, err);</div>
<div class="line"><span class="lineno">  532</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  533</span>    }</div>
<div class="line"><span class="lineno">  534</span>}</div>
<div class="ttc" id="abluesync_8c_html_aed90acb647f5b18c244652d9bc8fc883"><div class="ttname"><a href="#aed90acb647f5b18c244652d9bc8fc883">bt_callbacks</a></div><div class="ttdeci">static struct bt_le_ext_adv_cb bt_callbacks</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00524">bluesync.c:524</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#aed90acb647f5b18c244652d9bc8fc883">bt_callbacks</a>, and <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a21bfb7737b28b272a313aac9db321aaf">bluesync_thread_fnt()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_ae50107a7d06bfb4985ecbe2800d21bfe_icgraph.png" border="0" usemap="#abluesync_8c_ae50107a7d06bfb4985ecbe2800d21bfe_icgraph" alt=""/></div>
<map name="abluesync_8c_ae50107a7d06bfb4985ecbe2800d21bfe_icgraph" id="abluesync_8c_ae50107a7d06bfb4985ecbe2800d21bfe_icgraph">
<area shape="rect" title=" " alt="" coords="335,5,459,31"/>
<area shape="rect" href="bluesync_8c.html#a21bfb7737b28b272a313aac9db321aaf" title=" " alt="" coords="150,5,287,31"/>
<area shape="poly" title=" " alt="" coords="320,21,287,21,287,16,320,16"/>
<area shape="rect" href="bluesync_8c.html#a722991b2960886eaf99895ba3395176f" title="Initializes the BlueSync time synchronization module." alt="" coords="5,5,102,31"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="ac645e5a0d11afc2847855b7697f55c63" name="ac645e5a0d11afc2847855b7697f55c63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac645e5a0d11afc2847855b7697f55c63">&#9670;&#160;</a></span>bluesync_reset_param()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bluesync_reset_param </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00129">129</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  129</span>                                  {</div>
<div class="line"><span class="lineno">  130</span>    <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.timeslot_index = 0;</div>
<div class="line"><span class="lineno">  131</span> </div>
<div class="line"><span class="lineno">  132</span>    k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  133</span>    {</div>
<div class="line"><span class="lineno">  134</span>        <a class="code hl_function" href="#ab62b52cc2c05b0b6f1d1fd6816b4f43c">reset_bluesync_timestamps</a>(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local);</div>
<div class="line"><span class="lineno">  135</span>    }</div>
<div class="line"><span class="lineno">  136</span>    k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_mutex);</div>
<div class="line"><span class="lineno">  137</span>    k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  138</span>    {</div>
<div class="line"><span class="lineno">  139</span>        <a class="code hl_function" href="#ab62b52cc2c05b0b6f1d1fd6816b4f43c">reset_bluesync_timestamps</a>(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv);</div>
<div class="line"><span class="lineno">  140</span>    }</div>
<div class="line"><span class="lineno">  141</span>    k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_mutex);</div>
<div class="line"><span class="lineno">  142</span>}</div>
<div class="ttc" id="abluesync_8c_html_ab62b52cc2c05b0b6f1d1fd6816b4f43c"><div class="ttname"><a href="#ab62b52cc2c05b0b6f1d1fd6816b4f43c">reset_bluesync_timestamps</a></div><div class="ttdeci">static void reset_bluesync_timestamps(bluesync_timestamps_t *elem)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00109">bluesync.c:109</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>, and <a class="el" href="#ab62b52cc2c05b0b6f1d1fd6816b4f43c">reset_bluesync_timestamps()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#aa93dc27074f8b822db6118b39d80207c">bs_adv_handler()</a>, and <a class="el" href="#a0899d4461371eab18cec52ab2673600a">bs_scan_wait_for_sync_handler()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_ac645e5a0d11afc2847855b7697f55c63_cgraph.png" border="0" usemap="#abluesync_8c_ac645e5a0d11afc2847855b7697f55c63_cgraph" alt=""/></div>
<map name="abluesync_8c_ac645e5a0d11afc2847855b7697f55c63_cgraph" id="abluesync_8c_ac645e5a0d11afc2847855b7697f55c63_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,157,31"/>
<area shape="rect" href="bluesync_8c.html#ab62b52cc2c05b0b6f1d1fd6816b4f43c" title=" " alt="" coords="205,5,388,31"/>
<area shape="poly" title=" " alt="" coords="157,16,189,16,189,21,157,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_ac645e5a0d11afc2847855b7697f55c63_icgraph.png" border="0" usemap="#abluesync_8c_ac645e5a0d11afc2847855b7697f55c63_icgraph" alt=""/></div>
<map name="abluesync_8c_ac645e5a0d11afc2847855b7697f55c63_icgraph" id="abluesync_8c_ac645e5a0d11afc2847855b7697f55c63_icgraph">
<area shape="rect" title=" " alt="" coords="211,35,362,60"/>
<area shape="rect" href="bluesync_8c.html#aa93dc27074f8b822db6118b39d80207c" title=" " alt="" coords="28,5,140,31"/>
<area shape="poly" title=" " alt="" coords="195,37,140,29,141,24,196,32"/>
<area shape="rect" href="bluesync_8c.html#a0899d4461371eab18cec52ab2673600a" title=" " alt="" coords="5,55,163,96"/>
<area shape="poly" title=" " alt="" coords="195,63,163,67,163,62,195,57"/>
</map>
</div>

</div>
</div>
<a id="aa16c1884bb8d3e76f7e0b221988d8906" name="aa16c1884bb8d3e76f7e0b221988d8906"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa16c1884bb8d3e76f7e0b221988d8906">&#9670;&#160;</a></span>bluesync_scan_packet_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bluesync_scan_packet_process </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00281">281</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  281</span>                                          {</div>
<div class="line"><span class="lineno">  282</span>    <span class="keyword">struct </span><a class="code hl_struct" href="structbluesync__msg__client.html">bluesync_msg_client</a> msg;</div>
<div class="line"><span class="lineno">  283</span>    <span class="keywordtype">int</span> ret = k_msgq_get(&amp;bluesync_rx_msgq, &amp;msg, K_FOREVER);</div>
<div class="line"><span class="lineno">  284</span>    <span class="keywordflow">if</span> (ret != 0) {</div>
<div class="line"><span class="lineno">  285</span>        LOG_ERR(<span class="stringliteral">&quot;No message available (err: %d)&quot;</span>, ret);</div>
<div class="line"><span class="lineno">  286</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  287</span>    }</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>    uint8_t current_round_id = msg.rcv.round_id;</div>
<div class="line"><span class="lineno">  290</span>    uint8_t current_timeslot_idx = msg.rcv.index_timeslot;</div>
<div class="line"><span class="lineno">  291</span> </div>
<div class="line"><span class="lineno">  292</span>    <a class="code hl_enumeration" href="bs__state__machine_8h.html#aac656b0e5c1b3a6d281a970ddd6019b6">bs_sm_state_t</a> current_state = <a class="code hl_function" href="bs__state__machine_8c.html#a4c0f6002608b7ff932018f3570981ee8">bs_state_machine_get_state</a>();</div>
<div class="line"><span class="lineno">  293</span> </div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">if</span> (current_state == <a class="code hl_enumvalue" href="bs__state__machine_8h.html#aac656b0e5c1b3a6d281a970ddd6019b6a3d080a62fecbb1e807534189806245d0">BS_SCAN_WAIT_FOR_SYNC</a>)</div>
<div class="line"><span class="lineno">  295</span>    {</div>
<div class="line"><span class="lineno">  296</span>        <span class="keywordflow">if</span> (current_round_id == <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.current_round_id){</div>
<div class="line"><span class="lineno">  297</span>            <span class="keywordflow">return</span>; <span class="comment">// already synchronized to this round</span></div>
<div class="line"><span class="lineno">  298</span>        }</div>
<div class="line"><span class="lineno">  299</span>        k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  300</span>        {</div>
<div class="line"><span class="lineno">  301</span>            <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.new_round_id = current_round_id;</div>
<div class="line"><span class="lineno">  302</span>        }</div>
<div class="line"><span class="lineno">  303</span>        k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex);</div>
<div class="line"><span class="lineno">  304</span> </div>
<div class="line"><span class="lineno">  305</span>        <span class="keywordtype">int</span> remaining_slots = <a class="code hl_define" href="src_2bluesync_8h.html#a5cb8bef83e6348806d87b0b680d389fb">BLUESYNC_TIMESTAMP_ARRAY_SIZE</a> + 1 - current_timeslot_idx;</div>
<div class="line"><span class="lineno">  306</span>        k_timer_start(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.drift_estimation_timer, K_MSEC(remaining_slots * CONFIG_BLUESYNC_ADV_INT_MS), K_NO_WAIT);</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>        <a class="code hl_function" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run</a>(<a class="code hl_enumvalue" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a56e0c5b3798fd52e88a700015f6853af">EVENT_NEW_SYNC_RCV</a>);</div>
<div class="line"><span class="lineno">  309</span> </div>
<div class="line"><span class="lineno">  310</span>    }</div>
<div class="line"><span class="lineno">  311</span>    </div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordflow">if</span>(current_timeslot_idx &gt; <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>){</div>
<div class="line"><span class="lineno">  313</span>        LOG_ERR(<span class="stringliteral">&quot;Index too large: %u (max %u)&quot;</span>, current_timeslot_idx, <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>);</div>
<div class="line"><span class="lineno">  314</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  315</span>    }</div>
<div class="line"><span class="lineno">  316</span> </div>
<div class="line"><span class="lineno">  317</span>    <span class="comment">// add timestamp to local set if index is between the range</span></div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordflow">if</span>(current_timeslot_idx &gt;= 0  &amp;&amp; current_timeslot_idx &lt; <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>){</div>
<div class="line"><span class="lineno">  319</span>        k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  320</span>        {</div>
<div class="line"><span class="lineno">  321</span>            <a class="code hl_function" href="#a73d14c438328054c5c14b084b3befe54">add_bluesync_timestamps</a>(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local </div>
<div class="line"><span class="lineno">  322</span>                                    , current_timeslot_idx </div>
<div class="line"><span class="lineno">  323</span>                                    , msg.client_timer_ticks</div>
<div class="line"><span class="lineno">  324</span>#<span class="keywordflow">if</span> defined(CONFIG_BLUESYNC_TEST_BABBLESIM_SUPPORT)</div>
<div class="line"><span class="lineno">  325</span>                                    , msg.master_estimation_ticks</div>
<div class="line"><span class="lineno">  326</span>#endif</div>
<div class="line"><span class="lineno">  327</span>                                    );</div>
<div class="line"><span class="lineno">  328</span>        }</div>
<div class="line"><span class="lineno">  329</span>        k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_mutex);</div>
<div class="line"><span class="lineno">  330</span>    }</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    <span class="comment">// add timestamp to master set if index is between the range</span></div>
<div class="line"><span class="lineno">  333</span>    <span class="keywordflow">if</span>(current_timeslot_idx &gt;= 1  &amp;&amp; current_timeslot_idx &lt;= <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>){</div>
<div class="line"><span class="lineno">  334</span>        k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  335</span>        {</div>
<div class="line"><span class="lineno">  336</span>            <a class="code hl_function" href="#a73d14c438328054c5c14b084b3befe54">add_bluesync_timestamps</a>(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv</div>
<div class="line"><span class="lineno">  337</span>                                    , current_timeslot_idx-1</div>
<div class="line"><span class="lineno">  338</span>                                    , msg.rcv.master_timer_ticks</div>
<div class="line"><span class="lineno">  339</span>#<span class="keywordflow">if</span> defined(CONFIG_BLUESYNC_TEST_BABBLESIM_SUPPORT)</div>
<div class="line"><span class="lineno">  340</span>                                    , 0</div>
<div class="line"><span class="lineno">  341</span>#endif                                                      </div>
<div class="line"><span class="lineno">  342</span>                                    );</div>
<div class="line"><span class="lineno">  343</span>        }</div>
<div class="line"><span class="lineno">  344</span>        k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_mutex);</div>
<div class="line"><span class="lineno">  345</span>    }</div>
<div class="line"><span class="lineno">  346</span>}</div>
<div class="ttc" id="abluesync_8c_html_a73d14c438328054c5c14b084b3befe54"><div class="ttname"><a href="#a73d14c438328054c5c14b084b3befe54">add_bluesync_timestamps</a></div><div class="ttdeci">static void add_bluesync_timestamps(bluesync_timestamps_t *elem, uint8_t pos, int64_t ticks,)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00114">bluesync.c:114</a></div></div>
<div class="ttc" id="abs__state__machine_8c_html_a4c0f6002608b7ff932018f3570981ee8"><div class="ttname"><a href="bs__state__machine_8c.html#a4c0f6002608b7ff932018f3570981ee8">bs_state_machine_get_state</a></div><div class="ttdeci">bs_sm_state_t bs_state_machine_get_state()</div><div class="ttdoc">Get the current state.</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8c_source.html#l00188">bs_state_machine.c:188</a></div></div>
<div class="ttc" id="abs__state__machine_8c_html_ad709ebb4c9b77535d7773f11f52dd751"><div class="ttname"><a href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run</a></div><div class="ttdeci">void bs_state_machine_run(bs_sm_event_t event)</div><div class="ttdoc">Annonce an event to the state machine.</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8c_source.html#l00107">bs_state_machine.c:107</a></div></div>
<div class="ttc" id="abs__state__machine_8h_html_aac656b0e5c1b3a6d281a970ddd6019b6"><div class="ttname"><a href="bs__state__machine_8h.html#aac656b0e5c1b3a6d281a970ddd6019b6">bs_sm_state_t</a></div><div class="ttdeci">bs_sm_state_t</div><div class="ttdoc">Type definition representing the states.</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8h_source.html#l00033">bs_state_machine.h:33</a></div></div>
<div class="ttc" id="abs__state__machine_8h_html_aac656b0e5c1b3a6d281a970ddd6019b6a3d080a62fecbb1e807534189806245d0"><div class="ttname"><a href="bs__state__machine_8h.html#aac656b0e5c1b3a6d281a970ddd6019b6a3d080a62fecbb1e807534189806245d0">BS_SCAN_WAIT_FOR_SYNC</a></div><div class="ttdeci">@ BS_SCAN_WAIT_FOR_SYNC</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8h_source.html#l00035">bs_state_machine.h:35</a></div></div>
<div class="ttc" id="abs__state__machine_8h_html_acd366ca1267789a10e25d49c49451bb4a56e0c5b3798fd52e88a700015f6853af"><div class="ttname"><a href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a56e0c5b3798fd52e88a700015f6853af">EVENT_NEW_SYNC_RCV</a></div><div class="ttdeci">@ EVENT_NEW_SYNC_RCV</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8h_source.html#l00050">bs_state_machine.h:50</a></div></div>
<div class="ttc" id="asrc_2bluesync_8h_html_a5cb8bef83e6348806d87b0b680d389fb"><div class="ttname"><a href="src_2bluesync_8h.html#a5cb8bef83e6348806d87b0b680d389fb">BLUESYNC_TIMESTAMP_ARRAY_SIZE</a></div><div class="ttdeci">#define BLUESYNC_TIMESTAMP_ARRAY_SIZE</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00032">bluesync.h:32</a></div></div>
<div class="ttc" id="astructbluesync__msg__client_html"><div class="ttname"><a href="structbluesync__msg__client.html">bluesync_msg_client</a></div><div class="ttdoc">Encapsulated BlueSync message received by the client during synchronization.</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00124">bluesync.h:124</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#a73d14c438328054c5c14b084b3befe54">add_bluesync_timestamps()</a>, <a class="el" href="src_2bluesync_8h.html#a5cb8bef83e6348806d87b0b680d389fb">BLUESYNC_TIMESTAMP_ARRAY_SIZE</a>, <a class="el" href="bs__state__machine_8h.html#aac656b0e5c1b3a6d281a970ddd6019b6a3d080a62fecbb1e807534189806245d0">BS_SCAN_WAIT_FOR_SYNC</a>, <a class="el" href="bs__state__machine_8c.html#a4c0f6002608b7ff932018f3570981ee8">bs_state_machine_get_state()</a>, <a class="el" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run()</a>, <a class="el" href="structbluesync__msg__client.html#a101e364425ab333ca8fe0a03714f220b">bluesync_msg_client::client_timer_ticks</a>, <a class="el" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a56e0c5b3798fd52e88a700015f6853af">EVENT_NEW_SYNC_RCV</a>, <a class="el" href="structbluesync__msg.html#abceb6bdb952b4e13fb42a1293ba05a2b">bluesync_msg::index_timeslot</a>, <a class="el" href="structbluesync__msg.html#ad06cb6bac92823fe946dd6f0b601cfb3">bluesync_msg::master_timer_ticks</a>, <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>, <a class="el" href="structbluesync__msg__client.html#a6d3cd38da9a928c0bfea7553fd417ee9">bluesync_msg_client::rcv</a>, <a class="el" href="structbluesync__msg.html#ab27d26c7911a5fb09b87da921824b8b7">bluesync_msg::round_id</a>, and <a class="el" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a21bfb7737b28b272a313aac9db321aaf">bluesync_thread_fnt()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_aa16c1884bb8d3e76f7e0b221988d8906_cgraph.png" border="0" usemap="#abluesync_8c_aa16c1884bb8d3e76f7e0b221988d8906_cgraph" alt=""/></div>
<map name="abluesync_8c_aa16c1884bb8d3e76f7e0b221988d8906_cgraph" id="abluesync_8c_aa16c1884bb8d3e76f7e0b221988d8906_cgraph">
<area shape="rect" title=" " alt="" coords="5,55,159,96"/>
<area shape="rect" href="bluesync_8c.html#a73d14c438328054c5c14b084b3befe54" title=" " alt="" coords="207,5,382,31"/>
<area shape="poly" title=" " alt="" coords="158,52,229,33,231,38,160,57"/>
<area shape="rect" href="bs__state__machine_8c.html#a4c0f6002608b7ff932018f3570981ee8" title="Get the current state." alt="" coords="218,55,370,96"/>
<area shape="poly" title=" " alt="" coords="159,73,203,73,203,78,159,78"/>
<area shape="rect" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751" title="Annonce an event to the state machine." alt="" coords="218,120,370,146"/>
<area shape="poly" title=" " alt="" coords="160,94,231,113,229,118,158,99"/>
<area shape="rect" href="bluesync__bitfields_8c.html#a835ad1bade618a08ef4ca2a30d8fc470" title="Set a specific bit in the bitfield." alt="" coords="437,5,497,31"/>
<area shape="poly" title=" " alt="" coords="382,16,421,16,421,21,382,21"/>
<area shape="rect" href="bs__state__machine_8c.html#a11a8e1f6a177592af3f6958c481bcf79" title=" " alt="" coords="430,120,504,146"/>
<area shape="poly" title=" " alt="" coords="371,130,415,130,415,136,371,136"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_aa16c1884bb8d3e76f7e0b221988d8906_icgraph.png" border="0" usemap="#abluesync_8c_aa16c1884bb8d3e76f7e0b221988d8906_icgraph" alt=""/></div>
<map name="abluesync_8c_aa16c1884bb8d3e76f7e0b221988d8906_icgraph" id="abluesync_8c_aa16c1884bb8d3e76f7e0b221988d8906_icgraph">
<area shape="rect" title=" " alt="" coords="335,5,488,46"/>
<area shape="rect" href="bluesync_8c.html#a21bfb7737b28b272a313aac9db321aaf" title=" " alt="" coords="150,13,287,38"/>
<area shape="poly" title=" " alt="" coords="319,28,287,28,287,23,319,23"/>
<area shape="rect" href="bluesync_8c.html#a722991b2960886eaf99895ba3395176f" title="Initializes the BlueSync time synchronization module." alt="" coords="5,13,102,38"/>
<area shape="poly" title=" " alt="" coords="134,28,102,28,102,23,134,23"/>
</map>
</div>

</div>
</div>
<a id="a3281e1132ea7be337932f349e4dd0103" name="a3281e1132ea7be337932f349e4dd0103"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3281e1132ea7be337932f349e4dd0103">&#9670;&#160;</a></span>bluesync_scan_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bluesync_scan_start </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00469">469</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  469</span>                                 {</div>
<div class="line"><span class="lineno">  470</span><span class="preprocessor">#if defined(CONFIG_BLUESYNC_USED_IN_MESH)</span></div>
<div class="line"><span class="lineno">  471</span>    bt_mesh_register_aux_scan_cb(BT_GAP_ADV_TYPE_EXT_ADV, &amp;<a class="code hl_function" href="#a5786970c5cd6649e57c988641e21c92b">scan_cb</a>);</div>
<div class="line"><span class="lineno">  472</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  473</span>    <span class="keywordtype">int</span> err = bt_le_scan_start(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.scan_param, &amp;<a class="code hl_function" href="#accff9034edc5962a24e70e68901a3ca8">bt_scan_cb</a>);</div>
<div class="line"><span class="lineno">  474</span>    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  475</span>        LOG_ERR(<span class="stringliteral">&quot;Failed to start scanning (err %d)&quot;</span>, err);</div>
<div class="line"><span class="lineno">  476</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  477</span>        LOG_DBG(<span class="stringliteral">&quot;Scanning started.&quot;</span>);</div>
<div class="line"><span class="lineno">  478</span>    }</div>
<div class="line"><span class="lineno">  479</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  480</span>}</div>
<div class="ttc" id="abluesync_8c_html_a5786970c5cd6649e57c988641e21c92b"><div class="ttname"><a href="#a5786970c5cd6649e57c988641e21c92b">scan_cb</a></div><div class="ttdeci">void scan_cb(const bt_addr_le_t *addr, int8_t rssi, struct net_buf_simple *buf)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00416">bluesync.c:416</a></div></div>
<div class="ttc" id="abluesync_8c_html_accff9034edc5962a24e70e68901a3ca8"><div class="ttname"><a href="#accff9034edc5962a24e70e68901a3ca8">bt_scan_cb</a></div><div class="ttdeci">static void bt_scan_cb(const bt_addr_le_t *addr, int8_t rssi, uint8_t adv_type, struct net_buf_simple *buf)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00461">bluesync.c:461</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#accff9034edc5962a24e70e68901a3ca8">bt_scan_cb()</a>, <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>, and <a class="el" href="#a5786970c5cd6649e57c988641e21c92b">scan_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a0899d4461371eab18cec52ab2673600a">bs_scan_wait_for_sync_handler()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a3281e1132ea7be337932f349e4dd0103_cgraph.png" border="0" usemap="#abluesync_8c_a3281e1132ea7be337932f349e4dd0103_cgraph" alt=""/></div>
<map name="abluesync_8c_a3281e1132ea7be337932f349e4dd0103_cgraph" id="abluesync_8c_a3281e1132ea7be337932f349e4dd0103_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,146,56"/>
<area shape="rect" href="bluesync_8c.html#accff9034edc5962a24e70e68901a3ca8" title=" " alt="" coords="194,5,282,31"/>
<area shape="poly" title=" " alt="" coords="146,30,178,25,179,30,146,35"/>
<area shape="rect" href="bluesync_8c.html#a5786970c5cd6649e57c988641e21c92b" title=" " alt="" coords="330,31,400,56"/>
<area shape="poly" title=" " alt="" coords="146,41,315,41,315,46,146,46"/>
<area shape="poly" title=" " alt="" coords="283,24,316,31,314,36,282,30"/>
<area shape="rect" href="bluesync_8c.html#ac1f14e07918b159fe1dc8277a7d2c14e" title=" " alt="" coords="448,31,602,56"/>
<area shape="poly" title=" " alt="" coords="401,41,433,41,433,46,401,46"/>
<area shape="rect" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0" title="Get the logical time ticks value. This is the corrected ticks value after synchronisation...." alt="" coords="650,31,800,56"/>
<area shape="poly" title=" " alt="" coords="602,41,634,41,634,46,602,46"/>
<area shape="rect" href="local__time_8c.html#a3de0db4d23103b2a5c83f9b27b39cf85" title=" " alt="" coords="848,31,1005,56"/>
<area shape="poly" title=" " alt="" coords="800,41,832,41,832,46,800,46"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a3281e1132ea7be337932f349e4dd0103_icgraph.png" border="0" usemap="#abluesync_8c_a3281e1132ea7be337932f349e4dd0103_icgraph" alt=""/></div>
<map name="abluesync_8c_a3281e1132ea7be337932f349e4dd0103_icgraph" id="abluesync_8c_a3281e1132ea7be337932f349e4dd0103_icgraph">
<area shape="rect" title=" " alt="" coords="211,13,351,38"/>
<area shape="rect" href="bluesync_8c.html#a0899d4461371eab18cec52ab2673600a" title=" " alt="" coords="5,5,163,46"/>
<area shape="poly" title=" " alt="" coords="195,28,163,28,163,23,195,23"/>
</map>
</div>

</div>
</div>
<a id="a9eed4afd2b78259f02fa0fca3db0f4fa" name="a9eed4afd2b78259f02fa0fca3db0f4fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eed4afd2b78259f02fa0fca3db0f4fa">&#9670;&#160;</a></span>bluesync_scan_stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bluesync_scan_stop </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00482">482</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  482</span>                                {</div>
<div class="line"><span class="lineno">  483</span><span class="preprocessor">#if defined(CONFIG_BLUESYNC_USED_IN_MESH)</span></div>
<div class="line"><span class="lineno">  484</span>    bt_mesh_unregister_aux_scan_cb();</div>
<div class="line"><span class="lineno">  485</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  486</span>    <span class="keywordtype">int</span> err = bt_le_scan_stop();</div>
<div class="line"><span class="lineno">  487</span>    <span class="keywordflow">if</span> (err == -EALREADY) {</div>
<div class="line"><span class="lineno">  488</span>        LOG_ERR(<span class="stringliteral">&quot;Scanning was not active.&quot;</span>);</div>
<div class="line"><span class="lineno">  489</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  490</span>        LOG_ERR(<span class="stringliteral">&quot;Failed to stop scanning (err %d)&quot;</span>, err);</div>
<div class="line"><span class="lineno">  491</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  492</span>        LOG_DBG(<span class="stringliteral">&quot;Scanning stopped.&quot;</span>);</div>
<div class="line"><span class="lineno">  493</span>    }</div>
<div class="line"><span class="lineno">  494</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  495</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#a5e07e4c09110ee0eb81c51b0551a3101">bs_update_handler()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a9eed4afd2b78259f02fa0fca3db0f4fa_icgraph.png" border="0" usemap="#abluesync_8c_a9eed4afd2b78259f02fa0fca3db0f4fa_icgraph" alt=""/></div>
<map name="abluesync_8c_a9eed4afd2b78259f02fa0fca3db0f4fa_icgraph" id="abluesync_8c_a9eed4afd2b78259f02fa0fca3db0f4fa_icgraph">
<area shape="rect" title=" " alt="" coords="184,5,323,31"/>
<area shape="rect" href="bluesync_8c.html#a5e07e4c09110ee0eb81c51b0551a3101" title=" " alt="" coords="5,5,136,31"/>
<area shape="poly" title=" " alt="" coords="168,21,136,21,136,16,168,16"/>
</map>
</div>

</div>
</div>
<a id="a1701ea77f09d4dc607b1b5e92b474cf8" name="a1701ea77f09d4dc607b1b5e92b474cf8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1701ea77f09d4dc607b1b5e92b474cf8">&#9670;&#160;</a></span>bluesync_send_adv()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bluesync_send_adv </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00382">382</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  382</span>                               {</div>
<div class="line"><span class="lineno">  383</span>    <span class="keyword">struct </span>bt_data bt_packet[2];</div>
<div class="line"><span class="lineno">  384</span> </div>
<div class="line"><span class="lineno">  385</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.timeslot_index == 0){</div>
<div class="line"><span class="lineno">  386</span>        <a class="code hl_function" href="#a1fcdc17b3a214717b39e519ce5ca4dd8">bluesync_encode_msg</a>(bt_packet, <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.current_round_id, <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.timeslot_index, 0);</div>
<div class="line"><span class="lineno">  387</span>    } </div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  389</span>        <a class="code hl_function" href="#a1fcdc17b3a214717b39e519ce5ca4dd8">bluesync_encode_msg</a>(bt_packet, <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.current_round_id, <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.timeslot_index,</div>
<div class="line"><span class="lineno">  390</span>                            <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local.timer_ticks[<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.timeslot_index-1]);</div>
<div class="line"><span class="lineno">  391</span>    }</div>
<div class="line"><span class="lineno">  392</span> </div>
<div class="line"><span class="lineno">  393</span>    <span class="keywordtype">int</span> err = bt_le_ext_adv_set_data(<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.adv, bt_packet, ARRAY_SIZE(bt_packet), NULL, 0);</div>
<div class="line"><span class="lineno">  394</span>    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  395</span>        LOG_ERR(<span class="stringliteral">&quot;Failed to set advertising data (err %d)&quot;</span>, err);</div>
<div class="line"><span class="lineno">  396</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  397</span>    }</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="keyword">struct </span>bt_le_ext_adv_start_param start = {</div>
<div class="line"><span class="lineno">  400</span>        .num_events = 1,</div>
<div class="line"><span class="lineno">  401</span>    };</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span><span class="preprocessor">#if defined(CONFIG_BLUESYNC_USED_IN_MESH)</span></div>
<div class="line"><span class="lineno">  404</span>    bt_mesh_scan_disable();</div>
<div class="line"><span class="lineno">  405</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  406</span>    </div>
<div class="line"><span class="lineno">  407</span>    err = bt_le_ext_adv_start(<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.adv, &amp;start);</div>
<div class="line"><span class="lineno">  408</span>    <span class="keywordflow">if</span> (err) {</div>
<div class="line"><span class="lineno">  409</span>        LOG_ERR(<span class="stringliteral">&quot;Failed to start extended advertising (err %d)&quot;</span>, err);</div>
<div class="line"><span class="lineno">  410</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  411</span>    }</div>
<div class="line"><span class="lineno">  412</span>}</div>
<div class="ttc" id="abluesync_8c_html_a1fcdc17b3a214717b39e519ce5ca4dd8"><div class="ttname"><a href="#a1fcdc17b3a214717b39e519ce5ca4dd8">bluesync_encode_msg</a></div><div class="ttdeci">static bluesync_status_t bluesync_encode_msg(struct bt_data *bt_pkt, uint8_t current_round_id, uint8_t current_timeslot_idx, int64_t time_ticks)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00350">bluesync.c:350</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#a1fcdc17b3a214717b39e519ce5ca4dd8">bluesync_encode_msg()</a>, and <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a9f8da33a076ee25b6c18d4085dd2d35e">bluesync_adv_process()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a1701ea77f09d4dc607b1b5e92b474cf8_cgraph.png" border="0" usemap="#abluesync_8c_a1701ea77f09d4dc607b1b5e92b474cf8_cgraph" alt=""/></div>
<map name="abluesync_8c_a1701ea77f09d4dc607b1b5e92b474cf8_cgraph" id="abluesync_8c_a1701ea77f09d4dc607b1b5e92b474cf8_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,141,31"/>
<area shape="rect" href="bluesync_8c.html#a1fcdc17b3a214717b39e519ce5ca4dd8" title=" " alt="" coords="189,5,342,31"/>
<area shape="poly" title=" " alt="" coords="141,16,173,16,173,21,141,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a1701ea77f09d4dc607b1b5e92b474cf8_icgraph.png" border="0" usemap="#abluesync_8c_a1701ea77f09d4dc607b1b5e92b474cf8_icgraph" alt=""/></div>
<map name="abluesync_8c_a1701ea77f09d4dc607b1b5e92b474cf8_icgraph" id="abluesync_8c_a1701ea77f09d4dc607b1b5e92b474cf8_icgraph">
<area shape="rect" title=" " alt="" coords="367,5,502,31"/>
<area shape="rect" href="bluesync_8c.html#a9f8da33a076ee25b6c18d4085dd2d35e" title=" " alt="" coords="166,5,319,31"/>
<area shape="poly" title=" " alt="" coords="351,21,320,21,320,16,351,16"/>
<area shape="rect" href="bluesync_8c.html#aa93dc27074f8b822db6118b39d80207c" title=" " alt="" coords="5,5,118,31"/>
<area shape="poly" title=" " alt="" coords="150,21,118,21,118,16,150,16"/>
</map>
</div>

</div>
</div>
<a id="a0fd22af69afb2d05130825f473adda13" name="a0fd22af69afb2d05130825f473adda13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0fd22af69afb2d05130825f473adda13">&#9670;&#160;</a></span>bluesync_set_role()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluesync_set_role </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310b">bluesync_role_t</a></td>          <td class="paramname"><span class="paramname"><em>role</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets the operational role of the BlueSync node. </p>
<p>This function configures the role of the device within the BlueSync synchronization system. Roles define whether the device acts as a time authority or as a time client within the network.</p>
<p>A <b>time authority</b> is the unique source of reference time and distributes it throughout the network. A <b>time client</b> receives synchronization from the authority or other clients and can forward the synchronized time further once it is synchronized.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">role</td><td>The role to assign to the device. Must be one of the values defined in the <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310b">bluesync_role_t</a> enumeration:<ul>
<li>BLUESYNC_AUTHORITY_ROLE</li>
<li>BLUESYNC_CLIENT_ROLE </li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00644">644</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  644</span>                                            {</div>
<div class="line"><span class="lineno">  645</span>    <span class="keywordflow">if</span> (role != <a class="code hl_enumvalue" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310ba91d7888de37627e71c6a743f1a8ba021">BLUESYNC_NONE_ROLE</a>) {</div>
<div class="line"><span class="lineno">  646</span>        <a class="code hl_function" href="bs__state__machine_8c.html#a83902f96272bc4d25ba545d9bd683c62">bs_state_machine_set_role</a>(role);</div>
<div class="line"><span class="lineno">  647</span>        k_sem_give(&amp;bluesync_role_assign_sem);</div>
<div class="line"><span class="lineno">  648</span>    }</div>
<div class="line"><span class="lineno">  649</span>    <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  650</span>        LOG_ERR(<span class="stringliteral">&quot;Wrong type given&quot;</span>);</div>
<div class="line"><span class="lineno">  651</span>    }</div>
<div class="line"><span class="lineno">  652</span>}</div>
<div class="ttc" id="abs__state__machine_8c_html_a83902f96272bc4d25ba545d9bd683c62"><div class="ttname"><a href="bs__state__machine_8c.html#a83902f96272bc4d25ba545d9bd683c62">bs_state_machine_set_role</a></div><div class="ttdeci">void bs_state_machine_set_role(bluesync_role_t role)</div><div class="ttdoc">Indicate the role to the state machine.</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8c_source.html#l00160">bs_state_machine.c:160</a></div></div>
<div class="ttc" id="ainclude_2bluesync_2bluesync_8h_html_ab90d76e2e617bc596e11fe05aa0b310ba91d7888de37627e71c6a743f1a8ba021"><div class="ttname"><a href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310ba91d7888de37627e71c6a743f1a8ba021">BLUESYNC_NONE_ROLE</a></div><div class="ttdeci">@ BLUESYNC_NONE_ROLE</div><div class="ttdef"><b>Definition</b> <a href="include_2bluesync_2bluesync_8h_source.html#l00030">bluesync.h:30</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310ba91d7888de37627e71c6a743f1a8ba021">BLUESYNC_NONE_ROLE</a>, and <a class="el" href="bs__state__machine_8c.html#a83902f96272bc4d25ba545d9bd683c62">bs_state_machine_set_role()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a0fd22af69afb2d05130825f473adda13_cgraph.png" border="0" usemap="#abluesync_8c_a0fd22af69afb2d05130825f473adda13_cgraph" alt=""/></div>
<map name="abluesync_8c_a0fd22af69afb2d05130825f473adda13_cgraph" id="abluesync_8c_a0fd22af69afb2d05130825f473adda13_cgraph">
<area shape="rect" title="Sets the operational role of the BlueSync node." alt="" coords="5,5,131,31"/>
<area shape="rect" href="bs__state__machine_8c.html#a83902f96272bc4d25ba545d9bd683c62" title="Indicate the role to the state machine." alt="" coords="179,5,359,31"/>
<area shape="poly" title=" " alt="" coords="131,16,163,16,163,21,131,21"/>
</map>
</div>

</div>
</div>
<a id="a4690b69707910bec50799ce1911f4af2" name="a4690b69707910bec50799ce1911f4af2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4690b69707910bec50799ce1911f4af2">&#9670;&#160;</a></span>bluesync_start_net_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluesync_start_net_sync </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiates a new BlueSync synchronization round as the time authority. </p>
<p>This function is called by the node acting as the time authority to start a network-wide synchronization round. It broadcasts timing information to all clients, allowing them to synchronize their local clocks based on the authority's reference time.</p>
<p>This function should only be called by devices assigned the <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a>. </p>

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00655">655</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  655</span>                              {</div>
<div class="line"><span class="lineno">  656</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="bs__state__machine_8c.html#a8e7148a913121150be60bd92a69f3cbf">bs_state_machine_get_role</a>() == <a class="code hl_enumvalue" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a>){</div>
<div class="line"><span class="lineno">  657</span>        k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  658</span>        {</div>
<div class="line"><span class="lineno">  659</span>            <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.current_round_id++;</div>
<div class="line"><span class="lineno">  660</span>        }</div>
<div class="line"><span class="lineno">  661</span>        k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex);</div>
<div class="line"><span class="lineno">  662</span>        k_sem_give(&amp;bluesync_start_new_sync_sem);</div>
<div class="line"><span class="lineno">  663</span>    }</div>
<div class="line"><span class="lineno">  664</span>}</div>
<div class="ttc" id="abs__state__machine_8c_html_a8e7148a913121150be60bd92a69f3cbf"><div class="ttname"><a href="bs__state__machine_8c.html#a8e7148a913121150be60bd92a69f3cbf">bs_state_machine_get_role</a></div><div class="ttdeci">bluesync_role_t bs_state_machine_get_role()</div><div class="ttdoc">Get the node role.</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8c_source.html#l00184">bs_state_machine.c:184</a></div></div>
<div class="ttc" id="ainclude_2bluesync_2bluesync_8h_html_ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a"><div class="ttname"><a href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a></div><div class="ttdeci">@ BLUESYNC_AUTHORITY_ROLE</div><div class="ttdef"><b>Definition</b> <a href="include_2bluesync_2bluesync_8h_source.html#l00031">bluesync.h:31</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a>, <a class="el" href="bs__state__machine_8c.html#a8e7148a913121150be60bd92a69f3cbf">bs_state_machine_get_role()</a>, and <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.</p>

<p class="reference">Referenced by <a class="el" href="include_2bluesync_2bluesync_8h.html#a523e1397bf700b1ab25182c0db4017c6">bluesync_start_net_sync_with_unix_epoch_us()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a4690b69707910bec50799ce1911f4af2_cgraph.png" border="0" usemap="#abluesync_8c_a4690b69707910bec50799ce1911f4af2_cgraph" alt=""/></div>
<map name="abluesync_8c_a4690b69707910bec50799ce1911f4af2_cgraph" id="abluesync_8c_a4690b69707910bec50799ce1911f4af2_cgraph">
<area shape="rect" title="Initiates a new BlueSync synchronization round as the time authority." alt="" coords="5,5,170,31"/>
<area shape="rect" href="bs__state__machine_8c.html#a8e7148a913121150be60bd92a69f3cbf" title="Get the node role." alt="" coords="218,5,398,31"/>
<area shape="poly" title=" " alt="" coords="170,16,202,16,202,21,170,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a4690b69707910bec50799ce1911f4af2_icgraph.png" border="0" usemap="#abluesync_8c_a4690b69707910bec50799ce1911f4af2_icgraph" alt=""/></div>
<map name="abluesync_8c_a4690b69707910bec50799ce1911f4af2_icgraph" id="abluesync_8c_a4690b69707910bec50799ce1911f4af2_icgraph">
<area shape="rect" title="Initiates a new BlueSync synchronization round as the time authority." alt="" coords="233,13,397,38"/>
<area shape="rect" href="bluesync_8c.html#a523e1397bf700b1ab25182c0db4017c6" title="Initiates a new BlueSync synchronization round as the time authority." alt="" coords="5,5,185,46"/>
<area shape="poly" title=" " alt="" coords="217,28,185,28,185,23,217,23"/>
</map>
</div>

</div>
</div>
<a id="a523e1397bf700b1ab25182c0db4017c6" name="a523e1397bf700b1ab25182c0db4017c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a523e1397bf700b1ab25182c0db4017c6">&#9670;&#160;</a></span>bluesync_start_net_sync_with_unix_epoch_us()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluesync_start_net_sync_with_unix_epoch_us </td>
          <td>(</td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>unix_epoch_us</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initiates a new BlueSync synchronization round as the time authority. </p>
<p>This function is called by the node acting as the time authority to start a network-wide synchronization round. It broadcasts timing information to all clients, allowing them to synchronize their local clocks based on the authority's reference time.</p>
<p>This function should only be called by devices assigned the <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">unix_epoch_ms</td><td>: unix epoch reference in us </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00666">666</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  666</span>                                                                       {</div>
<div class="line"><span class="lineno">  667</span>    <span class="keywordflow">if</span>(<a class="code hl_function" href="bs__state__machine_8c.html#a8e7148a913121150be60bd92a69f3cbf">bs_state_machine_get_role</a>() == <a class="code hl_enumvalue" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a>){</div>
<div class="line"><span class="lineno">  668</span>        <span class="comment">//set the new reference unix_epoch</span></div>
<div class="line"><span class="lineno">  669</span>        <a class="code hl_function" href="local__time_8c.html#a129e568095d5d38c8bff447987d28132">set_new_epoch_unix_ref</a>(unix_epoch_us);</div>
<div class="line"><span class="lineno">  670</span> </div>
<div class="line"><span class="lineno">  671</span>        <span class="comment">//start a new sync in the network</span></div>
<div class="line"><span class="lineno">  672</span>        <a class="code hl_function" href="#a4690b69707910bec50799ce1911f4af2">bluesync_start_net_sync</a>();</div>
<div class="line"><span class="lineno">  673</span>    }</div>
<div class="line"><span class="lineno">  674</span>}</div>
<div class="ttc" id="abluesync_8c_html_a4690b69707910bec50799ce1911f4af2"><div class="ttname"><a href="#a4690b69707910bec50799ce1911f4af2">bluesync_start_net_sync</a></div><div class="ttdeci">void bluesync_start_net_sync()</div><div class="ttdoc">Initiates a new BlueSync synchronization round as the time authority.</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00655">bluesync.c:655</a></div></div>
<div class="ttc" id="alocal__time_8c_html_a129e568095d5d38c8bff447987d28132"><div class="ttname"><a href="local__time_8c.html#a129e568095d5d38c8bff447987d28132">set_new_epoch_unix_ref</a></div><div class="ttdeci">void set_new_epoch_unix_ref(uint64_t epoch_ref_us)</div><div class="ttdoc">Set the new epoch unix ref value. Before the authority node starts a new network synchronisation,...</div><div class="ttdef"><b>Definition</b> <a href="local__time_8c_source.html#l00112">local_time.c:112</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="include_2bluesync_2bluesync_8h.html#ab90d76e2e617bc596e11fe05aa0b310baec375b3206ba429a0bec529a70b5da0a">BLUESYNC_AUTHORITY_ROLE</a>, <a class="el" href="#a4690b69707910bec50799ce1911f4af2">bluesync_start_net_sync()</a>, <a class="el" href="bs__state__machine_8c.html#a8e7148a913121150be60bd92a69f3cbf">bs_state_machine_get_role()</a>, and <a class="el" href="local__time_8c.html#a129e568095d5d38c8bff447987d28132">set_new_epoch_unix_ref()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a523e1397bf700b1ab25182c0db4017c6_cgraph.png" border="0" usemap="#abluesync_8c_a523e1397bf700b1ab25182c0db4017c6_cgraph" alt=""/></div>
<map name="abluesync_8c_a523e1397bf700b1ab25182c0db4017c6_cgraph" id="abluesync_8c_a523e1397bf700b1ab25182c0db4017c6_cgraph">
<area shape="rect" title="Initiates a new BlueSync synchronization round as the time authority." alt="" coords="5,48,185,89"/>
<area shape="rect" href="bluesync_8c.html#a4690b69707910bec50799ce1911f4af2" title="Initiates a new BlueSync synchronization round as the time authority." alt="" coords="233,5,397,31"/>
<area shape="poly" title=" " alt="" coords="185,45,241,32,242,38,186,51"/>
<area shape="rect" href="bs__state__machine_8c.html#a8e7148a913121150be60bd92a69f3cbf" title="Get the node role." alt="" coords="445,31,625,56"/>
<area shape="poly" title=" " alt="" coords="185,61,429,47,430,52,185,66"/>
<area shape="rect" href="local__time_8c.html#a129e568095d5d38c8bff447987d28132" title="Set the new epoch unix ref value. Before the authority node starts a new network synchronisation,..." alt="" coords="233,107,397,132"/>
<area shape="poly" title=" " alt="" coords="186,87,242,100,241,105,185,92"/>
<area shape="poly" title=" " alt="" coords="398,25,430,29,429,34,397,30"/>
</map>
</div>

</div>
</div>
<a id="a2889f789563da54af324b537c472ce07" name="a2889f789563da54af324b537c472ce07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2889f789563da54af324b537c472ce07">&#9670;&#160;</a></span>bluesync_store_current_burst()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bluesync_store_current_burst </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00221">221</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  221</span>                                          {</div>
<div class="line"><span class="lineno">  222</span>    k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  223</span>    {</div>
<div class="line"><span class="lineno">  224</span>        k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_history_mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  225</span>        {</div>
<div class="line"><span class="lineno">  226</span>            <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_history[<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_head] = <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv;</div>
<div class="line"><span class="lineno">  227</span>            <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_head = (<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_head + 1) % <a class="code hl_define" href="src_2bluesync_8h.html#a25a99552d2a6920e5bed8d46274ad5e4">BURST_WINDOWS_SIZE</a>;</div>
<div class="line"><span class="lineno">  228</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_count &lt; <a class="code hl_define" href="src_2bluesync_8h.html#a25a99552d2a6920e5bed8d46274ad5e4">BURST_WINDOWS_SIZE</a>) {</div>
<div class="line"><span class="lineno">  229</span>                <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_count++;</div>
<div class="line"><span class="lineno">  230</span>            }</div>
<div class="line"><span class="lineno">  231</span>        }</div>
<div class="line"><span class="lineno">  232</span>        k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_history_mutex);</div>
<div class="line"><span class="lineno">  233</span> </div>
<div class="line"><span class="lineno">  234</span>        k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_history_mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  235</span>        {</div>
<div class="line"><span class="lineno">  236</span>            <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_history[<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_head] = <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local;</div>
<div class="line"><span class="lineno">  237</span>            <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_head = (<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_head + 1) % <a class="code hl_define" href="src_2bluesync_8h.html#a25a99552d2a6920e5bed8d46274ad5e4">BURST_WINDOWS_SIZE</a>;</div>
<div class="line"><span class="lineno">  238</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_count &lt; <a class="code hl_define" href="src_2bluesync_8h.html#a25a99552d2a6920e5bed8d46274ad5e4">BURST_WINDOWS_SIZE</a>) {</div>
<div class="line"><span class="lineno">  239</span>                <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_count++;</div>
<div class="line"><span class="lineno">  240</span>            }</div>
<div class="line"><span class="lineno">  241</span>        }</div>
<div class="line"><span class="lineno">  242</span>        k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_history_mutex);</div>
<div class="line"><span class="lineno">  243</span>    }</div>
<div class="line"><span class="lineno">  244</span>    k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex);</div>
<div class="line"><span class="lineno">  245</span>}</div>
<div class="ttc" id="asrc_2bluesync_8h_html_a25a99552d2a6920e5bed8d46274ad5e4"><div class="ttname"><a href="src_2bluesync_8h.html#a25a99552d2a6920e5bed8d46274ad5e4">BURST_WINDOWS_SIZE</a></div><div class="ttdeci">#define BURST_WINDOWS_SIZE</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00034">bluesync.h:34</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="src_2bluesync_8h.html#a25a99552d2a6920e5bed8d46274ad5e4">BURST_WINDOWS_SIZE</a>, and <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.</p>

<p class="reference">Referenced by <a class="el" href="#aeca8c130ac37b793356125ef9ceebc22">end_sync_timeslot_process()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a2889f789563da54af324b537c472ce07_icgraph.png" border="0" usemap="#abluesync_8c_a2889f789563da54af324b537c472ce07_icgraph" alt=""/></div>
<map name="abluesync_8c_a2889f789563da54af324b537c472ce07_icgraph" id="abluesync_8c_a2889f789563da54af324b537c472ce07_icgraph">
<area shape="rect" title=" " alt="" coords="414,5,569,46"/>
<area shape="rect" href="bluesync_8c.html#aeca8c130ac37b793356125ef9ceebc22" title=" " alt="" coords="184,13,366,38"/>
<area shape="poly" title=" " alt="" coords="398,28,367,28,367,23,398,23"/>
<area shape="rect" href="bluesync_8c.html#a5e07e4c09110ee0eb81c51b0551a3101" title=" " alt="" coords="5,13,136,38"/>
<area shape="poly" title=" " alt="" coords="168,28,136,28,136,23,168,23"/>
</map>
</div>

</div>
</div>
<a id="a21bfb7737b28b272a313aac9db321aaf" name="a21bfb7737b28b272a313aac9db321aaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21bfb7737b28b272a313aac9db321aaf">&#9670;&#160;</a></span>bluesync_thread_fnt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bluesync_thread_fnt </td>
          <td>(</td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>arg1</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>arg2</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>arg3</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00585">585</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  586</span>{</div>
<div class="line"><span class="lineno">  587</span>    <span class="comment">// Define the event array</span></div>
<div class="line"><span class="lineno">  588</span>    <span class="keyword">struct </span>k_poll_event events[] = {</div>
<div class="line"><span class="lineno">  589</span>        K_POLL_EVENT_INITIALIZER(K_POLL_TYPE_SEM_AVAILABLE,</div>
<div class="line"><span class="lineno">  590</span>                                 K_POLL_MODE_NOTIFY_ONLY, </div>
<div class="line"><span class="lineno">  591</span>                                 &amp;bluesync_start_new_sync_sem),</div>
<div class="line"><span class="lineno">  592</span>        K_POLL_EVENT_INITIALIZER(K_POLL_TYPE_MSGQ_DATA_AVAILABLE, </div>
<div class="line"><span class="lineno">  593</span>                                 K_POLL_MODE_NOTIFY_ONLY, </div>
<div class="line"><span class="lineno">  594</span>                                 &amp;bluesync_rx_msgq),</div>
<div class="line"><span class="lineno">  595</span>        K_POLL_EVENT_INITIALIZER(K_POLL_TYPE_SEM_AVAILABLE, </div>
<div class="line"><span class="lineno">  596</span>                                 K_POLL_MODE_NOTIFY_ONLY, </div>
<div class="line"><span class="lineno">  597</span>                                 &amp;bluesync_end_sync_sem),</div>
<div class="line"><span class="lineno">  598</span>    };</div>
<div class="line"><span class="lineno">  599</span> </div>
<div class="line"><span class="lineno">  600</span>    <a class="code hl_function" href="bs__state__machine_8c.html#a53d51bafaea759128ff2e086cd372e6c">bs_state_machine_init</a>(&amp;<a class="code hl_variable" href="#a765d9ede025f5941a2bc0bf8e385f5f5">handlers</a>);</div>
<div class="line"><span class="lineno">  601</span>    <a class="code hl_function" href="#ae50107a7d06bfb4985ecbe2800d21bfe">bluesync_init_adv</a>();</div>
<div class="line"><span class="lineno">  602</span>    k_timer_init(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.drift_estimation_timer, <a class="code hl_function" href="#a1bede3fdaf14c6f6462fe25bca0df18b">drift_estimation_handler</a>, NULL);</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>    k_sem_take(&amp;bluesync_role_assign_sem, K_FOREVER);</div>
<div class="line"><span class="lineno">  605</span>    <a class="code hl_function" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run</a>(<a class="code hl_enumvalue" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4adbf8902d567f0cc7ca77232f46142a0d">EVENT_INIT</a>);</div>
<div class="line"><span class="lineno">  606</span>    </div>
<div class="line"><span class="lineno">  607</span>    <span class="keywordflow">while</span> (1)</div>
<div class="line"><span class="lineno">  608</span>    {</div>
<div class="line"><span class="lineno">  609</span>        k_poll(events, ARRAY_SIZE(events), K_FOREVER);</div>
<div class="line"><span class="lineno">  610</span> </div>
<div class="line"><span class="lineno">  611</span>        <span class="keywordflow">if</span>(events[0].state == K_POLL_STATE_SEM_AVAILABLE){</div>
<div class="line"><span class="lineno">  612</span>            k_sem_take(&amp;bluesync_start_new_sync_sem, K_NO_WAIT);</div>
<div class="line"><span class="lineno">  613</span>            <a class="code hl_function" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run</a>(<a class="code hl_enumvalue" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a983c464f73d021b52688758d3bd8eb70">EVENT_NEW_NET_SYNC</a>);</div>
<div class="line"><span class="lineno">  614</span>        }</div>
<div class="line"><span class="lineno">  615</span>        </div>
<div class="line"><span class="lineno">  616</span>        <span class="keywordflow">if</span>(events[1].state == K_POLL_STATE_MSGQ_DATA_AVAILABLE){</div>
<div class="line"><span class="lineno">  617</span>            <a class="code hl_function" href="#aa16c1884bb8d3e76f7e0b221988d8906">bluesync_scan_packet_process</a>();</div>
<div class="line"><span class="lineno">  618</span>        }</div>
<div class="line"><span class="lineno">  619</span> </div>
<div class="line"><span class="lineno">  620</span>        <span class="keywordflow">if</span>(events[2].state == K_POLL_STATE_SEM_AVAILABLE){</div>
<div class="line"><span class="lineno">  621</span>            k_sem_take(&amp;bluesync_end_sync_sem, K_NO_WAIT);</div>
<div class="line"><span class="lineno">  622</span>            <a class="code hl_function" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run</a>(<a class="code hl_enumvalue" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a22382eeae3e895eb32d6e9f7c1a1ad70">EVENT_SYNC_EXPIRED</a>);</div>
<div class="line"><span class="lineno">  623</span>        }</div>
<div class="line"><span class="lineno">  624</span> </div>
<div class="line"><span class="lineno">  625</span>        <span class="comment">// clear events</span></div>
<div class="line"><span class="lineno">  626</span>        events[0].state = K_POLL_STATE_NOT_READY;</div>
<div class="line"><span class="lineno">  627</span>        events[1].state = K_POLL_STATE_NOT_READY;</div>
<div class="line"><span class="lineno">  628</span>        events[2].state = K_POLL_STATE_NOT_READY;</div>
<div class="line"><span class="lineno">  629</span>    }</div>
<div class="line"><span class="lineno">  630</span>}</div>
<div class="ttc" id="abluesync_8c_html_a1bede3fdaf14c6f6462fe25bca0df18b"><div class="ttname"><a href="#a1bede3fdaf14c6f6462fe25bca0df18b">drift_estimation_handler</a></div><div class="ttdeci">void drift_estimation_handler(struct k_timer *timer_id)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00277">bluesync.c:277</a></div></div>
<div class="ttc" id="abluesync_8c_html_a765d9ede025f5941a2bc0bf8e385f5f5"><div class="ttname"><a href="#a765d9ede025f5941a2bc0bf8e385f5f5">handlers</a></div><div class="ttdeci">struct bs_sm_handlers handlers</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00574">bluesync.c:574</a></div></div>
<div class="ttc" id="abluesync_8c_html_aa16c1884bb8d3e76f7e0b221988d8906"><div class="ttname"><a href="#aa16c1884bb8d3e76f7e0b221988d8906">bluesync_scan_packet_process</a></div><div class="ttdeci">static void bluesync_scan_packet_process()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00281">bluesync.c:281</a></div></div>
<div class="ttc" id="abluesync_8c_html_ae50107a7d06bfb4985ecbe2800d21bfe"><div class="ttname"><a href="#ae50107a7d06bfb4985ecbe2800d21bfe">bluesync_init_adv</a></div><div class="ttdeci">static void bluesync_init_adv()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00528">bluesync.c:528</a></div></div>
<div class="ttc" id="abs__state__machine_8c_html_a53d51bafaea759128ff2e086cd372e6c"><div class="ttname"><a href="bs__state__machine_8c.html#a53d51bafaea759128ff2e086cd372e6c">bs_state_machine_init</a></div><div class="ttdeci">void bs_state_machine_init(struct bs_sm_handlers *handlers)</div><div class="ttdoc">Init the state machine by passing the list of callbacks.</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8c_source.html#l00152">bs_state_machine.c:152</a></div></div>
<div class="ttc" id="abs__state__machine_8h_html_acd366ca1267789a10e25d49c49451bb4a22382eeae3e895eb32d6e9f7c1a1ad70"><div class="ttname"><a href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a22382eeae3e895eb32d6e9f7c1a1ad70">EVENT_SYNC_EXPIRED</a></div><div class="ttdeci">@ EVENT_SYNC_EXPIRED</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8h_source.html#l00051">bs_state_machine.h:51</a></div></div>
<div class="ttc" id="abs__state__machine_8h_html_acd366ca1267789a10e25d49c49451bb4a983c464f73d021b52688758d3bd8eb70"><div class="ttname"><a href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a983c464f73d021b52688758d3bd8eb70">EVENT_NEW_NET_SYNC</a></div><div class="ttdeci">@ EVENT_NEW_NET_SYNC</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8h_source.html#l00055">bs_state_machine.h:55</a></div></div>
<div class="ttc" id="abs__state__machine_8h_html_acd366ca1267789a10e25d49c49451bb4adbf8902d567f0cc7ca77232f46142a0d"><div class="ttname"><a href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4adbf8902d567f0cc7ca77232f46142a0d">EVENT_INIT</a></div><div class="ttdeci">@ EVENT_INIT</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8h_source.html#l00049">bs_state_machine.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#ae50107a7d06bfb4985ecbe2800d21bfe">bluesync_init_adv()</a>, <a class="el" href="#aa16c1884bb8d3e76f7e0b221988d8906">bluesync_scan_packet_process()</a>, <a class="el" href="bs__state__machine_8c.html#a53d51bafaea759128ff2e086cd372e6c">bs_state_machine_init()</a>, <a class="el" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run()</a>, <a class="el" href="#a1bede3fdaf14c6f6462fe25bca0df18b">drift_estimation_handler()</a>, <a class="el" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4adbf8902d567f0cc7ca77232f46142a0d">EVENT_INIT</a>, <a class="el" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a983c464f73d021b52688758d3bd8eb70">EVENT_NEW_NET_SYNC</a>, <a class="el" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a22382eeae3e895eb32d6e9f7c1a1ad70">EVENT_SYNC_EXPIRED</a>, <a class="el" href="#a765d9ede025f5941a2bc0bf8e385f5f5">handlers</a>, and <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.</p>

<p class="reference">Referenced by <a class="el" href="include_2bluesync_2bluesync_8h.html#a722991b2960886eaf99895ba3395176f">bluesync_init()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a21bfb7737b28b272a313aac9db321aaf_cgraph.png" border="0" usemap="#abluesync_8c_a21bfb7737b28b272a313aac9db321aaf_cgraph" alt=""/></div>
<map name="abluesync_8c_a21bfb7737b28b272a313aac9db321aaf_cgraph" id="abluesync_8c_a21bfb7737b28b272a313aac9db321aaf_cgraph">
<area shape="rect" title=" " alt="" coords="5,120,143,146"/>
<area shape="rect" href="bluesync_8c.html#ae50107a7d06bfb4985ecbe2800d21bfe" title=" " alt="" coords="208,5,332,31"/>
<area shape="poly" title=" " alt="" coords="87,117,131,80,189,41,203,35,205,39,192,46,134,84,91,122"/>
<area shape="rect" href="bluesync_8c.html#aa16c1884bb8d3e76f7e0b221988d8906" title=" " alt="" coords="194,55,347,96"/>
<area shape="poly" title=" " alt="" coords="120,117,183,98,185,103,121,122"/>
<area shape="rect" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751" title="Annonce an event to the state machine." alt="" coords="410,120,562,146"/>
<area shape="poly" title=" " alt="" coords="143,130,394,130,394,136,143,136"/>
<area shape="rect" href="bs__state__machine_8c.html#a53d51bafaea759128ff2e086cd372e6c" title="Init the state machine by passing the list of callbacks." alt="" coords="195,171,346,196"/>
<area shape="poly" title=" " alt="" coords="127,144,204,164,202,169,126,149"/>
<area shape="rect" href="bluesync_8c.html#a1bede3fdaf14c6f6462fe25bca0df18b" title=" " alt="" coords="191,220,350,246"/>
<area shape="poly" title=" " alt="" coords="94,144,137,175,192,206,205,212,202,217,189,211,134,179,90,148"/>
<area shape="rect" href="bluesync_8c.html#a73d14c438328054c5c14b084b3befe54" title=" " alt="" coords="398,5,573,31"/>
<area shape="poly" title=" " alt="" coords="347,53,419,33,420,38,348,58"/>
<area shape="rect" href="bs__state__machine_8c.html#a4c0f6002608b7ff932018f3570981ee8" title="Get the current state." alt="" coords="410,55,562,96"/>
<area shape="poly" title=" " alt="" coords="347,73,394,73,394,78,347,78"/>
<area shape="poly" title=" " alt="" coords="348,93,420,113,419,118,347,98"/>
<area shape="rect" href="bluesync__bitfields_8c.html#a835ad1bade618a08ef4ca2a30d8fc470" title="Set a specific bit in the bitfield." alt="" coords="628,5,689,31"/>
<area shape="poly" title=" " alt="" coords="574,16,613,16,613,21,574,21"/>
<area shape="rect" href="bs__state__machine_8c.html#a11a8e1f6a177592af3f6958c481bcf79" title=" " alt="" coords="621,120,696,146"/>
<area shape="poly" title=" " alt="" coords="562,130,606,130,606,136,562,136"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a21bfb7737b28b272a313aac9db321aaf_icgraph.png" border="0" usemap="#abluesync_8c_a21bfb7737b28b272a313aac9db321aaf_icgraph" alt=""/></div>
<map name="abluesync_8c_a21bfb7737b28b272a313aac9db321aaf_icgraph" id="abluesync_8c_a21bfb7737b28b272a313aac9db321aaf_icgraph">
<area shape="rect" title=" " alt="" coords="150,5,287,31"/>
<area shape="rect" href="bluesync_8c.html#a722991b2960886eaf99895ba3395176f" title="Initializes the BlueSync time synchronization module." alt="" coords="5,5,102,31"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="aa93dc27074f8b822db6118b39d80207c" name="aa93dc27074f8b822db6118b39d80207c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa93dc27074f8b822db6118b39d80207c">&#9670;&#160;</a></span>bs_adv_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bs_adv_handler </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00562">562</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  562</span>                         {</div>
<div class="line"><span class="lineno">  563</span>    LOG_DBG(<span class="stringliteral">&quot;method: %s&quot;</span>,__func__);</div>
<div class="line"><span class="lineno">  564</span> </div>
<div class="line"><span class="lineno">  565</span>    <a class="code hl_function" href="#ac645e5a0d11afc2847855b7697f55c63">bluesync_reset_param</a>();</div>
<div class="line"><span class="lineno">  566</span>    <a class="code hl_function" href="#a9f8da33a076ee25b6c18d4085dd2d35e">bluesync_adv_process</a>();</div>
<div class="line"><span class="lineno">  567</span>    <a class="code hl_function" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run</a>(<a class="code hl_enumvalue" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a0c31a974e8f82a9d79ad0c042a225fc9">EVENT_ADV_EXPIRED</a>);</div>
<div class="line"><span class="lineno">  568</span>}</div>
<div class="ttc" id="abluesync_8c_html_a9f8da33a076ee25b6c18d4085dd2d35e"><div class="ttname"><a href="#a9f8da33a076ee25b6c18d4085dd2d35e">bluesync_adv_process</a></div><div class="ttdeci">static void bluesync_adv_process()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00499">bluesync.c:499</a></div></div>
<div class="ttc" id="abluesync_8c_html_ac645e5a0d11afc2847855b7697f55c63"><div class="ttname"><a href="#ac645e5a0d11afc2847855b7697f55c63">bluesync_reset_param</a></div><div class="ttdeci">static void bluesync_reset_param()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00129">bluesync.c:129</a></div></div>
<div class="ttc" id="abs__state__machine_8h_html_acd366ca1267789a10e25d49c49451bb4a0c31a974e8f82a9d79ad0c042a225fc9"><div class="ttname"><a href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a0c31a974e8f82a9d79ad0c042a225fc9">EVENT_ADV_EXPIRED</a></div><div class="ttdeci">@ EVENT_ADV_EXPIRED</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8h_source.html#l00054">bs_state_machine.h:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#a9f8da33a076ee25b6c18d4085dd2d35e">bluesync_adv_process()</a>, <a class="el" href="#ac645e5a0d11afc2847855b7697f55c63">bluesync_reset_param()</a>, <a class="el" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run()</a>, and <a class="el" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a0c31a974e8f82a9d79ad0c042a225fc9">EVENT_ADV_EXPIRED</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_aa93dc27074f8b822db6118b39d80207c_cgraph.png" border="0" usemap="#abluesync_8c_aa93dc27074f8b822db6118b39d80207c_cgraph" alt=""/></div>
<map name="abluesync_8c_aa93dc27074f8b822db6118b39d80207c_cgraph" id="abluesync_8c_aa93dc27074f8b822db6118b39d80207c_cgraph">
<area shape="rect" title=" " alt="" coords="5,55,118,80"/>
<area shape="rect" href="bluesync_8c.html#a9f8da33a076ee25b6c18d4085dd2d35e" title=" " alt="" coords="166,5,319,31"/>
<area shape="poly" title=" " alt="" coords="111,51,177,33,178,38,112,57"/>
<area shape="rect" href="bluesync_8c.html#ac645e5a0d11afc2847855b7697f55c63" title=" " alt="" coords="167,55,318,80"/>
<area shape="poly" title=" " alt="" coords="118,65,151,65,151,70,118,70"/>
<area shape="rect" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751" title="Annonce an event to the state machine." alt="" coords="166,104,318,130"/>
<area shape="poly" title=" " alt="" coords="112,78,178,97,177,102,111,84"/>
<area shape="rect" href="bluesync_8c.html#a1701ea77f09d4dc607b1b5e92b474cf8" title=" " alt="" coords="391,5,526,31"/>
<area shape="poly" title=" " alt="" coords="320,16,375,16,375,21,320,21"/>
<area shape="rect" href="bluesync_8c.html#a1fcdc17b3a214717b39e519ce5ca4dd8" title=" " alt="" coords="598,5,752,31"/>
<area shape="poly" title=" " alt="" coords="526,16,583,16,583,21,526,21"/>
<area shape="rect" href="bluesync_8c.html#ab62b52cc2c05b0b6f1d1fd6816b4f43c" title=" " alt="" coords="367,55,550,80"/>
<area shape="poly" title=" " alt="" coords="318,65,351,65,351,70,318,70"/>
<area shape="rect" href="bs__state__machine_8c.html#a11a8e1f6a177592af3f6958c481bcf79" title=" " alt="" coords="422,104,496,130"/>
<area shape="poly" title=" " alt="" coords="319,114,406,114,406,120,319,120"/>
</map>
</div>

</div>
</div>
<a id="a0899d4461371eab18cec52ab2673600a" name="a0899d4461371eab18cec52ab2673600a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0899d4461371eab18cec52ab2673600a">&#9670;&#160;</a></span>bs_scan_wait_for_sync_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bs_scan_wait_for_sync_handler </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00538">538</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  538</span>                                        {</div>
<div class="line"><span class="lineno">  539</span>    LOG_DBG(<span class="stringliteral">&quot;method: %s&quot;</span>,__func__);</div>
<div class="line"><span class="lineno">  540</span>    <a class="code hl_function" href="#ac645e5a0d11afc2847855b7697f55c63">bluesync_reset_param</a>();</div>
<div class="line"><span class="lineno">  541</span> </div>
<div class="line"><span class="lineno">  542</span>    <a class="code hl_function" href="#a3281e1132ea7be337932f349e4dd0103">bluesync_scan_start</a>();</div>
<div class="line"><span class="lineno">  543</span>}</div>
<div class="ttc" id="abluesync_8c_html_a3281e1132ea7be337932f349e4dd0103"><div class="ttname"><a href="#a3281e1132ea7be337932f349e4dd0103">bluesync_scan_start</a></div><div class="ttdeci">static void bluesync_scan_start()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00469">bluesync.c:469</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#ac645e5a0d11afc2847855b7697f55c63">bluesync_reset_param()</a>, and <a class="el" href="#a3281e1132ea7be337932f349e4dd0103">bluesync_scan_start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a0899d4461371eab18cec52ab2673600a_cgraph.png" border="0" usemap="#abluesync_8c_a0899d4461371eab18cec52ab2673600a_cgraph" alt=""/></div>
<map name="abluesync_8c_a0899d4461371eab18cec52ab2673600a_cgraph" id="abluesync_8c_a0899d4461371eab18cec52ab2673600a_cgraph">
<area shape="rect" title=" " alt="" coords="5,23,163,64"/>
<area shape="rect" href="bluesync_8c.html#ac645e5a0d11afc2847855b7697f55c63" title=" " alt="" coords="211,5,362,31"/>
<area shape="poly" title=" " alt="" coords="163,31,195,27,196,32,163,36"/>
<area shape="rect" href="bluesync_8c.html#a3281e1132ea7be337932f349e4dd0103" title=" " alt="" coords="216,55,356,80"/>
<area shape="poly" title=" " alt="" coords="163,50,201,55,200,60,163,55"/>
<area shape="rect" href="bluesync_8c.html#ab62b52cc2c05b0b6f1d1fd6816b4f43c" title=" " alt="" coords="410,5,593,31"/>
<area shape="poly" title=" " alt="" coords="363,16,394,16,394,21,363,21"/>
<area shape="rect" href="bluesync_8c.html#accff9034edc5962a24e70e68901a3ca8" title=" " alt="" coords="458,55,546,80"/>
<area shape="poly" title=" " alt="" coords="357,65,442,65,442,70,357,70"/>
<area shape="rect" href="bluesync_8c.html#a5786970c5cd6649e57c988641e21c92b" title=" " alt="" coords="641,80,712,106"/>
<area shape="poly" title=" " alt="" coords="341,78,410,90,526,95,626,93,626,99,526,101,410,95,340,84"/>
<area shape="poly" title=" " alt="" coords="547,71,626,83,626,88,546,77"/>
<area shape="rect" href="bluesync_8c.html#ac1f14e07918b159fe1dc8277a7d2c14e" title=" " alt="" coords="760,80,913,106"/>
<area shape="poly" title=" " alt="" coords="712,90,744,90,744,96,712,96"/>
<area shape="rect" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0" title="Get the logical time ticks value. This is the corrected ticks value after synchronisation...." alt="" coords="961,80,1111,106"/>
<area shape="poly" title=" " alt="" coords="913,90,945,90,945,96,913,96"/>
<area shape="rect" href="local__time_8c.html#a3de0db4d23103b2a5c83f9b27b39cf85" title=" " alt="" coords="1159,80,1317,106"/>
<area shape="poly" title=" " alt="" coords="1112,90,1144,90,1144,96,1112,96"/>
</map>
</div>

</div>
</div>
<a id="a36f79ba7fa7845415e9a15c49cf671f0" name="a36f79ba7fa7845415e9a15c49cf671f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36f79ba7fa7845415e9a15c49cf671f0">&#9670;&#160;</a></span>bs_stop_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bs_stop_handler </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00570">570</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  570</span>                          {</div>
<div class="line"><span class="lineno">  571</span>    LOG_DBG(<span class="stringliteral">&quot;method: %s&quot;</span>,__func__);</div>
<div class="line"><span class="lineno">  572</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="aad71b25f3b8904dfbb3ca4b51c556b1c" name="aad71b25f3b8904dfbb3ca4b51c556b1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad71b25f3b8904dfbb3ca4b51c556b1c">&#9670;&#160;</a></span>bs_sync_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bs_sync_handler </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00545">545</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  545</span>                      {</div>
<div class="line"><span class="lineno">  546</span>    LOG_DBG(<span class="stringliteral">&quot;method: %s&quot;</span>,__func__);</div>
<div class="line"><span class="lineno">  547</span>}</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5e07e4c09110ee0eb81c51b0551a3101" name="a5e07e4c09110ee0eb81c51b0551a3101"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e07e4c09110ee0eb81c51b0551a3101">&#9670;&#160;</a></span>bs_update_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void bs_update_handler </td>
          <td>(</td>
          <td class="paramtype">void</td>          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00549">549</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  549</span>                            {</div>
<div class="line"><span class="lineno">  550</span>    LOG_DBG(<span class="stringliteral">&quot;method: %s&quot;</span>,__func__);</div>
<div class="line"><span class="lineno">  551</span>    <a class="code hl_function" href="#a9eed4afd2b78259f02fa0fca3db0f4fa">bluesync_scan_stop</a>();</div>
<div class="line"><span class="lineno">  552</span>    <a class="code hl_enumeration" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6">bluesync_status_t</a> status = <a class="code hl_function" href="#aeca8c130ac37b793356125ef9ceebc22">end_sync_timeslot_process</a>();</div>
<div class="line"><span class="lineno">  553</span> </div>
<div class="line"><span class="lineno">  554</span>    <span class="keywordflow">if</span>(status != <a class="code hl_enumvalue" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a>){</div>
<div class="line"><span class="lineno">  555</span>        <a class="code hl_function" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run</a>(<a class="code hl_enumvalue" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a3c97098276dbcb959317b1ca1d54c334">EVENT_UPDATE_FAILED</a>);</div>
<div class="line"><span class="lineno">  556</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  557</span>    }</div>
<div class="line"><span class="lineno">  558</span> </div>
<div class="line"><span class="lineno">  559</span>    <a class="code hl_function" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run</a>(<a class="code hl_enumvalue" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4aea347320aba635e861e62fb8a269cb61">EVENT_UPDATE_SUCCESS</a>);</div>
<div class="line"><span class="lineno">  560</span>}</div>
<div class="ttc" id="abluesync_8c_html_a9eed4afd2b78259f02fa0fca3db0f4fa"><div class="ttname"><a href="#a9eed4afd2b78259f02fa0fca3db0f4fa">bluesync_scan_stop</a></div><div class="ttdeci">static void bluesync_scan_stop()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00482">bluesync.c:482</a></div></div>
<div class="ttc" id="abluesync_8c_html_aeca8c130ac37b793356125ef9ceebc22"><div class="ttname"><a href="#aeca8c130ac37b793356125ef9ceebc22">end_sync_timeslot_process</a></div><div class="ttdeci">static bluesync_status_t end_sync_timeslot_process()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00247">bluesync.c:247</a></div></div>
<div class="ttc" id="abs__state__machine_8h_html_acd366ca1267789a10e25d49c49451bb4a3c97098276dbcb959317b1ca1d54c334"><div class="ttname"><a href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a3c97098276dbcb959317b1ca1d54c334">EVENT_UPDATE_FAILED</a></div><div class="ttdeci">@ EVENT_UPDATE_FAILED</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8h_source.html#l00053">bs_state_machine.h:53</a></div></div>
<div class="ttc" id="abs__state__machine_8h_html_acd366ca1267789a10e25d49c49451bb4aea347320aba635e861e62fb8a269cb61"><div class="ttname"><a href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4aea347320aba635e861e62fb8a269cb61">EVENT_UPDATE_SUCCESS</a></div><div class="ttdeci">@ EVENT_UPDATE_SUCCESS</div><div class="ttdef"><b>Definition</b> <a href="bs__state__machine_8h_source.html#l00052">bs_state_machine.h:52</a></div></div>
<div class="ttc" id="asrc_2bluesync_8h_html_a17ea68732589c685ea84dd62dd615ce6"><div class="ttname"><a href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6">bluesync_status_t</a></div><div class="ttdeci">bluesync_status_t</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00038">bluesync.h:38</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#a9eed4afd2b78259f02fa0fca3db0f4fa">bluesync_scan_stop()</a>, <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a>, <a class="el" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751">bs_state_machine_run()</a>, <a class="el" href="#aeca8c130ac37b793356125ef9ceebc22">end_sync_timeslot_process()</a>, <a class="el" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4a3c97098276dbcb959317b1ca1d54c334">EVENT_UPDATE_FAILED</a>, and <a class="el" href="bs__state__machine_8h.html#acd366ca1267789a10e25d49c49451bb4aea347320aba635e861e62fb8a269cb61">EVENT_UPDATE_SUCCESS</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a5e07e4c09110ee0eb81c51b0551a3101_cgraph.png" border="0" usemap="#abluesync_8c_a5e07e4c09110ee0eb81c51b0551a3101_cgraph" alt=""/></div>
<map name="abluesync_8c_a5e07e4c09110ee0eb81c51b0551a3101_cgraph" id="abluesync_8c_a5e07e4c09110ee0eb81c51b0551a3101_cgraph">
<area shape="rect" title=" " alt="" coords="5,55,136,80"/>
<area shape="rect" href="bluesync_8c.html#a9eed4afd2b78259f02fa0fca3db0f4fa" title=" " alt="" coords="205,5,344,31"/>
<area shape="poly" title=" " alt="" coords="126,51,203,33,204,38,128,57"/>
<area shape="rect" href="bs__state__machine_8c.html#ad709ebb4c9b77535d7773f11f52dd751" title="Annonce an event to the state machine." alt="" coords="199,55,351,80"/>
<area shape="poly" title=" " alt="" coords="136,65,183,65,183,70,136,70"/>
<area shape="rect" href="bluesync_8c.html#aeca8c130ac37b793356125ef9ceebc22" title=" " alt="" coords="184,136,366,162"/>
<area shape="poly" title=" " alt="" coords="106,78,227,127,225,132,104,83"/>
<area shape="rect" href="bs__state__machine_8c.html#a11a8e1f6a177592af3f6958c481bcf79" title=" " alt="" coords="460,21,534,47"/>
<area shape="poly" title=" " alt="" coords="351,53,444,39,445,45,352,59"/>
<area shape="rect" href="local__time_8c.html#a1f75d52c54a0eb4db7c92090a7f7eefd" title="Apply the synchronisation parameters. Once the LR is made, The result of it gives a drift value (slop..." alt="" coords="436,251,557,276"/>
<area shape="poly" title=" " alt="" coords="295,160,347,197,415,236,432,243,429,248,413,241,344,201,292,164"/>
<area shape="rect" href="bluesync_8c.html#a2889f789563da54af324b537c472ce07" title=" " alt="" coords="419,71,574,112"/>
<area shape="poly" title=" " alt="" coords="327,133,403,113,404,118,328,138"/>
<area shape="rect" href="bluesync_8c.html#a7d68b33b4d68345d2730953869464796" title=" " alt="" coords="414,136,579,162"/>
<area shape="poly" title=" " alt="" coords="367,146,398,146,398,152,367,152"/>
<area shape="rect" href="bluesync__statistic__bsim_8c.html#af70055b0e9d7188bda4b47b2d95b6a82" title="Analyze and log synchronization statistics based on a series of timestamps." alt="" coords="434,186,559,226"/>
<area shape="poly" title=" " alt="" coords="328,160,420,184,418,189,327,165"/>
<area shape="rect" href="bluesync__bitfields_8c.html#a4b4ea7003ba767e26c5baa3a0cfd790e" title="Perform a bitwise AND between two bitfields and store the result." alt="" coords="627,136,769,162"/>
<area shape="poly" title=" " alt="" coords="580,146,612,146,612,152,580,152"/>
<area shape="rect" href="bluesync__bitfields_8c.html#aad862c7d519b57cfd824981a104ec796" title="Check if a specific bit is set in the bitfield." alt="" coords="659,185,737,211"/>
<area shape="poly" title=" " alt="" coords="553,160,645,183,644,188,552,165"/>
<area shape="poly" title=" " alt="" coords="559,186,635,164,636,169,561,191"/>
<area shape="poly" title=" " alt="" coords="560,201,644,198,644,203,560,206"/>
<area shape="rect" href="bluesync__statistic__bsim_8c.html#ac6bf4c0528a00565887dc67de2a01676" title=" " alt="" coords="635,235,761,276"/>
<area shape="poly" title=" " alt="" coords="560,219,621,234,620,239,559,224"/>
</map>
</div>

</div>
</div>
<a id="accff9034edc5962a24e70e68901a3ca8" name="accff9034edc5962a24e70e68901a3ca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#accff9034edc5962a24e70e68901a3ca8">&#9670;&#160;</a></span>bt_scan_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bt_scan_cb </td>
          <td>(</td>
          <td class="paramtype">const bt_addr_le_t *</td>          <td class="paramname"><span class="paramname"><em>addr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t</td>          <td class="paramname"><span class="paramname"><em>rssi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>adv_type</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct net_buf_simple *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00461">461</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  462</span>                                                 {</div>
<div class="line"><span class="lineno">  463</span>    <span class="keywordflow">if</span> (adv_type == BT_GAP_ADV_TYPE_EXT_ADV){</div>
<div class="line"><span class="lineno">  464</span>        <a class="code hl_function" href="#a5786970c5cd6649e57c988641e21c92b">scan_cb</a>(addr, rssi, buf);</div>
<div class="line"><span class="lineno">  465</span>    }</div>
<div class="line"><span class="lineno">  466</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#a5786970c5cd6649e57c988641e21c92b">scan_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a3281e1132ea7be337932f349e4dd0103">bluesync_scan_start()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_accff9034edc5962a24e70e68901a3ca8_cgraph.png" border="0" usemap="#abluesync_8c_accff9034edc5962a24e70e68901a3ca8_cgraph" alt=""/></div>
<map name="abluesync_8c_accff9034edc5962a24e70e68901a3ca8_cgraph" id="abluesync_8c_accff9034edc5962a24e70e68901a3ca8_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,94,31"/>
<area shape="rect" href="bluesync_8c.html#a5786970c5cd6649e57c988641e21c92b" title=" " alt="" coords="142,5,212,31"/>
<area shape="poly" title=" " alt="" coords="94,16,126,16,126,21,94,21"/>
<area shape="rect" href="bluesync_8c.html#ac1f14e07918b159fe1dc8277a7d2c14e" title=" " alt="" coords="260,5,413,31"/>
<area shape="poly" title=" " alt="" coords="213,16,245,16,245,21,213,21"/>
<area shape="rect" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0" title="Get the logical time ticks value. This is the corrected ticks value after synchronisation...." alt="" coords="461,5,612,31"/>
<area shape="poly" title=" " alt="" coords="414,16,445,16,445,21,414,21"/>
<area shape="rect" href="local__time_8c.html#a3de0db4d23103b2a5c83f9b27b39cf85" title=" " alt="" coords="660,5,817,31"/>
<area shape="poly" title=" " alt="" coords="612,16,644,16,644,21,612,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_accff9034edc5962a24e70e68901a3ca8_icgraph.png" border="0" usemap="#abluesync_8c_accff9034edc5962a24e70e68901a3ca8_icgraph" alt=""/></div>
<map name="abluesync_8c_accff9034edc5962a24e70e68901a3ca8_icgraph" id="abluesync_8c_accff9034edc5962a24e70e68901a3ca8_icgraph">
<area shape="rect" title=" " alt="" coords="399,13,487,38"/>
<area shape="rect" href="bluesync_8c.html#a3281e1132ea7be337932f349e4dd0103" title=" " alt="" coords="211,13,351,38"/>
<area shape="poly" title=" " alt="" coords="383,28,351,28,351,23,383,23"/>
<area shape="rect" href="bluesync_8c.html#a0899d4461371eab18cec52ab2673600a" title=" " alt="" coords="5,5,163,46"/>
<area shape="poly" title=" " alt="" coords="195,28,163,28,163,23,195,23"/>
</map>
</div>

</div>
</div>
<a id="a7d68b33b4d68345d2730953869464796" name="a7d68b33b4d68345d2730953869464796"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d68b33b4d68345d2730953869464796">&#9670;&#160;</a></span>calculate_lr_from_history()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6">bluesync_status_t</a> calculate_lr_from_history </td>
          <td>(</td>
          <td class="paramtype">double *</td>          <td class="paramname"><span class="paramname"><em>slope</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *</td>          <td class="paramname"><span class="paramname"><em>offset</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t</td>          <td class="paramname"><span class="paramname"><em>min_nb_timestamp</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00144">144</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  148</span>{</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>    <span class="keywordtype">double</span> sum_x = 0, sum_y = 0;</div>
<div class="line"><span class="lineno">  151</span>    <span class="keywordtype">size_t</span> n = 0;</div>
<div class="line"><span class="lineno">  152</span> </div>
<div class="line"><span class="lineno">  153</span>    <span class="comment">// Accumulate</span></div>
<div class="line"><span class="lineno">  154</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> burst = 0; burst &lt; <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_count; burst++) {</div>
<div class="line"><span class="lineno">  155</span>        <a class="code hl_struct" href="structbluesync__timestamps__t.html">bluesync_timestamps_t</a> *rcv = &amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_history[burst];</div>
<div class="line"><span class="lineno">  156</span>        <a class="code hl_struct" href="structbluesync__timestamps__t.html">bluesync_timestamps_t</a> *<a class="code hl_variable" href="local__time_8c.html#aebe0d3778275cefebe36f5d35011bd93">local</a> = &amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_history[burst];</div>
<div class="line"><span class="lineno">  157</span> </div>
<div class="line"><span class="lineno">  158</span>        uint8_t burst_bitfield[<a class="code hl_define" href="src_2bluesync_8h.html#a6a25c78511f16e4884068a26823773e6">NB_BYTES_BITFIELD</a>] = {0};</div>
<div class="line"><span class="lineno">  159</span>        <a class="code hl_function" href="bluesync__bitfields_8c.html#a4b4ea7003ba767e26c5baa3a0cfd790e">bitwise_and_bitfields</a>(burst_bitfield, rcv, <a class="code hl_variable" href="local__time_8c.html#aebe0d3778275cefebe36f5d35011bd93">local</a>, <a class="code hl_define" href="src_2bluesync_8h.html#a6a25c78511f16e4884068a26823773e6">NB_BYTES_BITFIELD</a>);</div>
<div class="line"><span class="lineno">  160</span> </div>
<div class="line"><span class="lineno">  161</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>; i++) {</div>
<div class="line"><span class="lineno">  162</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="bluesync__bitfields_8c.html#aad862c7d519b57cfd824981a104ec796">is_bit_set</a>(burst_bitfield, i)) {</div>
<div class="line"><span class="lineno">  163</span>                sum_x += (double)<a class="code hl_variable" href="local__time_8c.html#aebe0d3778275cefebe36f5d35011bd93">local</a>-&gt;timer_ticks[i];</div>
<div class="line"><span class="lineno">  164</span>                sum_y += (double)rcv-&gt;<a class="code hl_variable" href="structbluesync__timestamps__t.html#a70965a4da9ecd868bff788b9624fccd6">timer_ticks</a>[i];</div>
<div class="line"><span class="lineno">  165</span>                n++;</div>
<div class="line"><span class="lineno">  166</span>            }</div>
<div class="line"><span class="lineno">  167</span>        }</div>
<div class="line"><span class="lineno">  168</span>    }</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    <span class="keywordflow">if</span> (n == 0) {</div>
<div class="line"><span class="lineno">  171</span>        LOG_ERR(<span class="stringliteral">&quot;No valid data in history for regression.&quot;</span>);</div>
<div class="line"><span class="lineno">  172</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6a97724cdbb941a95aaff725c49f33578c">BLUESYNC_NO_VALID_DATA_STATUS</a>;</div>
<div class="line"><span class="lineno">  173</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (n &lt; min_nb_timestamp) {</div>
<div class="line"><span class="lineno">  174</span>        LOG_ERR(<span class="stringliteral">&quot;Not enough valid samples in history (min = %zu, got = %zu)&quot;</span>, min_nb_timestamp, n);</div>
<div class="line"><span class="lineno">  175</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6a76f13fc52e1ef1a3c676878ae9cc78c4">BLUESYNC_NO_ENOUGH_DATA_STATUS</a>;</div>
<div class="line"><span class="lineno">  176</span>    }</div>
<div class="line"><span class="lineno">  177</span> </div>
<div class="line"><span class="lineno">  178</span>    <span class="keywordtype">double</span> mean_x = sum_x / n;</div>
<div class="line"><span class="lineno">  179</span>    <span class="keywordtype">double</span> mean_y = sum_y / n;</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>    <span class="keywordtype">double</span> sum_cov = 0.0;</div>
<div class="line"><span class="lineno">  182</span>    <span class="keywordtype">double</span> sum_var = 0.0;</div>
<div class="line"><span class="lineno">  183</span> </div>
<div class="line"><span class="lineno">  184</span>    <span class="comment">// Now second pass: accumulate covariance and variance</span></div>
<div class="line"><span class="lineno">  185</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> burst = 0; burst &lt; <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_count; burst++) {</div>
<div class="line"><span class="lineno">  186</span>        <a class="code hl_struct" href="structbluesync__timestamps__t.html">bluesync_timestamps_t</a> *rcv = &amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_history[burst];</div>
<div class="line"><span class="lineno">  187</span>        <a class="code hl_struct" href="structbluesync__timestamps__t.html">bluesync_timestamps_t</a> *<a class="code hl_variable" href="local__time_8c.html#aebe0d3778275cefebe36f5d35011bd93">local</a> = &amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_history[burst];</div>
<div class="line"><span class="lineno">  188</span> </div>
<div class="line"><span class="lineno">  189</span>        uint8_t burst_bitfield[<a class="code hl_define" href="src_2bluesync_8h.html#a6a25c78511f16e4884068a26823773e6">NB_BYTES_BITFIELD</a>] = {0};</div>
<div class="line"><span class="lineno">  190</span>        <a class="code hl_function" href="bluesync__bitfields_8c.html#a4b4ea7003ba767e26c5baa3a0cfd790e">bitwise_and_bitfields</a>(burst_bitfield, rcv, <a class="code hl_variable" href="local__time_8c.html#aebe0d3778275cefebe36f5d35011bd93">local</a>, <a class="code hl_define" href="src_2bluesync_8h.html#a6a25c78511f16e4884068a26823773e6">NB_BYTES_BITFIELD</a>);</div>
<div class="line"><span class="lineno">  191</span> </div>
<div class="line"><span class="lineno">  192</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>; i++) {</div>
<div class="line"><span class="lineno">  193</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="bluesync__bitfields_8c.html#aad862c7d519b57cfd824981a104ec796">is_bit_set</a>(burst_bitfield, i)) {</div>
<div class="line"><span class="lineno">  194</span>                <span class="keywordtype">double</span> x = (double)<a class="code hl_variable" href="local__time_8c.html#aebe0d3778275cefebe36f5d35011bd93">local</a>-&gt;timer_ticks[i] - mean_x;</div>
<div class="line"><span class="lineno">  195</span>                <span class="keywordtype">double</span> y = (double)rcv-&gt;<a class="code hl_variable" href="structbluesync__timestamps__t.html#a70965a4da9ecd868bff788b9624fccd6">timer_ticks</a>[i] - mean_y;</div>
<div class="line"><span class="lineno">  196</span>                sum_cov += x * y;</div>
<div class="line"><span class="lineno">  197</span>                sum_var += x * x;</div>
<div class="line"><span class="lineno">  198</span>            }</div>
<div class="line"><span class="lineno">  199</span>        }</div>
<div class="line"><span class="lineno">  200</span>    }</div>
<div class="line"><span class="lineno">  201</span> </div>
<div class="line"><span class="lineno">  202</span>    <span class="keywordflow">if</span> (fabs(sum_var) &lt; 1e-12) {</div>
<div class="line"><span class="lineno">  203</span>        LOG_ERR(<span class="stringliteral">&quot;Variance too small  numerical instability (%e)&quot;</span>, sum_var);</div>
<div class="line"><span class="lineno">  204</span>        <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ad7ce2c880fa17d3d2b285a98fc47461a">BLUESYNC_DENOMINATOR_TOO_SMALL</a>;</div>
<div class="line"><span class="lineno">  205</span>    }</div>
<div class="line"><span class="lineno">  206</span> </div>
<div class="line"><span class="lineno">  207</span>    *slope = sum_cov / sum_var;</div>
<div class="line"><span class="lineno">  208</span>    *offset = mean_y - (*slope * mean_x);</div>
<div class="line"><span class="lineno">  209</span> </div>
<div class="line"><span class="lineno">  210</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a>;</div>
<div class="line"><span class="lineno">  211</span>}</div>
<div class="ttc" id="abluesync__bitfields_8c_html_a4b4ea7003ba767e26c5baa3a0cfd790e"><div class="ttname"><a href="bluesync__bitfields_8c.html#a4b4ea7003ba767e26c5baa3a0cfd790e">bitwise_and_bitfields</a></div><div class="ttdeci">void bitwise_and_bitfields(uint8_t *result, const bluesync_timestamps_t *rcv, const bluesync_timestamps_t *local, size_t num_bytes)</div><div class="ttdoc">Perform a bitwise AND between two bitfields and store the result.</div><div class="ttdef"><b>Definition</b> <a href="bluesync__bitfields_8c_source.html#l00045">bluesync_bitfields.c:45</a></div></div>
<div class="ttc" id="abluesync__bitfields_8c_html_aad862c7d519b57cfd824981a104ec796"><div class="ttname"><a href="bluesync__bitfields_8c.html#aad862c7d519b57cfd824981a104ec796">is_bit_set</a></div><div class="ttdeci">bool is_bit_set(uint8_t *bitfield, size_t bit_index)</div><div class="ttdoc">Check if a specific bit is set in the bitfield.</div><div class="ttdef"><b>Definition</b> <a href="bluesync__bitfields_8c_source.html#l00041">bluesync_bitfields.c:41</a></div></div>
<div class="ttc" id="alocal__time_8c_html_aebe0d3778275cefebe36f5d35011bd93"><div class="ttname"><a href="local__time_8c.html#aebe0d3778275cefebe36f5d35011bd93">local</a></div><div class="ttdeci">static struct local_time local</div><div class="ttdef"><b>Definition</b> <a href="local__time_8c_source.html#l00053">local_time.c:53</a></div></div>
<div class="ttc" id="asrc_2bluesync_8h_html_a17ea68732589c685ea84dd62dd615ce6a76f13fc52e1ef1a3c676878ae9cc78c4"><div class="ttname"><a href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6a76f13fc52e1ef1a3c676878ae9cc78c4">BLUESYNC_NO_ENOUGH_DATA_STATUS</a></div><div class="ttdeci">@ BLUESYNC_NO_ENOUGH_DATA_STATUS</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00041">bluesync.h:41</a></div></div>
<div class="ttc" id="asrc_2bluesync_8h_html_a17ea68732589c685ea84dd62dd615ce6a97724cdbb941a95aaff725c49f33578c"><div class="ttname"><a href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6a97724cdbb941a95aaff725c49f33578c">BLUESYNC_NO_VALID_DATA_STATUS</a></div><div class="ttdeci">@ BLUESYNC_NO_VALID_DATA_STATUS</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00040">bluesync.h:40</a></div></div>
<div class="ttc" id="asrc_2bluesync_8h_html_a17ea68732589c685ea84dd62dd615ce6ad7ce2c880fa17d3d2b285a98fc47461a"><div class="ttname"><a href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ad7ce2c880fa17d3d2b285a98fc47461a">BLUESYNC_DENOMINATOR_TOO_SMALL</a></div><div class="ttdeci">@ BLUESYNC_DENOMINATOR_TOO_SMALL</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00042">bluesync.h:42</a></div></div>
<div class="ttc" id="asrc_2bluesync_8h_html_a6a25c78511f16e4884068a26823773e6"><div class="ttname"><a href="src_2bluesync_8h.html#a6a25c78511f16e4884068a26823773e6">NB_BYTES_BITFIELD</a></div><div class="ttdeci">#define NB_BYTES_BITFIELD</div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00031">bluesync.h:31</a></div></div>
<div class="ttc" id="astructbluesync__timestamps__t_html"><div class="ttname"><a href="structbluesync__timestamps__t.html">bluesync_timestamps_t</a></div><div class="ttdef"><b>Definition</b> <a href="src_2bluesync_8h_source.html#l00050">bluesync.h:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="bluesync__bitfields_8c.html#a4b4ea7003ba767e26c5baa3a0cfd790e">bitwise_and_bitfields()</a>, <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ad7ce2c880fa17d3d2b285a98fc47461a">BLUESYNC_DENOMINATOR_TOO_SMALL</a>, <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6a76f13fc52e1ef1a3c676878ae9cc78c4">BLUESYNC_NO_ENOUGH_DATA_STATUS</a>, <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6a97724cdbb941a95aaff725c49f33578c">BLUESYNC_NO_VALID_DATA_STATUS</a>, <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a>, <a class="el" href="bluesync__bitfields_8c.html#aad862c7d519b57cfd824981a104ec796">is_bit_set()</a>, <a class="el" href="local__time_8c.html#aebe0d3778275cefebe36f5d35011bd93">local</a>, <a class="el" href="src_2bluesync_8h.html#a6a25c78511f16e4884068a26823773e6">NB_BYTES_BITFIELD</a>, <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>, <a class="el" href="structbluesync__param.html#acccbfe05f5cf3f017672603e5903d722">bluesync_param::rcv</a>, <a class="el" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>, and <a class="el" href="structbluesync__timestamps__t.html#a70965a4da9ecd868bff788b9624fccd6">bluesync_timestamps_t::timer_ticks</a>.</p>

<p class="reference">Referenced by <a class="el" href="#aeca8c130ac37b793356125ef9ceebc22">end_sync_timeslot_process()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a7d68b33b4d68345d2730953869464796_cgraph.png" border="0" usemap="#abluesync_8c_a7d68b33b4d68345d2730953869464796_cgraph" alt=""/></div>
<map name="abluesync_8c_a7d68b33b4d68345d2730953869464796_cgraph" id="abluesync_8c_a7d68b33b4d68345d2730953869464796_cgraph">
<area shape="rect" title=" " alt="" coords="5,31,171,56"/>
<area shape="rect" href="bluesync__bitfields_8c.html#a4b4ea7003ba767e26c5baa3a0cfd790e" title="Perform a bitwise AND between two bitfields and store the result." alt="" coords="219,5,360,31"/>
<area shape="poly" title=" " alt="" coords="171,30,203,26,203,32,172,36"/>
<area shape="rect" href="bluesync__bitfields_8c.html#aad862c7d519b57cfd824981a104ec796" title="Check if a specific bit is set in the bitfield." alt="" coords="251,55,328,80"/>
<area shape="poly" title=" " alt="" coords="172,51,236,58,235,64,171,56"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a7d68b33b4d68345d2730953869464796_icgraph.png" border="0" usemap="#abluesync_8c_a7d68b33b4d68345d2730953869464796_icgraph" alt=""/></div>
<map name="abluesync_8c_a7d68b33b4d68345d2730953869464796_icgraph" id="abluesync_8c_a7d68b33b4d68345d2730953869464796_icgraph">
<area shape="rect" title=" " alt="" coords="414,5,579,31"/>
<area shape="rect" href="bluesync_8c.html#aeca8c130ac37b793356125ef9ceebc22" title=" " alt="" coords="184,5,366,31"/>
<area shape="poly" title=" " alt="" coords="399,21,366,21,366,16,399,16"/>
<area shape="rect" href="bluesync_8c.html#a5e07e4c09110ee0eb81c51b0551a3101" title=" " alt="" coords="5,5,136,31"/>
<area shape="poly" title=" " alt="" coords="168,21,136,21,136,16,168,16"/>
</map>
</div>

</div>
</div>
<a id="a1bede3fdaf14c6f6462fe25bca0df18b" name="a1bede3fdaf14c6f6462fe25bca0df18b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bede3fdaf14c6f6462fe25bca0df18b">&#9670;&#160;</a></span>drift_estimation_handler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void drift_estimation_handler </td>
          <td>(</td>
          <td class="paramtype">struct k_timer *</td>          <td class="paramname"><span class="paramname"><em>timer_id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00277">277</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  277</span>                                                       {</div>
<div class="line"><span class="lineno">  278</span>    k_sem_give(&amp;bluesync_end_sync_sem);</div>
<div class="line"><span class="lineno">  279</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#a21bfb7737b28b272a313aac9db321aaf">bluesync_thread_fnt()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a1bede3fdaf14c6f6462fe25bca0df18b_icgraph.png" border="0" usemap="#abluesync_8c_a1bede3fdaf14c6f6462fe25bca0df18b_icgraph" alt=""/></div>
<map name="abluesync_8c_a1bede3fdaf14c6f6462fe25bca0df18b_icgraph" id="abluesync_8c_a1bede3fdaf14c6f6462fe25bca0df18b_icgraph">
<area shape="rect" title=" " alt="" coords="335,5,494,31"/>
<area shape="rect" href="bluesync_8c.html#a21bfb7737b28b272a313aac9db321aaf" title=" " alt="" coords="150,5,287,31"/>
<area shape="poly" title=" " alt="" coords="319,21,287,21,287,16,319,16"/>
<area shape="rect" href="bluesync_8c.html#a722991b2960886eaf99895ba3395176f" title="Initializes the BlueSync time synchronization module." alt="" coords="5,5,102,31"/>
<area shape="poly" title=" " alt="" coords="134,21,102,21,102,16,134,16"/>
</map>
</div>

</div>
</div>
<a id="aeca8c130ac37b793356125ef9ceebc22" name="aeca8c130ac37b793356125ef9ceebc22"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeca8c130ac37b793356125ef9ceebc22">&#9670;&#160;</a></span>end_sync_timeslot_process()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6">bluesync_status_t</a> end_sync_timeslot_process </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00247">247</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  247</span>                                                     {</div>
<div class="line"><span class="lineno">  248</span>    LOG_DBG(<span class="stringliteral">&quot;method: %s&quot;</span>, __func__);</div>
<div class="line"><span class="lineno">  249</span>    </div>
<div class="line"><span class="lineno">  250</span><span class="preprocessor">#if defined(CONFIG_BLUESYNC_TEST_BABBLESIM_SUPPORT)</span></div>
<div class="line"><span class="lineno">  251</span>    <a class="code hl_function" href="bluesync__statistic_8h.html#af70055b0e9d7188bda4b47b2d95b6a82">statistic_bluesync_status</a>(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv, &amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local, <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>);</div>
<div class="line"><span class="lineno">  252</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  253</span> </div>
<div class="line"><span class="lineno">  254</span>    <span class="comment">// Save the burst</span></div>
<div class="line"><span class="lineno">  255</span>    <a class="code hl_function" href="#a2889f789563da54af324b537c472ce07">bluesync_store_current_burst</a>();</div>
<div class="line"><span class="lineno">  256</span> </div>
<div class="line"><span class="lineno">  257</span>    <span class="keywordtype">double</span> slope_ticks = 0.0;</div>
<div class="line"><span class="lineno">  258</span>    <span class="keywordtype">double</span> offset_ticks = 0.0;</div>
<div class="line"><span class="lineno">  259</span> </div>
<div class="line"><span class="lineno">  260</span>    <a class="code hl_enumeration" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6">bluesync_status_t</a> err = 0;</div>
<div class="line"><span class="lineno">  261</span>    err = <a class="code hl_function" href="#a7d68b33b4d68345d2730953869464796">calculate_lr_from_history</a>(&amp;slope_ticks, &amp;offset_ticks, <a class="code hl_define" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>/2);</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>    <span class="keywordflow">if</span> (err != <a class="code hl_enumvalue" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a>){</div>
<div class="line"><span class="lineno">  264</span>        <span class="keywordflow">return</span> err;</div>
<div class="line"><span class="lineno">  265</span>    }</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>    <a class="code hl_function" href="local__time_8c.html#a1f75d52c54a0eb4db7c92090a7f7eefd">apply_timer_sync</a>(slope_ticks, offset_ticks);</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>    k_mutex_lock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex, K_FOREVER);</div>
<div class="line"><span class="lineno">  270</span>    {</div>
<div class="line"><span class="lineno">  271</span>        <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.current_round_id = <a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.new_round_id;</div>
<div class="line"><span class="lineno">  272</span>    }</div>
<div class="line"><span class="lineno">  273</span>    k_mutex_unlock(&amp;<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex);</div>
<div class="line"><span class="lineno">  274</span>    <span class="keywordflow">return</span> <a class="code hl_enumvalue" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a>;</div>
<div class="line"><span class="lineno">  275</span>}</div>
<div class="ttc" id="abluesync_8c_html_a2889f789563da54af324b537c472ce07"><div class="ttname"><a href="#a2889f789563da54af324b537c472ce07">bluesync_store_current_burst</a></div><div class="ttdeci">static void bluesync_store_current_burst()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00221">bluesync.c:221</a></div></div>
<div class="ttc" id="abluesync_8c_html_a7d68b33b4d68345d2730953869464796"><div class="ttname"><a href="#a7d68b33b4d68345d2730953869464796">calculate_lr_from_history</a></div><div class="ttdeci">static bluesync_status_t calculate_lr_from_history(double *slope, double *offset, size_t min_nb_timestamp)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00144">bluesync.c:144</a></div></div>
<div class="ttc" id="abluesync__statistic_8h_html_af70055b0e9d7188bda4b47b2d95b6a82"><div class="ttname"><a href="bluesync__statistic_8h.html#af70055b0e9d7188bda4b47b2d95b6a82">statistic_bluesync_status</a></div><div class="ttdeci">void statistic_bluesync_status(bluesync_timestamps_t *elem_master, bluesync_timestamps_t *elem_slave, size_t size)</div><div class="ttdoc">Analyze and log synchronization statistics based on a series of timestamps.</div><div class="ttdef"><b>Definition</b> <a href="bluesync__statistic__bsim_8c_source.html#l00075">bluesync_statistic_bsim.c:75</a></div></div>
<div class="ttc" id="alocal__time_8c_html_a1f75d52c54a0eb4db7c92090a7f7eefd"><div class="ttname"><a href="local__time_8c.html#a1f75d52c54a0eb4db7c92090a7f7eefd">apply_timer_sync</a></div><div class="ttdeci">void apply_timer_sync(double new_slope, double new_offset)</div><div class="ttdoc">Apply the synchronisation parameters. Once the LR is made, The result of it gives a drift value (slop...</div><div class="ttdef"><b>Definition</b> <a href="local__time_8c_source.html#l00101">local_time.c:101</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="local__time_8c.html#a1f75d52c54a0eb4db7c92090a7f7eefd">apply_timer_sync()</a>, <a class="el" href="#a2889f789563da54af324b537c472ce07">bluesync_store_current_burst()</a>, <a class="el" href="src_2bluesync_8h.html#a17ea68732589c685ea84dd62dd615ce6ac2f6724c9bd84bebdbed56f2680541e7">BLUESYNC_SUCCESS_STATUS</a>, <a class="el" href="#a7d68b33b4d68345d2730953869464796">calculate_lr_from_history()</a>, <a class="el" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>, <a class="el" href="src_2bluesync_8h.html#a9dc67a78122f8ec8ac0888bb33a7b066">SLOT_NUMBER</a>, and <a class="el" href="bluesync__statistic_8h.html#af70055b0e9d7188bda4b47b2d95b6a82">statistic_bluesync_status()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a5e07e4c09110ee0eb81c51b0551a3101">bs_update_handler()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_aeca8c130ac37b793356125ef9ceebc22_cgraph.png" border="0" usemap="#abluesync_8c_aeca8c130ac37b793356125ef9ceebc22_cgraph" alt=""/></div>
<map name="abluesync_8c_aeca8c130ac37b793356125ef9ceebc22_cgraph" id="abluesync_8c_aeca8c130ac37b793356125ef9ceebc22_cgraph">
<area shape="rect" title=" " alt="" coords="5,92,188,118"/>
<area shape="rect" href="local__time_8c.html#a1f75d52c54a0eb4db7c92090a7f7eefd" title="Apply the synchronisation parameters. Once the LR is made, The result of it gives a drift value (slop..." alt="" coords="258,5,379,31"/>
<area shape="poly" title=" " alt="" coords="124,89,235,41,255,34,257,39,237,46,126,94"/>
<area shape="rect" href="bluesync_8c.html#a2889f789563da54af324b537c472ce07" title=" " alt="" coords="241,55,396,96"/>
<area shape="poly" title=" " alt="" coords="188,90,225,85,225,90,189,95"/>
<area shape="rect" href="bluesync_8c.html#a7d68b33b4d68345d2730953869464796" title=" " alt="" coords="236,120,401,146"/>
<area shape="poly" title=" " alt="" coords="189,114,221,118,220,123,188,119"/>
<area shape="rect" href="bluesync__statistic__bsim_8c.html#af70055b0e9d7188bda4b47b2d95b6a82" title="Analyze and log synchronization statistics based on a series of timestamps." alt="" coords="256,170,381,210"/>
<area shape="poly" title=" " alt="" coords="133,116,250,161,249,166,131,121"/>
<area shape="rect" href="bluesync__bitfields_8c.html#a4b4ea7003ba767e26c5baa3a0cfd790e" title="Perform a bitwise AND between two bitfields and store the result." alt="" coords="449,169,590,195"/>
<area shape="poly" title=" " alt="" coords="375,144,450,162,449,168,373,149"/>
<area shape="rect" href="bluesync__bitfields_8c.html#aad862c7d519b57cfd824981a104ec796" title="Check if a specific bit is set in the bitfield." alt="" coords="481,120,558,146"/>
<area shape="poly" title=" " alt="" coords="402,130,466,130,466,136,402,136"/>
<area shape="poly" title=" " alt="" coords="381,185,433,183,434,188,382,190"/>
<area shape="poly" title=" " alt="" coords="381,170,466,145,467,150,382,175"/>
<area shape="rect" href="bluesync__statistic__bsim_8c.html#ac6bf4c0528a00565887dc67de2a01676" title=" " alt="" coords="457,219,582,260"/>
<area shape="poly" title=" " alt="" coords="382,203,443,218,442,223,381,208"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_aeca8c130ac37b793356125ef9ceebc22_icgraph.png" border="0" usemap="#abluesync_8c_aeca8c130ac37b793356125ef9ceebc22_icgraph" alt=""/></div>
<map name="abluesync_8c_aeca8c130ac37b793356125ef9ceebc22_icgraph" id="abluesync_8c_aeca8c130ac37b793356125ef9ceebc22_icgraph">
<area shape="rect" title=" " alt="" coords="184,5,366,31"/>
<area shape="rect" href="bluesync_8c.html#a5e07e4c09110ee0eb81c51b0551a3101" title=" " alt="" coords="5,5,136,31"/>
<area shape="poly" title=" " alt="" coords="168,21,136,21,136,16,168,16"/>
</map>
</div>

</div>
</div>
<a id="a68e61b6f9356823f75643be78057964c" name="a68e61b6f9356823f75643be78057964c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68e61b6f9356823f75643be78057964c">&#9670;&#160;</a></span>K_MSGQ_DEFINE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_MSGQ_DEFINE </td>
          <td>(</td>
          <td class="paramtype">bluesync_rx_msgq</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sizeof(struct <a class="el" href="structbluesync__msg__client.html">bluesync_msg_client</a>)</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">17</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab5c483581b9845b50f3901e6f118c241" name="ab5c483581b9845b50f3901e6f118c241"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c483581b9845b50f3901e6f118c241">&#9670;&#160;</a></span>K_SEM_DEFINE() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_SEM_DEFINE </td>
          <td>(</td>
          <td class="paramtype">bluesync_end_sync_sem</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aaba8afc3ef3b28bf23cdc71d40e0eb21" name="aaba8afc3ef3b28bf23cdc71d40e0eb21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaba8afc3ef3b28bf23cdc71d40e0eb21">&#9670;&#160;</a></span>K_SEM_DEFINE() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_SEM_DEFINE </td>
          <td>(</td>
          <td class="paramtype">bluesync_role_assign_sem</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a1d8fb6636feddae8965860b110598f8b" name="a1d8fb6636feddae8965860b110598f8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d8fb6636feddae8965860b110598f8b">&#9670;&#160;</a></span>K_SEM_DEFINE() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_SEM_DEFINE </td>
          <td>(</td>
          <td class="paramtype">bluesync_start_new_sync_sem</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">0</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">1</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a75a7f8463e02e9b45729599dae15f320" name="a75a7f8463e02e9b45729599dae15f320"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75a7f8463e02e9b45729599dae15f320">&#9670;&#160;</a></span>K_THREAD_STACK_DEFINE()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">K_THREAD_STACK_DEFINE </td>
          <td>(</td>
          <td class="paramtype">bluesync_thread_stack</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONFIG_BLUESYNC_THREAD_STACK_SIZE</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a2cdc2466a71e0c7126ac38b467b85d18" name="a2cdc2466a71e0c7126ac38b467b85d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cdc2466a71e0c7126ac38b467b85d18">&#9670;&#160;</a></span>LOG_MODULE_REGISTER()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">LOG_MODULE_REGISTER </td>
          <td>(</td>
          <td class="paramtype">bluesync</td>          <td class="paramname"><span class="paramname"><em></em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">CONFIG_BLUESYNC_LOG_LEVEL</td>          <td class="paramname"><span class="paramname"><em></em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ab62b52cc2c05b0b6f1d1fd6816b4f43c" name="ab62b52cc2c05b0b6f1d1fd6816b4f43c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab62b52cc2c05b0b6f1d1fd6816b4f43c">&#9670;&#160;</a></span>reset_bluesync_timestamps()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void reset_bluesync_timestamps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structbluesync__timestamps__t.html">bluesync_timestamps_t</a> *</td>          <td class="paramname"><span class="paramname"><em>elem</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00109">109</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  109</span>                                                                  {</div>
<div class="line"><span class="lineno">  110</span>    memset(&amp;elem-&gt;<a class="code hl_variable" href="structbluesync__timestamps__t.html#aee8cbd4e2c654ca51e72be2c72a09eec">bitfield</a>, 0, <span class="keyword">sizeof</span>(elem-&gt;<a class="code hl_variable" href="structbluesync__timestamps__t.html#aee8cbd4e2c654ca51e72be2c72a09eec">bitfield</a>));</div>
<div class="line"><span class="lineno">  111</span>    memset(&amp;elem-&gt;<a class="code hl_variable" href="structbluesync__timestamps__t.html#a70965a4da9ecd868bff788b9624fccd6">timer_ticks</a>, 0, <span class="keyword">sizeof</span>(elem-&gt;<a class="code hl_variable" href="structbluesync__timestamps__t.html#a70965a4da9ecd868bff788b9624fccd6">timer_ticks</a>));</div>
<div class="line"><span class="lineno">  112</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="structbluesync__timestamps__t.html#aee8cbd4e2c654ca51e72be2c72a09eec">bluesync_timestamps_t::bitfield</a>, and <a class="el" href="structbluesync__timestamps__t.html#a70965a4da9ecd868bff788b9624fccd6">bluesync_timestamps_t::timer_ticks</a>.</p>

<p class="reference">Referenced by <a class="el" href="#ac645e5a0d11afc2847855b7697f55c63">bluesync_reset_param()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_ab62b52cc2c05b0b6f1d1fd6816b4f43c_icgraph.png" border="0" usemap="#abluesync_8c_ab62b52cc2c05b0b6f1d1fd6816b4f43c_icgraph" alt=""/></div>
<map name="abluesync_8c_ab62b52cc2c05b0b6f1d1fd6816b4f43c_icgraph" id="abluesync_8c_ab62b52cc2c05b0b6f1d1fd6816b4f43c_icgraph">
<area shape="rect" title=" " alt="" coords="410,35,593,60"/>
<area shape="rect" href="bluesync_8c.html#ac645e5a0d11afc2847855b7697f55c63" title=" " alt="" coords="211,35,362,60"/>
<area shape="poly" title=" " alt="" coords="394,50,362,50,362,45,394,45"/>
<area shape="rect" href="bluesync_8c.html#aa93dc27074f8b822db6118b39d80207c" title=" " alt="" coords="28,5,140,31"/>
<area shape="poly" title=" " alt="" coords="195,37,140,29,141,24,196,32"/>
<area shape="rect" href="bluesync_8c.html#a0899d4461371eab18cec52ab2673600a" title=" " alt="" coords="5,55,163,96"/>
<area shape="poly" title=" " alt="" coords="195,63,163,67,163,62,195,57"/>
</map>
</div>

</div>
</div>
<a id="a5786970c5cd6649e57c988641e21c92b" name="a5786970c5cd6649e57c988641e21c92b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5786970c5cd6649e57c988641e21c92b">&#9670;&#160;</a></span>scan_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scan_cb </td>
          <td>(</td>
          <td class="paramtype">const bt_addr_le_t *</td>          <td class="paramname"><span class="paramname"><em>addr</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t</td>          <td class="paramname"><span class="paramname"><em>rssi</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct net_buf_simple *</td>          <td class="paramname"><span class="paramname"><em>buf</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00416">416</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  416</span>                                                                               {</div>
<div class="line"><span class="lineno">  417</span> </div>
<div class="line"><span class="lineno">  418</span>    <span class="comment">// Check if there is enough data in the buffer</span></div>
<div class="line"><span class="lineno">  419</span>    <span class="keywordflow">if</span> (buf-&gt;len &lt; 2) {</div>
<div class="line"><span class="lineno">  420</span>        LOG_ERR(<span class="stringliteral">&quot;Error: Not enough data for extended advertising&quot;</span>);</div>
<div class="line"><span class="lineno">  421</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  422</span>    }</div>
<div class="line"><span class="lineno">  423</span>    <span class="comment">// Parse length and type fields</span></div>
<div class="line"><span class="lineno">  424</span>    <span class="comment">// Parse AD_ELEMENT_FLAG</span></div>
<div class="line"><span class="lineno">  425</span>    uint8_t len_ad_flag = net_buf_simple_pull_u8(buf);</div>
<div class="line"><span class="lineno">  426</span>    <span class="keywordflow">if</span> (len_ad_flag &gt; 0){</div>
<div class="line"><span class="lineno">  427</span>        net_buf_simple_pull_mem(buf, len_ad_flag);</div>
<div class="line"><span class="lineno">  428</span>    }</div>
<div class="line"><span class="lineno">  429</span>    <span class="comment">// Parse AD_ELEMENT_MANUFACTURER_SPECIFIC</span></div>
<div class="line"><span class="lineno">  430</span>    uint8_t len = net_buf_simple_pull_u8(buf);</div>
<div class="line"><span class="lineno">  431</span>    <span class="keywordflow">if</span> (len &gt; buf-&gt;len) {</div>
<div class="line"><span class="lineno">  432</span>        LOG_ERR(<span class="stringliteral">&quot;Error: Buffer length mismatch&quot;</span>);</div>
<div class="line"><span class="lineno">  433</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  434</span>    }</div>
<div class="line"><span class="lineno">  435</span>    uint8_t type = net_buf_simple_pull_u8(buf);</div>
<div class="line"><span class="lineno">  436</span>    <span class="keywordflow">if</span> (type == BT_DATA_MANUFACTURER_DATA){</div>
<div class="line"><span class="lineno">  437</span>        <span class="comment">// get manufacturer id</span></div>
<div class="line"><span class="lineno">  438</span>        net_buf_simple_pull_be16(buf);</div>
<div class="line"><span class="lineno">  439</span>        <span class="comment">// Verify that the payload length matches the expected size</span></div>
<div class="line"><span class="lineno">  440</span>        <span class="keywordflow">if</span> (len - 3 != <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code hl_struct" href="structbluesync__msg.html">bluesync_msg</a>)) {</div>
<div class="line"><span class="lineno">  441</span>            LOG_ERR(<span class="stringliteral">&quot;Error: Unexpected manufacturer data size&quot;</span>);</div>
<div class="line"><span class="lineno">  442</span>            <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  443</span>        }</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>        <span class="keyword">struct </span><a class="code hl_struct" href="structbluesync__msg__client.html">bluesync_msg_client</a> msg;</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>        <a class="code hl_function" href="#ac1f14e07918b159fe1dc8277a7d2c14e">bluesync_decode_msg</a>(&amp;msg, buf);</div>
<div class="line"><span class="lineno">  448</span> </div>
<div class="line"><span class="lineno">  449</span>        <span class="keywordtype">int</span> ret = k_msgq_put(&amp;bluesync_rx_msgq, &amp;msg, K_NO_WAIT);</div>
<div class="line"><span class="lineno">  450</span> </div>
<div class="line"><span class="lineno">  451</span>        <span class="keywordflow">if</span> (ret != 0 ) {</div>
<div class="line"><span class="lineno">  452</span>            LOG_ERR(<span class="stringliteral">&quot;Failed to put message in msgq&quot;</span>);</div>
<div class="line"><span class="lineno">  453</span>        }</div>
<div class="line"><span class="lineno">  454</span> </div>
<div class="line"><span class="lineno">  455</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  456</span>        LOG_ERR(<span class="stringliteral">&quot;Error: Unsupported advertising data type (0x%02X)&quot;</span>, type);</div>
<div class="line"><span class="lineno">  457</span>    }</div>
<div class="line"><span class="lineno">  458</span>}</div>
<div class="ttc" id="abluesync_8c_html_ac1f14e07918b159fe1dc8277a7d2c14e"><div class="ttname"><a href="#ac1f14e07918b159fe1dc8277a7d2c14e">bluesync_decode_msg</a></div><div class="ttdeci">static void bluesync_decode_msg(struct bluesync_msg_client *msg, struct net_buf_simple *buf)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00213">bluesync.c:213</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="#ac1f14e07918b159fe1dc8277a7d2c14e">bluesync_decode_msg()</a>.</p>

<p class="reference">Referenced by <a class="el" href="#a3281e1132ea7be337932f349e4dd0103">bluesync_scan_start()</a>, and <a class="el" href="#accff9034edc5962a24e70e68901a3ca8">bt_scan_cb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a5786970c5cd6649e57c988641e21c92b_cgraph.png" border="0" usemap="#abluesync_8c_a5786970c5cd6649e57c988641e21c92b_cgraph" alt=""/></div>
<map name="abluesync_8c_a5786970c5cd6649e57c988641e21c92b_cgraph" id="abluesync_8c_a5786970c5cd6649e57c988641e21c92b_cgraph">
<area shape="rect" title=" " alt="" coords="5,5,76,31"/>
<area shape="rect" href="bluesync_8c.html#ac1f14e07918b159fe1dc8277a7d2c14e" title=" " alt="" coords="124,5,277,31"/>
<area shape="poly" title=" " alt="" coords="76,16,108,16,108,21,76,21"/>
<area shape="rect" href="local__time_8c.html#ae7531b3c0b2ca2aa533b2ebd223cb7a0" title="Get the logical time ticks value. This is the corrected ticks value after synchronisation...." alt="" coords="325,5,475,31"/>
<area shape="poly" title=" " alt="" coords="277,16,309,16,309,21,277,21"/>
<area shape="rect" href="local__time_8c.html#a3de0db4d23103b2a5c83f9b27b39cf85" title=" " alt="" coords="523,5,681,31"/>
<area shape="poly" title=" " alt="" coords="476,16,508,16,508,21,476,21"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="bluesync_8c_a5786970c5cd6649e57c988641e21c92b_icgraph.png" border="0" usemap="#abluesync_8c_a5786970c5cd6649e57c988641e21c92b_icgraph" alt=""/></div>
<map name="abluesync_8c_a5786970c5cd6649e57c988641e21c92b_icgraph" id="abluesync_8c_a5786970c5cd6649e57c988641e21c92b_icgraph">
<area shape="rect" title=" " alt="" coords="535,13,606,38"/>
<area shape="rect" href="bluesync_8c.html#a3281e1132ea7be337932f349e4dd0103" title=" " alt="" coords="211,13,351,38"/>
<area shape="poly" title=" " alt="" coords="520,28,351,28,351,23,520,23"/>
<area shape="rect" href="bluesync_8c.html#accff9034edc5962a24e70e68901a3ca8" title=" " alt="" coords="399,38,487,64"/>
<area shape="poly" title=" " alt="" coords="521,38,488,45,487,40,520,33"/>
<area shape="rect" href="bluesync_8c.html#a0899d4461371eab18cec52ab2673600a" title=" " alt="" coords="5,5,163,46"/>
<area shape="poly" title=" " alt="" coords="195,28,163,28,163,23,195,23"/>
<area shape="poly" title=" " alt="" coords="383,44,351,39,352,34,384,39"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aed90acb647f5b18c244652d9bc8fc883" name="aed90acb647f5b18c244652d9bc8fc883"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed90acb647f5b18c244652d9bc8fc883">&#9670;&#160;</a></span>bt_callbacks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct bt_le_ext_adv_cb bt_callbacks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    .sent = <a class="code hl_function" href="#a53cf47753502eeef3bd5a7e9753dc877">adv_sent_cb</a>,</div>
<div class="line">}</div>
<div class="ttc" id="abluesync_8c_html_a53cf47753502eeef3bd5a7e9753dc877"><div class="ttname"><a href="#a53cf47753502eeef3bd5a7e9753dc877">adv_sent_cb</a></div><div class="ttdeci">void adv_sent_cb(struct bt_le_ext_adv *adv, struct bt_le_ext_adv_sent_info *info)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00506">bluesync.c:506</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00524">524</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  524</span>                                              {</div>
<div class="line"><span class="lineno">  525</span>    .sent = <a class="code hl_function" href="#a53cf47753502eeef3bd5a7e9753dc877">adv_sent_cb</a>,</div>
<div class="line"><span class="lineno">  526</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#ae50107a7d06bfb4985ecbe2800d21bfe">bluesync_init_adv()</a>.</p>

</div>
</div>
<a id="a7d915d6457a8c114b381f3b2856d154d" name="a7d915d6457a8c114b381f3b2856d154d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d915d6457a8c114b381f3b2856d154d">&#9670;&#160;</a></span>bt_packet_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t bt_packet_buf[sizeof(uint16_t)+sizeof(struct <a class="el" href="structbluesync__msg.html">bluesync_msg</a>)] = {0}</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00348">348</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  348</span>{0};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#a1fcdc17b3a214717b39e519ce5ca4dd8">bluesync_encode_msg()</a>.</p>

</div>
</div>
<a id="a765d9ede025f5941a2bc0bf8e385f5f5" name="a765d9ede025f5941a2bc0bf8e385f5f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a765d9ede025f5941a2bc0bf8e385f5f5">&#9670;&#160;</a></span>handlers</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbs__sm__handlers.html">bs_sm_handlers</a> handlers</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">={</div>
<div class="line">    .bs_scan_wait_for_sync_cb = <a class="code hl_function" href="#a0899d4461371eab18cec52ab2673600a">bs_scan_wait_for_sync_handler</a>,</div>
<div class="line">    .bs_sync_cb = <a class="code hl_function" href="#aad71b25f3b8904dfbb3ca4b51c556b1c">bs_sync_handler</a>,</div>
<div class="line">    .bs_update_cb = <a class="code hl_function" href="#a5e07e4c09110ee0eb81c51b0551a3101">bs_update_handler</a>,</div>
<div class="line">    .bs_adv_cb = <a class="code hl_function" href="#aa93dc27074f8b822db6118b39d80207c">bs_adv_handler</a>,</div>
<div class="line">    .bs_stop_cb = <a class="code hl_function" href="#a36f79ba7fa7845415e9a15c49cf671f0">bs_stop_handler</a>,</div>
<div class="line">}</div>
<div class="ttc" id="abluesync_8c_html_a0899d4461371eab18cec52ab2673600a"><div class="ttname"><a href="#a0899d4461371eab18cec52ab2673600a">bs_scan_wait_for_sync_handler</a></div><div class="ttdeci">void bs_scan_wait_for_sync_handler(void)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00538">bluesync.c:538</a></div></div>
<div class="ttc" id="abluesync_8c_html_a36f79ba7fa7845415e9a15c49cf671f0"><div class="ttname"><a href="#a36f79ba7fa7845415e9a15c49cf671f0">bs_stop_handler</a></div><div class="ttdeci">void bs_stop_handler(void)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00570">bluesync.c:570</a></div></div>
<div class="ttc" id="abluesync_8c_html_a5e07e4c09110ee0eb81c51b0551a3101"><div class="ttname"><a href="#a5e07e4c09110ee0eb81c51b0551a3101">bs_update_handler</a></div><div class="ttdeci">void bs_update_handler(void)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00549">bluesync.c:549</a></div></div>
<div class="ttc" id="abluesync_8c_html_aa93dc27074f8b822db6118b39d80207c"><div class="ttname"><a href="#aa93dc27074f8b822db6118b39d80207c">bs_adv_handler</a></div><div class="ttdeci">void bs_adv_handler(void)</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00562">bluesync.c:562</a></div></div>
<div class="ttc" id="abluesync_8c_html_aad71b25f3b8904dfbb3ca4b51c556b1c"><div class="ttname"><a href="#aad71b25f3b8904dfbb3ca4b51c556b1c">bs_sync_handler</a></div><div class="ttdeci">void bs_sync_handler()</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00545">bluesync.c:545</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00574">574</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  574</span>                                {</div>
<div class="line"><span class="lineno">  575</span>    .bs_scan_wait_for_sync_cb = <a class="code hl_function" href="#a0899d4461371eab18cec52ab2673600a">bs_scan_wait_for_sync_handler</a>,</div>
<div class="line"><span class="lineno">  576</span>    .bs_sync_cb = <a class="code hl_function" href="#aad71b25f3b8904dfbb3ca4b51c556b1c">bs_sync_handler</a>,</div>
<div class="line"><span class="lineno">  577</span>    .bs_update_cb = <a class="code hl_function" href="#a5e07e4c09110ee0eb81c51b0551a3101">bs_update_handler</a>,</div>
<div class="line"><span class="lineno">  578</span>    .bs_adv_cb = <a class="code hl_function" href="#aa93dc27074f8b822db6118b39d80207c">bs_adv_handler</a>,</div>
<div class="line"><span class="lineno">  579</span>    .bs_stop_cb = <a class="code hl_function" href="#a36f79ba7fa7845415e9a15c49cf671f0">bs_stop_handler</a>,</div>
<div class="line"><span class="lineno">  580</span>};</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#a21bfb7737b28b272a313aac9db321aaf">bluesync_thread_fnt()</a>, and <a class="el" href="bs__state__machine_8c.html#a53d51bafaea759128ff2e086cd372e6c">bs_state_machine_init()</a>.</p>

</div>
</div>
<a id="aef8cb9436cbb84d87beadf7b0d862d4b" name="aef8cb9436cbb84d87beadf7b0d862d4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef8cb9436cbb84d87beadf7b0d862d4b">&#9670;&#160;</a></span>param</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structbluesync__param.html">bluesync_param</a> param</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel static">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="bluesync_8c_source.html#l00050">50</a> of file <a class="el" href="bluesync_8c_source.html">bluesync.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   50</span>                                     {</div>
<div class="line"><span class="lineno">   51</span>    .timeslot_index = 0,</div>
<div class="line"><span class="lineno">   52</span>    .local = {</div>
<div class="line"><span class="lineno">   53</span>        .timer_ticks = {0},</div>
<div class="line"><span class="lineno">   54</span>        .bitfield = {0},</div>
<div class="line"><span class="lineno">   55</span>    },</div>
<div class="line"><span class="lineno">   56</span>    .local_mutex = Z_MUTEX_INITIALIZER(<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_mutex),</div>
<div class="line"><span class="lineno">   57</span>    .local_history = {</div>
<div class="line"><span class="lineno">   58</span>        [0 ... <a class="code hl_define" href="src_2bluesync_8h.html#a25a99552d2a6920e5bed8d46274ad5e4">BURST_WINDOWS_SIZE</a>-1] = {</div>
<div class="line"><span class="lineno">   59</span>            .timer_ticks = {0},</div>
<div class="line"><span class="lineno">   60</span>            .bitfield = {0},</div>
<div class="line"><span class="lineno">   61</span>        }</div>
<div class="line"><span class="lineno">   62</span>    },</div>
<div class="line"><span class="lineno">   63</span>    .local_head = 0,</div>
<div class="line"><span class="lineno">   64</span>    .local_count = 0,</div>
<div class="line"><span class="lineno">   65</span>    .local_history_mutex = Z_MUTEX_INITIALIZER(<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.local_history_mutex),</div>
<div class="line"><span class="lineno">   66</span> </div>
<div class="line"><span class="lineno">   67</span>    .rcv = {</div>
<div class="line"><span class="lineno">   68</span>        .timer_ticks = {0},</div>
<div class="line"><span class="lineno">   69</span>        .bitfield = {0},</div>
<div class="line"><span class="lineno">   70</span>    },</div>
<div class="line"><span class="lineno">   71</span>    .rcv_mutex = Z_MUTEX_INITIALIZER(<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_mutex),</div>
<div class="line"><span class="lineno">   72</span>    .rcv_history = {</div>
<div class="line"><span class="lineno">   73</span>        [0 ... <a class="code hl_define" href="src_2bluesync_8h.html#a25a99552d2a6920e5bed8d46274ad5e4">BURST_WINDOWS_SIZE</a>-1] = {</div>
<div class="line"><span class="lineno">   74</span>            .timer_ticks = {0},</div>
<div class="line"><span class="lineno">   75</span>            .bitfield = {0},</div>
<div class="line"><span class="lineno">   76</span>        }</div>
<div class="line"><span class="lineno">   77</span>    },</div>
<div class="line"><span class="lineno">   78</span>    .rcv_head = 0,</div>
<div class="line"><span class="lineno">   79</span>    .rcv_count = 0,</div>
<div class="line"><span class="lineno">   80</span>    .rcv_history_mutex = Z_MUTEX_INITIALIZER(<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.rcv_history_mutex),</div>
<div class="line"><span class="lineno">   81</span> </div>
<div class="line"><span class="lineno">   82</span>    .current_round_id = 0xFF,</div>
<div class="line"><span class="lineno">   83</span>    .adv_param = BT_LE_ADV_PARAM_INIT(</div>
<div class="line"><span class="lineno">   84</span>        BT_LE_ADV_OPT_EXT_ADV |</div>
<div class="line"><span class="lineno">   85</span>        BT_LE_ADV_OPT_USE_IDENTITY |</div>
<div class="line"><span class="lineno">   86</span>        BT_LE_ADV_OPT_CODED ,</div>
<div class="line"><span class="lineno">   87</span>        <a class="code hl_define" href="#abb5db2b1e5041d3e2a4230f135adee9a">BLUESYNC_BT_MIN_ADV_INT</a>,</div>
<div class="line"><span class="lineno">   88</span>        <a class="code hl_define" href="#a797f51b447dac77a029c78b573aab6c0">BLUESYNC_BT_MAX_ADV_INT</a>,</div>
<div class="line"><span class="lineno">   89</span>        NULL</div>
<div class="line"><span class="lineno">   90</span>    ),</div>
<div class="line"><span class="lineno">   91</span>    .scan_param = BT_LE_SCAN_PARAM_INIT(</div>
<div class="line"><span class="lineno">   92</span>        BT_LE_SCAN_TYPE_PASSIVE,</div>
<div class="line"><span class="lineno">   93</span>        BT_LE_SCAN_OPT_CODED | </div>
<div class="line"><span class="lineno">   94</span>        BT_LE_SCAN_OPT_NO_1M,</div>
<div class="line"><span class="lineno">   95</span>        <a class="code hl_define" href="#ad9c05005983ef020bd49ba6b86ffa981">BLUESYNC_BT_SCAN_INT</a>,</div>
<div class="line"><span class="lineno">   96</span>        <a class="code hl_define" href="#aebf0e9557f0e953d60cac646e4b1db9b">BLUESYNC_BT_SCAN_WIND_SIZE</a></div>
<div class="line"><span class="lineno">   97</span>    ),</div>
<div class="line"><span class="lineno">   98</span>    .mutex = Z_MUTEX_INITIALIZER(<a class="code hl_variable" href="#aef8cb9436cbb84d87beadf7b0d862d4b">param</a>.mutex),</div>
<div class="line"><span class="lineno">   99</span>};</div>
<div class="ttc" id="abluesync_8c_html_a797f51b447dac77a029c78b573aab6c0"><div class="ttname"><a href="#a797f51b447dac77a029c78b573aab6c0">BLUESYNC_BT_MAX_ADV_INT</a></div><div class="ttdeci">#define BLUESYNC_BT_MAX_ADV_INT</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00044">bluesync.c:44</a></div></div>
<div class="ttc" id="abluesync_8c_html_abb5db2b1e5041d3e2a4230f135adee9a"><div class="ttname"><a href="#abb5db2b1e5041d3e2a4230f135adee9a">BLUESYNC_BT_MIN_ADV_INT</a></div><div class="ttdeci">#define BLUESYNC_BT_MIN_ADV_INT</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00043">bluesync.c:43</a></div></div>
<div class="ttc" id="abluesync_8c_html_ad9c05005983ef020bd49ba6b86ffa981"><div class="ttname"><a href="#ad9c05005983ef020bd49ba6b86ffa981">BLUESYNC_BT_SCAN_INT</a></div><div class="ttdeci">#define BLUESYNC_BT_SCAN_INT</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00045">bluesync.c:45</a></div></div>
<div class="ttc" id="abluesync_8c_html_aebf0e9557f0e953d60cac646e4b1db9b"><div class="ttname"><a href="#aebf0e9557f0e953d60cac646e4b1db9b">BLUESYNC_BT_SCAN_WIND_SIZE</a></div><div class="ttdeci">#define BLUESYNC_BT_SCAN_WIND_SIZE</div><div class="ttdef"><b>Definition</b> <a href="bluesync_8c_source.html#l00046">bluesync.c:46</a></div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="#a53cf47753502eeef3bd5a7e9753dc877">adv_sent_cb()</a>, <a class="el" href="include_2bluesync_2bluesync_8h.html#a722991b2960886eaf99895ba3395176f">bluesync_init()</a>, <a class="el" href="#ae50107a7d06bfb4985ecbe2800d21bfe">bluesync_init_adv()</a>, <a class="el" href="#ac645e5a0d11afc2847855b7697f55c63">bluesync_reset_param()</a>, <a class="el" href="#aa16c1884bb8d3e76f7e0b221988d8906">bluesync_scan_packet_process()</a>, <a class="el" href="#a3281e1132ea7be337932f349e4dd0103">bluesync_scan_start()</a>, <a class="el" href="#a1701ea77f09d4dc607b1b5e92b474cf8">bluesync_send_adv()</a>, <a class="el" href="include_2bluesync_2bluesync_8h.html#a4690b69707910bec50799ce1911f4af2">bluesync_start_net_sync()</a>, <a class="el" href="#a2889f789563da54af324b537c472ce07">bluesync_store_current_burst()</a>, <a class="el" href="#a21bfb7737b28b272a313aac9db321aaf">bluesync_thread_fnt()</a>, <a class="el" href="#a7d68b33b4d68345d2730953869464796">calculate_lr_from_history()</a>, and <a class="el" href="#aeca8c130ac37b793356125ef9ceebc22">end_sync_timeslot_process()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
